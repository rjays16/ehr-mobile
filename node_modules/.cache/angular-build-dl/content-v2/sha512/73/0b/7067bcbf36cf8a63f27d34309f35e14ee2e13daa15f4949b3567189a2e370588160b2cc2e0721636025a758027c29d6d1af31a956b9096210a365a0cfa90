(window.webpackJsonp=window.webpackJsonp||[]).push([[18],{"7wfR":function(n,e,t){"use strict";t.d(e,"a",(function(){return i}));var l=t("8Y7J");let i=(()=>{class n{constructor(){}getSelectedEncounterNo(){return this.selectedEncounterNo}setSelectedEncounterNo(n){this.selectedEncounterNo=n}getTempEncounterNo(){return this.tempEncounterNo}setTempEncounterNo(n){this.tempEncounterNo=n}getSelectedPatientBriefInformation(){return this.selectedPatientInformation}setSelectedPatientBriefInformation(n){this.selectedPatientInformation=n}getPatientList(){return this.patients}setPatientList(n){this.patients=n}getMyPatientList(){return this.myPatients}setMyPatientList(n){this.myPatients=n}getNursePatientList(){return this.nursePatients}setNursePatientList(n){this.nursePatients=n}getType(){return this.type}setType(n){this.type=n}getWard(){return this.ward}setWard(n){this.ward=n}getSearchKeyword(){return this.searchKeyword}setSearchKeyword(n){this.searchKeyword=n}}return n.ngInjectableDef=l.bc({factory:function(){return new n},token:n,providedIn:"root"}),n})()},EFyh:function(n,e,t){"use strict";t.d(e,"a",(function(){return i}));var l=t("8Y7J");let i=(()=>{class n{constructor(){this.inTestServer=!1}getCredentials(){return this.credentials}setTestServerIdent(n){this.inTestServer=1==n,console.log("this.inTestServer",this.inTestServer)}setCredentials(n){this.credentials=n}getAuthentication(){return this.authentication}setAuthentication(n){this.authentication=n}getConfigAndDefaults(){return this.configAndDefaults}setConfigAndDefaults(n){this.configAndDefaults=n}}return n.ngInjectableDef=l.bc({factory:function(){return new n},token:n,providedIn:"root"}),n})()},"H+bZ":function(n,e,t){"use strict";t.d(e,"a",(function(){return o}));var l=t("AytR"),i=t("8Y7J");let o=(()=>{class n{constructor(){this.url=l.a.url}getUrl(){return this.url}setUrl(n){this.url=n}}return n.ngInjectableDef=i.bc({factory:function(){return new n},token:n,providedIn:"root"}),n})()},Pasx:function(n,e,t){"use strict";t.d(e,"a",(function(){return i}));var l=t("8Y7J");let i=(()=>{class n{constructor(){}parseErrorMessage(n){let e="";return n.error?e=n.error.message?n.error.message:n.error:n.message&&(e=n.message),e}parseErrorArrayMessage(n){let e="";return n.error?e=n.error.mandatories?n.error.mandatories:n.error:n.mandatories&&(e=n.mandatories),e}}return n.ngInjectableDef=l.bc({factory:function(){return new n},token:n,providedIn:"root"}),n})()},T4AJ:function(n,e,t){"use strict";t.r(e);var l=t("8Y7J"),i=t("IheW"),o=t("Cfvw"),s=t("z6cu"),a=t("tS1D"),r=t("lJxs"),c=t("JIr8"),u=t("ZZ/e"),d=t("yp2w");let h=(()=>{class n{constructor(n,e,t){this.platform=n,this.httpClient=e,this.http=t,this.url="http://localhost:3000",this.getPhysicalExaminationPath="/api/doctor/patient/physical/examination/data",this.savePhysicalExaminationPath="/api/doctor/patient/physical/examination/data/save"}setUrl(n){this.url=n}setToken(n){this.token=n}getPhysicalExamination(n){if(this.platform.is("ios")||this.platform.is("android")){console.log("native");const e={Accept:"application/json",Authorization:"Bearer "+this.token};return Object(o.a)(this.http.post(this.url+this.getPhysicalExaminationPath+"?id="+n,{},e)).pipe(Object(a.a)(3e4),Object(r.a)(n=>{const e=JSON.parse(n.data);return console.log("Physical Examination: ",e),e}),Object(c.a)((n,e)=>{if("string"==typeof n.error)try{n.error=JSON.parse(n.error)}catch(t){console.log("err.error parse failed: ",t)}return console.log("Physical Examination error: ",n,e),Object(s.a)(n)}))}{console.log("browser");const e=(new i.h).set("id",n);console.log("params: ",e);const t={params:e,headers:new i.g({Accept:"application/json",Authorization:"Bearer "+this.token})};return console.log("httpOptions",t),this.httpClient.post(this.url+this.getPhysicalExaminationPath,{},t).pipe(Object(a.a)(3e4),Object(r.a)(n=>(console.log(n),n)),Object(c.a)((n,e)=>(console.log(e),console.error(n),Object(s.a)(n))))}}savePhysicalExamination(n){if(this.platform.is("ios")||this.platform.is("android")){console.log("native");const e=this.getExaminationArray(n),t={};t.data=e,console.log("body: ",t);const l={Accept:"application/json",Authorization:"Bearer "+this.token};return this.http.setDataSerializer("json"),Object(o.a)(this.http.post(this.url+this.savePhysicalExaminationPath+"?id="+n.encounter_no,t,l)).pipe(Object(a.a)(3e4),Object(r.a)(n=>{const e=JSON.parse(n.data);return console.log("Physical Examination: ",e),e}),Object(c.a)((n,e)=>{if("string"==typeof n.error)try{n.error=JSON.parse(n.error)}catch(t){console.log("err.error parse failed: ",t)}return console.log("Physical Examination error: ",n,e),Object(s.a)(n)}))}{console.log("browser");const e={data:this.getExaminationArray(n)};console.log("body: ",e);const t=(new i.h).set("id",n.encounter_no);console.log("params: ",t);const l={params:t,headers:new i.g({Accept:"application/json",Authorization:"Bearer "+this.token})};return console.log("httpOptions",l),this.httpClient.post(this.url+this.savePhysicalExaminationPath,e,l).pipe(Object(a.a)(3e4),Object(r.a)(n=>(console.log(n),n)),Object(c.a)((n,e)=>(console.log(e),console.error(n),Object(s.a)(n))))}}getExaminationArray(n){const e={},t=n.findings;return Object.keys(t).forEach(n=>{const l=t[n];e[n]={},l.value.forEach(t=>{let i=null;2===t.id?i=l.others:"others"===t.id&&(i=l.others),e[n][t.id]=i})}),Object.keys(e).forEach(n=>{(2 in e[n]||"2"in e[n])&&delete e[n].others}),console.log("data: ",e),e}}return n.ngInjectableDef=l.bc({factory:function(){return new n(l.cc(u.Nb),l.cc(i.c),l.cc(d.a))},token:n,providedIn:"root"}),n})();var g=t("7wfR"),p=t("7ch9"),b=t("LDXv"),m=t("Pasx"),f=t("H+bZ"),v=t("EFyh");class x{constructor(n={}){Object.assign(this,n)}}var y=t("VM0z");class C{constructor(n,e,t,l,i,o,s,a,r){this.physicalExaminationsApiService=n,this.patientService=e,this.apiService=t,this.loginService=l,this.loadingService=i,this.stringUtilsService=o,this.permissionValidatorService=s,this.menuController=a,this.alertServ=r,this.selectedFindings=[],this.findings=[],this.examinationSave=!0,this.examinationView=!0,this.formErrorMessage="",this.formHasError=!1,this.peAllowEdit=!0,this.pe_modified={modified_by:null,modified_dt:null},this.SAVE_PHYSICAL_EXAMINATION=1,this.selectedEncounterNo=e.getSelectedEncounterNo(),this.physicalExaminationsApiService.setUrl(this.apiService.getUrl()),this.physicalExaminationsApiService.setToken(this.loginService.getAuthentication().token),this.configAndDefaults=new x,this.configAndDefaults.m_patient_examination=l.getConfigAndDefaults().examination["m-patient-examination"],console.log("physical examination",this.configAndDefaults),this.initFindings()}initUserInterfaceByRole(){this.examinationSave=this.permissionValidatorService.hasPhysExamEdit()}initFindings(){this.selectedFindings=[],this.findings=[];const n=JSON.parse(JSON.stringify(this.configAndDefaults.m_patient_examination["default-options"].examination));Object.keys(n).forEach(e=>{console.log("keys: ",e),console.log("examination[key]: ",n[e]);const t=n[e][0].find(n=>"others"===n.id),l=n[e][0].find(n=>2===n.id);this.findings.push({key:e,value:n[e],tabOpen:!1,hasRemarks:t||l,hasOthersLabel:t,others:"",isDisabled:!1})}),console.log("findings: ",this.findings)}onExpandFindings(n){this.findings.forEach((e,t)=>{e.tabOpen=t===n&&!1===e.tabOpen})}ionViewWillEnter(){console.log("ionViewWillEnter");const n=this.patientService.getSelectedEncounterNo();this.selectedEncounterNo!==n&&(console.log("selected patient changed"),this.selectedEncounterNo=n,this.initFindings(),this.initUserInterfaceByRole(),this.getPhysicalExamination()),window.addEventListener("native.keyboardshow",this.keyboardShowHandler),window.addEventListener("native.keyboardhide",this.keyboardHideHandler)}ionViewWillLeave(){console.log("ionViewWillLeave"),window.removeEventListener("native.keyboardshow",this.keyboardShowHandler),window.removeEventListener("native.keyboardhide",this.keyboardHideHandler),this.removeIonAppStyles()}ngOnInit(){this.menuController.swipeGesture(!0,"mainMenu"),this.menuController.swipeGesture(!0,"accountMenu"),this.initUserInterfaceByRole(),this.getPhysicalExamination()}getPhysicalExamination(){return new Promise((n,e)=>{this.loadingService.present(),this.physicalExaminationsApiService.getPhysicalExamination(this.selectedEncounterNo).subscribe(t=>{console.log(t);let l=!1;this.peAllowEdit=!0,this.pe_modified={modified_by:null,modified_dt:null};try{Object.keys(t.examinationData).forEach(n=>{const e=n;let i="";const o=[],s=this.findings.find(e=>e.key===n);if(s){const n=t.examinationData[s.key];Object.keys(n).forEach(e=>{this.findings.forEach(t=>{const a=t.value[0].find(n=>(n.id===Number(e)||n.id===e)&&s.key===t.key);a&&(a.checked=!0,l=!0,2===a.id||"string"==typeof a.id&&"2"===a.id?(t.others=n[e],i=n[e]):"string"==typeof a.id&&"others"===a.id&&"others"===e&&(t.others=n[e],i=n[e]),o.push(a))})})}this.selectedFindings.push({key:e,value:o,others:i})}),console.log("this.selectedFindings: ",this.selectedFindings),this.loadingService.dismiss().then(e=>{this.selectedFindings.forEach(n=>{const e=n.value.find(n=>"essentially normal"===n.text.toLocaleLowerCase());if(e){const t=[];t.push(e),n.value=t;const l=this.findings.find(e=>e.key===n.key);console.log("essentiallyNormal ",l,e),l.value[0].forEach(n=>{"essentially normal"!==n.text.toLocaleLowerCase()&&(n.checked=!1,n.disabled=!0)}),l.disabledOthers=!0,l.others="",n.others=""}const t=n.value.find(n=>1===n.id);if(t){const e=[];e.push(t),n.value=e,console.log("awakeAndAlert ",t);const l=this.findings.find(e=>e.key===n.key);l.value[0].forEach(n=>{1!==n.id&&(n.checked=!1)}),l.others="",l.disabledOthers=!0,n.others=""}}),console.log("this.selectedFindings after loading: ",this.selectedFindings),l&&(this.peAllowEdit=!1,this.pe_modified.modified_by=t.modified_by,this.pe_modified.modified_dt=t.modified_dt),n(t.examinationData)})}catch(i){this.alertServ.openAlertModal("fail","Failed","Cannot parse Physical Examination values!","Ok"),e(i)}},n=>{console.log("err ",n),this.loadingService.dismiss().then(t=>{const l=this.stringUtilsService.parseErrorMessage(n);this.alertServ.openAlertModal("fail","Failed",l,"Ok"),e(n)})})})}onFindingCheckSelect(n,e){console.log("j: ",n,"i:",e);const t=this.findings[n];console.log("finding: ",t);const l=this.selectedFindings.find(n=>n.key===t.key);console.log("selectedFinding: ",l);const i=l.value.findIndex(n=>n.text===t.value[0][e].text&&n.id===t.value[0][e].id);console.log("index",i),i<0?l.value.push(t.value[0][e]):("essentially normal"===t.value[0][e].text.toLocaleLowerCase()?(t.disabledOthers=!1,t.value[0].forEach(n=>{n.disabled=!1})):1===t.value[0][e].id&&(t.disabledOthers=!1),l.value.splice(i,1));const o=l.value.find(n=>"string"==typeof n.text&&"essentially normal"===n.text.toLocaleLowerCase());if(o){console.log("essentiallyNormal ",o),t.value[0].forEach(n=>{"essentially normal"!==n.text.toLocaleLowerCase()&&(n.checked=!1,n.disabled=!0)}),t.disabledOthers=!0,t.others="",l.others="";const n=[];n.push(o),l.value=n}const s=l.value.find(n=>1===n.id&&n.text===t.value[0][e].text);if(s){console.log("awakeAndAlert ",s),t.value[0].forEach(n=>{1!==n.id&&(n.checked=!1)});const n=[];n.push(s),t.others="",t.disabledOthers=!0,l.value=n,l.others=""}const a=l.value.find(n=>2===n.id&&n.text===t.value[0][e].text);if(a){console.log("alteredSensorium ",a),t.value[0].forEach(n=>{2!==n.id&&(n.checked=!1)});const n=[];n.push(a),t.disabledOthers=!1,l.others=t.others,l.value=n}console.log("this.selectedFindings: ",this.selectedFindings)}onOthersChange(n){const e=this.findings[n];console.log("finding: ",e);const t=this.selectedFindings.find(n=>n.key===e.key),l=t.value.findIndex(n=>"others"===n.id);console.log("othersIndex: ",l),l<0&&e.others?t.value.push({id:"others",text:"Others"}):l>=0&&!e.others&&t.value.splice(l,1),t.others=e.others,console.log("selectedFinding: ",t),console.log("this.selectedFindings: ",this.selectedFindings)}onSaveFindings(n){console.log("selectedFindings: ",this.selectedFindings);let e,t=!1;this.selectedFindings.forEach(n=>{if(console.log("value: ",n.value),"General Survey"===n.key){const l=n.value.find(n=>2===n.id);if(l&&""===n.others)return t=!0,void(e="Altered Sensorium remarks is required!");if(l&&n.others.length>2e3)return t=!0,void(e="Remarks on "+n.key+" reached its maximum character limit.")}else n.others.length>200&&(t=!0,e="Remarks on "+n.key+" reached its maximum character limit.");0===n.value.length&&(t=!0,e="Please select atleast 1 on "+n.key)}),t?this.alertServ.openAlertModal("fail","Failed",e,"Ok"):(console.log("this.selectedFindings",this.selectedFindings),this.openPromptModal(this.SAVE_PHYSICAL_EXAMINATION,{examinationFinding:n},"Physical Examination","Would you like to save your changes?"))}onSaveFindingsFunction(n){console.log("findings: ",this.findings);const e={encounter_no:this.selectedEncounterNo,findings:{}},t={};this.selectedFindings.forEach(n=>{t[n.key]={value:n.value,others:n.others}}),e.findings=t,console.log("examination: ",e),this.physicalExaminationsApiService.getExaminationArray(e),this.loadingService.present(),this.physicalExaminationsApiService.savePhysicalExamination(e).subscribe(n=>{console.log("result"),this.loadingService.dismiss().then(e=>{n&&200===n.code?(this.pe_modified.modified_by=n.modified_by,this.pe_modified.modified_dt=n.modified_dt,this.peAllowEdit=!1,this.alertServ.openAlertModal("success","Success",n.message)):(console.log("failed"),this.alertServ.openAlertModal("fail","Failed",n.message,"Ok"))})},n=>{console.log("err ",n),this.loadingService.dismiss().then(e=>{const t=this.stringUtilsService.parseErrorMessage(n);this.alertServ.openAlertModal("fail","Failed",t,"Ok")})})}doRefreshPhysicalExamination(n){this.initFindings(),this.getPhysicalExamination().then(e=>{n.target.complete()}).catch(e=>{n.target.complete()})}openPromptModal(n,e,t,l,i="Save",o="Cancel"){this.alertServ.openPromptModal(t,l,i,t=>{null!==t&&(console.log("result.data: ",t.data),t.data&&"Save"===t.data.button&&n===this.SAVE_PHYSICAL_EXAMINATION&&this.onSaveFindingsFunction(e.examinationFinding))})}tapCoordinates(n){this.y=n.touches[0].clientY,this.h=window.innerHeight,this.offsetY=this.h-this.y,console.log("offset: ",this.offsetY)}keyboardShowHandler(n){const e=n.keyboardHeight;console.log("show: ",n.keyboardHeight);const t=document.querySelector("ion-app").style;t.bottom=e+"px",console.log(t.bottom)}keyboardHideHandler(){console.log("gone"),document.querySelector("ion-app").removeAttribute("style")}removeIonAppStyles(){document.querySelector("ion-app").removeAttribute("style")}}class P{}var O=t("pMnS"),E=t("Jt+7"),w=t("oBZk"),S=t("s7LF"),k=t("SVse"),F=t("ChBM"),M=t("RRim"),_=t("iInd"),A=t("gly3"),D=t("Fzct"),N=t("9B/o"),j=t("h7h0"),I=t("dz+s"),T=l.Bb({encapsulation:0,styles:[["ion-refresher[_ngcontent-%COMP%]{z-index:1}ion-refresher-content[_ngcontent-%COMP%]{background-color:transparent}ion-content[_ngcontent-%COMP%]{background:#f9f9f9;--ion-background-color:#f9f9f9}ion-content[_ngcontent-%COMP%]   .wrapper[_ngcontent-%COMP%]{padding:10px;width:100%;height:100%;margin:20px auto}ion-content[_ngcontent-%COMP%]   .wrapper[_ngcontent-%COMP%]   .physicalExamSection[_ngcontent-%COMP%]{margin-bottom:15px;margin-left:15px;margin-right:15px;--ion-background-color:white;background:#fff;padding-bottom:1px}ion-content[_ngcontent-%COMP%]   .wrapper[_ngcontent-%COMP%]   .physicalExamSection[_ngcontent-%COMP%]   .findingsCheckBoxGroup[_ngcontent-%COMP%]{display:-webkit-box;display:flex}ion-content[_ngcontent-%COMP%]   .wrapper[_ngcontent-%COMP%]   .physicalExamSection[_ngcontent-%COMP%]   .findingsCheckBoxGroup[_ngcontent-%COMP%]   ion-checkbox[_ngcontent-%COMP%]{margin:0}ion-content[_ngcontent-%COMP%]   .wrapper[_ngcontent-%COMP%]   .physicalExamSection[_ngcontent-%COMP%]   .findingsOthersGroup[_ngcontent-%COMP%]   .mediumTextArea[_ngcontent-%COMP%]{--background:rgb(235, 235, 235);width:calc(100% - 30px);border:none;margin:15px 15px 20px;padding:10px;background:#ebebeb;border-radius:10px}ion-content[_ngcontent-%COMP%]   .wrapper[_ngcontent-%COMP%]   .physicalExamSection[_ngcontent-%COMP%]   .normalTextInput[_ngcontent-%COMP%]{height:48px;width:100%;border:none;margin-top:10px;padding-left:10px;padding-right:10px}ion-content[_ngcontent-%COMP%]   .wrapper[_ngcontent-%COMP%]   .physicalExamSection[_ngcontent-%COMP%]   .mediumTextArea[_ngcontent-%COMP%]{width:calc(100% - 30px);border:none;margin:15px 15px 20px;padding:10px;background:#ebebeb;border-radius:10px}ion-content[_ngcontent-%COMP%]   .wrapper[_ngcontent-%COMP%]   .physicalExamSection[_ngcontent-%COMP%]   .mediumTextArea[_ngcontent-%COMP%]::-webkit-input-placeholder{color:#c8c8c8;font-style:italic}ion-content[_ngcontent-%COMP%]   .wrapper[_ngcontent-%COMP%]   .physicalExamSection[_ngcontent-%COMP%]   .mediumTextArea[_ngcontent-%COMP%]::-moz-placeholder{color:#c8c8c8;font-style:italic}ion-content[_ngcontent-%COMP%]   .wrapper[_ngcontent-%COMP%]   .physicalExamSection[_ngcontent-%COMP%]   .mediumTextArea[_ngcontent-%COMP%]::-ms-input-placeholder{color:#c8c8c8;font-style:italic}ion-content[_ngcontent-%COMP%]   .wrapper[_ngcontent-%COMP%]   .physicalExamSection[_ngcontent-%COMP%]   .mediumTextArea[_ngcontent-%COMP%]::placeholder{color:#c8c8c8;font-style:italic}ion-content[_ngcontent-%COMP%]   .wrapper[_ngcontent-%COMP%]   .physicalExamSection[_ngcontent-%COMP%]   .textLabel[_ngcontent-%COMP%]{margin-left:20px}ion-content[_ngcontent-%COMP%]   .wrapper[_ngcontent-%COMP%]   .physicalExamSection[_ngcontent-%COMP%]   .textSubLabel[_ngcontent-%COMP%]{color:#949494;font-size:x-small}ion-content[_ngcontent-%COMP%]   .wrapper[_ngcontent-%COMP%]   .physicalExamSection[_ngcontent-%COMP%]   .redLabel[_ngcontent-%COMP%]{margin-top:10px;margin-bottom:10px}ion-content[_ngcontent-%COMP%]   .wrapper[_ngcontent-%COMP%]   .ion-padding[_ngcontent-%COMP%]   ion-button[_ngcontent-%COMP%]{height:48px}"]],data:{}});function L(n){return l.Yb(0,[(n()(),l.Db(0,0,null,null,1,"div",[["class","testServer"]],null,null,null,null,null)),(n()(),l.Wb(-1,null,[" TEST SERVER CONNECTED "]))],null,null)}function G(n){return l.Yb(0,[(n()(),l.Db(0,0,null,null,1,"ion-icon",[["name","arrow-forward"],["slot","end"]],null,null,null,w.ub,w.s)),l.Cb(1,49152,null,0,u.D,[l.j,l.p,l.G],{name:[0,"name"]},null)],(function(n,e){n(e,1,0,"arrow-forward")}),null)}function Y(n){return l.Yb(0,[(n()(),l.Db(0,0,null,null,1,"ion-icon",[["name","arrow-down"],["slot","end"]],null,null,null,w.ub,w.s)),l.Cb(1,49152,null,0,u.D,[l.j,l.p,l.G],{name:[0,"name"]},null)],(function(n,e){n(e,1,0,"arrow-down")}),null)}function U(n){return l.Yb(0,[(n()(),l.Db(0,0,null,null,13,"ion-item",[["lines","none"]],[[8,"hidden",0]],null,null,w.Db,w.w)),l.Cb(1,49152,null,0,u.I,[l.j,l.p,l.G],{lines:[0,"lines"]},null),(n()(),l.Db(2,0,null,0,11,"div",[["class","findingsCheckBoxGroup"]],null,null,null,null,null)),(n()(),l.Db(3,0,null,null,7,"ion-checkbox",[["color","medium"],["slot","start"]],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"ngModelChange"],[null,"click"],[null,"ionBlur"],[null,"ionChange"]],(function(n,e,t){var i=!0,o=n.component;return"ionBlur"===e&&(i=!1!==l.Pb(n,4)._handleBlurEvent(t.target)&&i),"ionChange"===e&&(i=!1!==l.Pb(n,4)._handleIonChange(t.target)&&i),"ngModelChange"===e&&(i=!1!==(n.context.$implicit.checked=t)&&i),"click"===e&&(i=!1!==o.onFindingCheckSelect(n.parent.context.index,n.context.index)&&i),i}),w.jb,w.h)),l.Cb(4,16384,null,0,u.c,[l.p],null,null),l.Tb(1024,null,S.l,(function(n){return[n]}),[u.c]),l.Cb(6,671744,null,0,S.q,[[2,S.b],[8,null],[8,null],[6,S.l]],{isDisabled:[0,"isDisabled"],model:[1,"model"],options:[2,"options"]},{update:"ngModelChange"}),l.Rb(7,{standalone:0}),l.Tb(2048,null,S.m,null,[S.q]),l.Cb(9,16384,null,0,S.n,[[4,S.m]],null,null),l.Cb(10,49152,null,0,u.s,[l.j,l.p,l.G],{color:[0,"color"],disabled:[1,"disabled"]},null),(n()(),l.Db(11,0,null,null,2,"ion-label",[["class","textLabel"]],null,null,null,w.Eb,w.C)),l.Cb(12,49152,null,0,u.O,[l.j,l.p,l.G],{color:[0,"color"]},null),(n()(),l.Wb(13,0,["",""]))],(function(n,e){var t=e.component;n(e,1,0,"none");var l=e.context.$implicit.disabled||!t.examinationSave||!t.peAllowEdit,i=e.context.$implicit.checked,o=n(e,7,0,!0);n(e,6,0,l,i,o),n(e,10,0,"medium",e.context.$implicit.disabled||!t.examinationSave||!t.peAllowEdit),n(e,12,0,t.selectedFindings[e.parent.context.index]&&(t.selectedFindings[e.parent.context.index].value.length<=0||0==e.parent.context.index&&t.selectedFindings[e.parent.context.index].value.length>0&&2==t.selectedFindings[e.parent.context.index].value[0].id&&t.selectedFindings[e.parent.context.index].others.length<=0)?"danger":"dark")}),(function(n,e){n(e,0,0,"others"===e.context.$implicit.id),n(e,3,0,l.Pb(e,9).ngClassUntouched,l.Pb(e,9).ngClassTouched,l.Pb(e,9).ngClassPristine,l.Pb(e,9).ngClassDirty,l.Pb(e,9).ngClassValid,l.Pb(e,9).ngClassInvalid,l.Pb(e,9).ngClassPending),n(e,13,0,e.context.$implicit.text)}))}function H(n){return l.Yb(0,[(n()(),l.Db(0,0,null,null,2,"ion-label",[["class","textLabel"]],null,null,null,w.Eb,w.C)),l.Cb(1,49152,null,0,u.O,[l.j,l.p,l.G],null,null),(n()(),l.Wb(-1,0,["Others"]))],null,null)}function R(n){return l.Yb(0,[(n()(),l.Db(0,0,null,null,10,"div",[["class","findingsOthersGroup"]],null,null,null,null,null)),(n()(),l.sb(16777216,null,null,1,null,H)),l.Cb(2,16384,null,0,k.l,[l.Y,l.U],{ngIf:[0,"ngIf"]},null),(n()(),l.Db(3,0,null,null,7,"ion-textarea",[["class","mediumTextArea"],["debounce","750"],["placeholder","Enter your text here . . ."],["rows","5"]],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"ionChange"],[null,"ngModelChange"],[null,"ionBlur"]],(function(n,e,t){var i=!0,o=n.component;return"ionBlur"===e&&(i=!1!==l.Pb(n,4)._handleBlurEvent(t.target)&&i),"ionChange"===e&&(i=!1!==l.Pb(n,4)._handleInputEvent(t.target)&&i),"ionChange"===e&&(i=!1!==o.onOthersChange(n.parent.context.index)&&i),"ngModelChange"===e&&(i=!1!==(n.parent.context.$implicit.others=t)&&i),i}),w.Zb,w.X)),l.Cb(4,16384,null,0,u.Sb,[l.p],null,null),l.Tb(1024,null,S.l,(function(n){return[n]}),[u.Sb]),l.Cb(6,671744,null,0,S.q,[[2,S.b],[8,null],[8,null],[6,S.l]],{isDisabled:[0,"isDisabled"],model:[1,"model"],options:[2,"options"]},{update:"ngModelChange"}),l.Rb(7,{standalone:0}),l.Tb(2048,null,S.m,null,[S.q]),l.Cb(9,16384,null,0,S.n,[[4,S.m]],null,null),l.Cb(10,49152,null,0,u.zb,[l.j,l.p,l.G],{debounce:[0,"debounce"],disabled:[1,"disabled"],placeholder:[2,"placeholder"],rows:[3,"rows"]},null)],(function(n,e){var t=e.component;n(e,2,0,e.parent.context.$implicit.hasOthersLabel);var l=e.parent.context.$implicit.disabledOthers||!t.examinationSave||!t.peAllowEdit,i=e.parent.context.$implicit.others,o=n(e,7,0,!0);n(e,6,0,l,i,o),n(e,10,0,"750",e.parent.context.$implicit.disabledOthers||!t.examinationSave||!t.peAllowEdit,"Enter your text here . . .","5")}),(function(n,e){n(e,3,0,l.Pb(e,9).ngClassUntouched,l.Pb(e,9).ngClassTouched,l.Pb(e,9).ngClassPristine,l.Pb(e,9).ngClassDirty,l.Pb(e,9).ngClassValid,l.Pb(e,9).ngClassInvalid,l.Pb(e,9).ngClassPending)}))}function B(n){return l.Yb(0,[(n()(),l.Db(0,0,null,null,16,"div",[["class","physicalExamSection"]],null,null,null,null,null)),(n()(),l.Db(1,0,null,null,8,"ion-item",[["button",""],["detail","false"],["lines","none"]],null,[[null,"click"]],(function(n,e,t){var l=!0;return"click"===e&&(l=!1!==n.component.onExpandFindings(n.context.index)&&l),l}),w.Db,w.w)),l.Cb(2,49152,null,0,u.I,[l.j,l.p,l.G],{button:[0,"button"],detail:[1,"detail"],lines:[2,"lines"]},null),(n()(),l.sb(16777216,null,0,1,null,G)),l.Cb(4,16384,null,0,k.l,[l.Y,l.U],{ngIf:[0,"ngIf"]},null),(n()(),l.sb(16777216,null,0,1,null,Y)),l.Cb(6,16384,null,0,k.l,[l.Y,l.U],{ngIf:[0,"ngIf"]},null),(n()(),l.Db(7,0,null,0,2,"ion-label",[["class","redLabel"]],null,null,null,w.Eb,w.C)),l.Cb(8,49152,null,0,u.O,[l.j,l.p,l.G],{color:[0,"color"]},null),(n()(),l.Wb(9,0,["",""])),(n()(),l.Db(10,0,null,null,6,"div",[],[[8,"hidden",0]],null,null,null,null)),(n()(),l.Db(11,0,null,null,3,"ion-list",[["style","margin: 0px !important"]],null,null,null,w.Gb,w.D)),l.Cb(12,49152,null,0,u.P,[l.j,l.p,l.G],null,null),(n()(),l.sb(16777216,null,0,1,null,U)),l.Cb(14,278528,null,0,k.k,[l.Y,l.U,l.y],{ngForOf:[0,"ngForOf"]},null),(n()(),l.sb(16777216,null,null,1,null,R)),l.Cb(16,16384,null,0,k.l,[l.Y,l.U],{ngIf:[0,"ngIf"]},null)],(function(n,e){var t=e.component;n(e,2,0,"","false","none"),n(e,4,0,!e.context.$implicit.tabOpen),n(e,6,0,e.context.$implicit.tabOpen),n(e,8,0,t.selectedFindings[e.context.index]&&(t.selectedFindings[e.context.index].value.length<=0||0==e.context.index&&t.selectedFindings[e.context.index].value.length>0&&2==t.selectedFindings[e.context.index].value[0].id&&t.selectedFindings[e.context.index].others.length<=0)?"danger":"dark"),n(e,14,0,e.context.$implicit.value[0]),n(e,16,0,e.context.$implicit.hasRemarks)}),(function(n,e){n(e,9,0,e.context.$implicit.key),n(e,10,0,!e.context.$implicit.tabOpen)}))}function J(n){return l.Yb(0,[(n()(),l.Db(0,0,null,null,1,"p",[["class","warning-message"]],null,null,null,null,null)),(n()(),l.Wb(1,null,["",""]))],null,(function(n,e){n(e,1,0,e.component.formErrorMessage)}))}function V(n){return l.Yb(0,[(n()(),l.Db(0,0,null,null,1,"p",[["class","warning-message"]],null,null,null,null,null)),(n()(),l.Wb(-1,null,["Some data are missing."]))],null,null)}function z(n){return l.Yb(0,[(n()(),l.Db(0,0,null,null,1,"app-headerbar",[["title","Physical Examinations"]],null,null,null,F.b,F.a)),l.Cb(1,114688,null,0,M.a,[_.m,A.a,g.a,v.a,f.a,D.a,p.a,m.a,u.Nb,N.a,u.Jb,u.a],{titleToUse:[0,"titleToUse"]},null),(n()(),l.Db(2,0,null,null,39,"ion-content",[],null,null,null,w.mb,w.k)),l.Cb(3,49152,null,0,u.v,[l.j,l.p,l.G],null,null),(n()(),l.Db(4,0,null,0,3,"ion-refresher",[["pullFactor","0.5"],["pullMax","200"],["pullMin","100"],["slot","fixed"]],null,[[null,"ionRefresh"]],(function(n,e,t){var l=!0;return"ionRefresh"===e&&(l=!1!==n.component.doRefreshPhysicalExamination(t)&&l),l}),w.Nb,w.K)),l.Cb(5,49152,null,0,u.eb,[l.j,l.p,l.G],{pullFactor:[0,"pullFactor"],pullMax:[1,"pullMax"],pullMin:[2,"pullMin"]},null),(n()(),l.Db(6,0,null,0,1,"ion-refresher-content",[],null,null,null,w.Mb,w.L)),l.Cb(7,49152,null,0,u.fb,[l.j,l.p,l.G],null,null),(n()(),l.sb(16777216,null,0,1,null,L)),l.Cb(9,16384,null,0,k.l,[l.Y,l.U],{ngIf:[0,"ngIf"]},null),(n()(),l.Db(10,0,null,0,31,"div",[["class","wrapper"],["style","margin-top:0px"]],null,null,null,null,null)),(n()(),l.Db(11,0,null,null,8,"ion-list",[],null,null,null,w.Gb,w.D)),l.Cb(12,49152,null,0,u.P,[l.j,l.p,l.G],null,null),(n()(),l.Db(13,0,null,0,6,"ion-list-header",[["class","underlined-header"]],null,null,null,w.Fb,w.E)),l.Cb(14,49152,null,0,u.Q,[l.j,l.p,l.G],null,null),(n()(),l.Db(15,0,null,0,4,"ion-label",[],null,null,null,w.Eb,w.C)),l.Cb(16,49152,null,0,u.O,[l.j,l.p,l.G],null,null),(n()(),l.Wb(-1,0,["Physical Examination List: "])),(n()(),l.Db(18,0,null,0,1,"app-modified-b-toast",[],null,null,null,j.b,j.a)),l.Cb(19,114688,null,0,I.a,[u.Tb],{modifiedBy:[0,"modifiedBy"],modifiedDate:[1,"modifiedDate"]},null),(n()(),l.Db(20,0,null,null,21,"form",[["novalidate",""]],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"ngSubmit"],[null,"submit"],[null,"reset"]],(function(n,e,t){var i=!0,o=n.component;return"submit"===e&&(i=!1!==l.Pb(n,22).onSubmit(t)&&i),"reset"===e&&(i=!1!==l.Pb(n,22).onReset()&&i),"ngSubmit"===e&&(i=!1!==o.onSaveFindings(l.Pb(n,22))&&i),i}),null,null)),l.Cb(21,16384,null,0,S.y,[],null,null),l.Cb(22,4210688,[["examinationFinding",4]],0,S.p,[[8,null],[8,null]],null,{ngSubmit:"ngSubmit"}),l.Tb(2048,null,S.b,null,[S.p]),l.Cb(24,16384,null,0,S.o,[[4,S.b]],null,null),(n()(),l.sb(16777216,null,null,1,null,B)),l.Cb(26,278528,null,0,k.k,[l.Y,l.U,l.y],{ngForOf:[0,"ngForOf"]},null),(n()(),l.Db(27,0,null,null,14,"div",[["class","ion-padding"]],null,null,null,null,null)),(n()(),l.sb(16777216,null,null,1,null,J)),l.Cb(29,16384,null,0,k.l,[l.Y,l.U],{ngIf:[0,"ngIf"]},null),(n()(),l.sb(16777216,null,null,1,null,V)),l.Cb(31,16384,null,0,k.l,[l.Y,l.U],{ngIf:[0,"ngIf"]},null),(n()(),l.Db(32,0,null,null,4,"ion-button",[["expand","block"],["type","submit"]],[[8,"hidden",0]],null,null,w.fb,w.d)),l.Cb(33,49152,null,0,u.l,[l.j,l.p,l.G],{disabled:[0,"disabled"],expand:[1,"expand"],type:[2,"type"]},null),(n()(),l.Db(34,0,null,0,1,"ion-icon",[["name","paper-plane"]],null,null,null,w.ub,w.s)),l.Cb(35,49152,null,0,u.D,[l.j,l.p,l.G],{name:[0,"name"]},null),(n()(),l.Wb(-1,0,[" Save"])),(n()(),l.Db(37,0,null,null,4,"ion-button",[["expand","block"],["type","button"]],[[8,"hidden",0]],[[null,"click"]],(function(n,e,t){var l=!0,i=n.component;return"click"===e&&(l=0!=(i.peAllowEdit=!i.peAllowEdit)&&l),l}),w.fb,w.d)),l.Cb(38,49152,null,0,u.l,[l.j,l.p,l.G],{disabled:[0,"disabled"],expand:[1,"expand"],type:[2,"type"]},null),(n()(),l.Db(39,0,null,0,1,"ion-icon",[["name","create"]],null,null,null,w.ub,w.s)),l.Cb(40,49152,null,0,u.D,[l.j,l.p,l.G],{name:[0,"name"]},null),(n()(),l.Wb(-1,0,[" Edit"]))],(function(n,e){var t=e.component;n(e,1,0,"Physical Examinations"),n(e,5,0,"0.5","200","100"),n(e,9,0,t.loginService.inTestServer),n(e,19,0,t.pe_modified.modified_by,t.pe_modified.modified_dt),n(e,26,0,t.findings),n(e,29,0,t.formHasError),n(e,31,0,t.formHasError||t.selectedFindings[0]&&(t.selectedFindings[0].value.length<=0||t.selectedFindings[0].value.length>0&&2==t.selectedFindings[0].value[0].id&&t.selectedFindings[0].others.length<=0)||t.selectedFindings[1]&&t.selectedFindings[1].value.length<=0||t.selectedFindings[2]&&t.selectedFindings[2].value.length<=0||t.selectedFindings[3]&&t.selectedFindings[3].value.length<=0||t.selectedFindings[4]&&t.selectedFindings[4].value.length<=0||t.selectedFindings[5]&&t.selectedFindings[5].value.length<=0||t.selectedFindings[6]&&t.selectedFindings[6].value.length<=0||t.selectedFindings[7]&&t.selectedFindings[7].value.length<=0||t.selectedFindings[8]&&t.selectedFindings[8].value.length<=0),n(e,33,0,!t.examinationSave||!t.peAllowEdit||t.formHasError||t.selectedFindings[0]&&(t.selectedFindings[0].value.length<=0||t.selectedFindings[0].value.length>0&&2==t.selectedFindings[0].value[0].id&&t.selectedFindings[0].others.length<=0)||t.selectedFindings[1]&&t.selectedFindings[1].value.length<=0||t.selectedFindings[2]&&t.selectedFindings[2].value.length<=0||t.selectedFindings[3]&&t.selectedFindings[3].value.length<=0||t.selectedFindings[4]&&t.selectedFindings[4].value.length<=0||t.selectedFindings[5]&&t.selectedFindings[5].value.length<=0||t.selectedFindings[6]&&t.selectedFindings[6].value.length<=0||t.selectedFindings[7]&&t.selectedFindings[7].value.length<=0||t.selectedFindings[8]&&t.selectedFindings[8].value.length<=0,"block","submit"),n(e,35,0,"paper-plane"),n(e,38,0,!t.examinationSave,"block","button"),n(e,40,0,"create")}),(function(n,e){var t=e.component;n(e,20,0,l.Pb(e,24).ngClassUntouched,l.Pb(e,24).ngClassTouched,l.Pb(e,24).ngClassPristine,l.Pb(e,24).ngClassDirty,l.Pb(e,24).ngClassValid,l.Pb(e,24).ngClassInvalid,l.Pb(e,24).ngClassPending),n(e,32,0,!t.peAllowEdit),n(e,37,0,t.peAllowEdit)}))}function W(n){return l.Yb(0,[(n()(),l.Db(0,0,null,null,1,"app-physical-examinations",[],null,null,null,z,T)),l.Cb(1,114688,null,0,C,[h,g.a,f.a,v.a,p.a,m.a,b.a,u.Ib,y.a],null,null)],(function(n,e){n(e,1,0)}),null)}var $=l.zb("app-physical-examinations",C,W,{},{},[]),q=t("gRf5"),Z=t("wMzM"),X=t("t8sF"),K=t("/nUa"),Q=t("j1ZV");t.d(e,"PhysicalExaminationsPageModuleNgFactory",(function(){return nn}));var nn=l.Ab(P,[],(function(n){return l.Mb([l.Nb(512,l.m,l.lb,[[8,[O.a,E.a,$]],[3,l.m],l.E]),l.Nb(4608,k.n,k.m,[l.A,[2,k.C]]),l.Nb(4608,S.w,S.w,[]),l.Nb(4608,u.b,u.b,[l.G,l.g]),l.Nb(4608,u.Jb,u.Jb,[u.b,l.m,l.w]),l.Nb(4608,u.Ob,u.Ob,[u.b,l.m,l.w]),l.Nb(4608,i.j,i.p,[k.d,l.J,i.n]),l.Nb(4608,i.q,i.q,[i.j,i.o]),l.Nb(5120,i.a,(function(n){return[n]}),[i.q]),l.Nb(4608,i.m,i.m,[]),l.Nb(6144,i.k,null,[i.m]),l.Nb(4608,i.i,i.i,[i.k]),l.Nb(6144,i.b,null,[i.i]),l.Nb(4608,i.f,i.l,[i.b,l.w]),l.Nb(4608,i.c,i.c,[i.f]),l.Nb(4608,q.a,q.a,[]),l.Nb(4608,Z.a,Z.a,[]),l.Nb(4608,X.a,X.a,[]),l.Nb(4608,D.a,D.a,[Z.a,q.a,X.a,K.a,p.a]),l.Nb(4608,S.d,S.d,[]),l.Nb(1073742336,k.c,k.c,[]),l.Nb(1073742336,S.v,S.v,[]),l.Nb(1073742336,S.i,S.i,[]),l.Nb(1073742336,u.Fb,u.Fb,[]),l.Nb(1073742336,_.q,_.q,[[2,_.v],[2,_.m]]),l.Nb(1073742336,i.e,i.e,[]),l.Nb(1073742336,i.d,i.d,[]),l.Nb(1073742336,Q.a,Q.a,[]),l.Nb(1073742336,S.s,S.s,[]),l.Nb(1073742336,P,P,[]),l.Nb(256,i.n,"XSRF-TOKEN",[]),l.Nb(256,i.o,"X-XSRF-TOKEN",[]),l.Nb(1024,_.k,(function(){return[[{path:"",component:C}]]}),[])])}))},VM0z:function(n,e,t){"use strict";t.d(e,"a",(function(){return a}));var l=t("mrSG"),i=t("ZZ/e"),o=t("Hfim"),s=t("8Y7J");let a=(()=>{class n{constructor(n,e,t){this.toastCtrl=n,this.modalController=e,this.alertController=t}alertToast(n){return l.b(this,void 0,void 0,(function*(){console.log("AlertToast Message:",n),(yield this.toastCtrl.create({message:n,duration:8e3})).present()}))}openAlertModalValidation(n,e,t,i,s="Done",a=(n=>{})){return l.b(this,void 0,void 0,(function*(){const l=yield this.modalController.create({component:o.a,cssClass:"my-custom-modal-array-css",componentProps:{alert:n,title:e,message:t,messageArray:i,ok:s}});return l.onDidDismiss().then(n=>{a(n)}),yield l.present()}))}openPromptModal(n,e,t="Save",i=(n=>{}),s="Cancel",a=(n=>{})){return l.b(this,void 0,void 0,(function*(){const l=yield this.modalController.create({component:o.a,cssClass:"my-custom-modal-css",componentProps:{prompt,title:n,message:e,cancel:s,ok:t}});return l.onDidDismiss().then(n=>{i(n),a(n)}),yield l.present()}))}openAlertModal(n,e,t,i="Done",s=(n=>{})){return l.b(this,void 0,void 0,(function*(){const l=yield this.modalController.create({component:o.a,cssClass:"my-custom-modal-css",componentProps:{alert:n,title:e,message:t,ok:i}});return l.onDidDismiss().then(n=>{s(n)}),yield l.present()}))}prompNAlert(n="",e="",t="",i=[],o=[],s=!0,a=!0){return l.b(this,void 0,void 0,(function*(){this.nativeAlert=this.alertController.create({header:n,subHeader:e,message:t,backdropDismiss:s,keyboardClose:a,inputs:i,buttons:o}).then(n=>{this.nativeAlert.present()})}))}prompInputNAlert(n="",e="",t="",i=!0,o=!0,s=[],a=[],r=(()=>{}),c=(()=>{})){return l.b(this,void 0,void 0,(function*(){0==a.length&&(a=[{text:"OK",handler:n=>{r()}},{text:"Cancel",handler:n=>{c()}}]),this.nativeAlert=this.alertController.create({header:"",subHeader:"",backdropDismiss:i,keyboardClose:o,message:"",inputs:s,buttons:a}).then(n=>{this.nativeAlert.present()})}))}}return n.ngInjectableDef=s.bc({factory:function(){return new n(s.cc(i.Tb),s.cc(i.Jb),s.cc(i.a))},token:n,providedIn:"root"}),n})()},tS1D:function(n,e,t){"use strict";var l=t("D0XW");const i=(()=>{function n(){return Error.call(this),this.message="Timeout has occurred",this.name="TimeoutError",this}return n.prototype=Object.create(Error.prototype),n})();var o=t("l7GE"),s=t("ZUHj");class a{constructor(n,e,t,l){this.waitFor=n,this.absoluteTimeout=e,this.withObservable=t,this.scheduler=l}call(n,e){return e.subscribe(new r(n,this.absoluteTimeout,this.waitFor,this.withObservable,this.scheduler))}}class r extends o.a{constructor(n,e,t,l,i){super(n),this.absoluteTimeout=e,this.waitFor=t,this.withObservable=l,this.scheduler=i,this.action=null,this.scheduleTimeout()}static dispatchTimeout(n){const{withObservable:e}=n;n._unsubscribeAndRecycle(),n.add(Object(s.a)(n,e))}scheduleTimeout(){const{action:n}=this;n?this.action=n.schedule(this,this.waitFor):this.add(this.action=this.scheduler.schedule(r.dispatchTimeout,this.waitFor,this))}_next(n){this.absoluteTimeout||this.scheduleTimeout(),super._next(n)}_unsubscribe(){this.action=null,this.scheduler=null,this.withObservable=null}}var c=t("z6cu");function u(n,e=l.a){return function(n,e,t=l.a){return l=>{let i=function(n){return n instanceof Date&&!isNaN(+n)}(n),o=i?+n-t.now():Math.abs(n);return l.lift(new a(o,i,e,t))}}(n,Object(c.a)(new i),e)}t.d(e,"a",(function(){return u}))},z6cu:function(n,e,t){"use strict";t.d(e,"a",(function(){return i}));var l=t("HDdC");function i(n,e){return new l.a(e?t=>e.schedule(o,0,{error:n,subscriber:t}):e=>e.error(n))}function o({error:n,subscriber:e}){e.error(n)}}}]);