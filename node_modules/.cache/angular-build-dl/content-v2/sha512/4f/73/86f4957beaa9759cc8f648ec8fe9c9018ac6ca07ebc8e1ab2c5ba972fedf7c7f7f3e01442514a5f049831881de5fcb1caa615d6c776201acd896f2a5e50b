(window.webpackJsonp=window.webpackJsonp||[]).push([[1],{"7wfR":function(t,e,n){"use strict";n.d(e,"a",(function(){return o}));var i=n("8Y7J");let o=(()=>{class t{constructor(){}getSelectedEncounterNo(){return this.selectedEncounterNo}setSelectedEncounterNo(t){this.selectedEncounterNo=t}getTempEncounterNo(){return this.tempEncounterNo}setTempEncounterNo(t){this.tempEncounterNo=t}getSelectedPatientBriefInformation(){return this.selectedPatientInformation}setSelectedPatientBriefInformation(t){this.selectedPatientInformation=t}getPatientList(){return this.patients}setPatientList(t){this.patients=t}getMyPatientList(){return this.myPatients}setMyPatientList(t){this.myPatients=t}getNursePatientList(){return this.nursePatients}setNursePatientList(t){this.nursePatients=t}getType(){return this.type}setType(t){this.type=t}getWard(){return this.ward}setWard(t){this.ward=t}getSearchKeyword(){return this.searchKeyword}setSearchKeyword(t){this.searchKeyword=t}}return t.ngInjectableDef=i.bc({factory:function(){return new t},token:t,providedIn:"root"}),t})()},ChBM:function(t,e,n){"use strict";var i=n("8Y7J"),o=n("oBZk"),r=n("ZZ/e");n("RRim"),n("iInd"),n("gly3"),n("7wfR"),n("EFyh"),n("H+bZ"),n("Fzct"),n("7ch9"),n("Pasx"),n("9B/o"),n.d(e,"a",(function(){return s})),n.d(e,"b",(function(){return l}));var s=i.Bb({encapsulation:0,styles:[[".titleDiv[_ngcontent-%COMP%]{overflow-x:scroll;white-space:nowrap;text-align:center;margin:auto}.titleDiv[_ngcontent-%COMP%]   ion-title[_ngcontent-%COMP%]{position:relative;color:#0096c6;font-size:1em;padding-left:4px;padding-right:4px;display:inline-block}.menuIcon[_ngcontent-%COMP%]{--padding-top:0px!important;--padding-end:0px!important;--padding-bottom:0px!important;--padding-start:0px!important;--border-radius:50%!important;width:36px!important;height:36px!important;margin:0!important}.subIcons[_ngcontent-%COMP%]{--padding-top:4px!important;--padding-end:4px!important;--padding-bottom:4px!important;--padding-start:4px!important;--border-radius:50%!important;width:30px!important;height:30px!important;margin:0 2px 0 0!important}"]],data:{}});function l(t){return i.Yb(0,[(t()(),i.Db(0,0,null,null,31,"ion-header",[],null,null,null,o.tb,o.r)),i.Cb(1,49152,null,0,r.C,[i.j,i.p,i.G],null,null),(t()(),i.Db(2,0,null,0,29,"ion-toolbar",[],null,null,null,o.cc,o.ab)),i.Cb(3,49152,null,0,r.Db,[i.j,i.p,i.G],null,null),(t()(),i.Db(4,0,null,0,3,"ion-buttons",[["slot","start"]],null,null,null,o.gb,o.e)),i.Cb(5,49152,null,0,r.m,[i.j,i.p,i.G],null,null),(t()(),i.Db(6,0,null,0,1,"ion-menu-button",[["class","menuIcon"],["menu","mainMenu"]],null,null,null,o.Hb,o.G)),i.Cb(7,49152,null,0,r.S,[i.j,i.p,i.G],{menu:[0,"menu"]},null),(t()(),i.Db(8,0,null,0,3,"div",[["class","titleDiv"]],null,null,null,null,null)),(t()(),i.Db(9,0,null,null,2,"ion-title",[],null,null,null,o.ac,o.Y)),i.Cb(10,49152,null,0,r.Bb,[i.j,i.p,i.G],null,null),(t()(),i.Wb(11,0,["",""])),(t()(),i.Db(12,0,null,0,19,"ion-buttons",[["slot","end"]],null,null,null,o.gb,o.e)),i.Cb(13,49152,null,0,r.m,[i.j,i.p,i.G],null,null),(t()(),i.Db(14,0,null,0,3,"ion-button",[["class","subIcons"]],null,[[null,"click"]],(function(t,e,n){var i=!0;return"click"===e&&(i=!1!==t.component.showNotifications()&&i),i}),o.fb,o.d)),i.Cb(15,49152,null,0,r.l,[i.j,i.p,i.G],null,null),(t()(),i.Db(16,0,null,0,1,"ion-icon",[["ios","ios-notifications"],["md","md-notifications"],["slot","icon-only"]],null,null,null,o.ub,o.s)),i.Cb(17,49152,null,0,r.D,[i.j,i.p,i.G],{ios:[0,"ios"],md:[1,"md"]},null),(t()(),i.Db(18,0,null,0,3,"ion-button",[["class","subIcons"]],null,[[null,"click"]],(function(t,e,n){var i=!0;return"click"===e&&(i=!1!==t.component.search()&&i),i}),o.fb,o.d)),i.Cb(19,49152,null,0,r.l,[i.j,i.p,i.G],null,null),(t()(),i.Db(20,0,null,0,1,"ion-icon",[["ios","ios-search"],["md","md-search"],["slot","icon-only"]],null,null,null,o.ub,o.s)),i.Cb(21,49152,null,0,r.D,[i.j,i.p,i.G],{ios:[0,"ios"],md:[1,"md"]},null),(t()(),i.Db(22,0,null,0,3,"ion-button",[["class","subIcons"]],null,[[null,"click"]],(function(t,e,n){var i=!0;return"click"===e&&(i=!1!==t.component.print()&&i),i}),o.fb,o.d)),i.Cb(23,49152,null,0,r.l,[i.j,i.p,i.G],null,null),(t()(),i.Db(24,0,null,0,1,"ion-icon",[["ios","ios-print"],["md","md-print"],["slot","icon-only"]],null,null,null,o.ub,o.s)),i.Cb(25,49152,null,0,r.D,[i.j,i.p,i.G],{ios:[0,"ios"],md:[1,"md"]},null),(t()(),i.Db(26,0,null,0,5,"ion-menu-toggle",[["menu","accountMenu"]],null,null,null,o.Ib,o.H)),i.Cb(27,49152,null,0,r.T,[i.j,i.p,i.G],{menu:[0,"menu"]},null),(t()(),i.Db(28,0,null,0,3,"ion-button",[["class","subIcons"]],null,null,null,o.fb,o.d)),i.Cb(29,49152,null,0,r.l,[i.j,i.p,i.G],null,null),(t()(),i.Db(30,0,null,0,1,"ion-icon",[["ios","ios-contact"],["md","md-contact"],["slot","icon-only"]],null,null,null,o.ub,o.s)),i.Cb(31,49152,null,0,r.D,[i.j,i.p,i.G],{ios:[0,"ios"],md:[1,"md"]},null)],(function(t,e){t(e,7,0,"mainMenu"),t(e,17,0,"ios-notifications","md-notifications"),t(e,21,0,"ios-search","md-search"),t(e,25,0,"ios-print","md-print"),t(e,27,0,"accountMenu"),t(e,31,0,"ios-contact","md-contact")}),(function(t,e){t(e,11,0,e.component.titleToUse)}))}},EFyh:function(t,e,n){"use strict";n.d(e,"a",(function(){return o}));var i=n("8Y7J");let o=(()=>{class t{constructor(){this.inTestServer=!1}getCredentials(){return this.credentials}setTestServerIdent(t){this.inTestServer=1==t,console.log("this.inTestServer",this.inTestServer)}setCredentials(t){this.credentials=t}getAuthentication(){return this.authentication}setAuthentication(t){this.authentication=t}getConfigAndDefaults(){return this.configAndDefaults}setConfigAndDefaults(t){this.configAndDefaults=t}}return t.ngInjectableDef=i.bc({factory:function(){return new t},token:t,providedIn:"root"}),t})()},"H+bZ":function(t,e,n){"use strict";n.d(e,"a",(function(){return r}));var i=n("AytR"),o=n("8Y7J");let r=(()=>{class t{constructor(){this.url=i.a.url}getUrl(){return this.url}setUrl(t){this.url=t}}return t.ngInjectableDef=o.bc({factory:function(){return new t},token:t,providedIn:"root"}),t})()},Pasx:function(t,e,n){"use strict";n.d(e,"a",(function(){return o}));var i=n("8Y7J");let o=(()=>{class t{constructor(){}parseErrorMessage(t){let e="";return t.error?e=t.error.message?t.error.message:t.error:t.message&&(e=t.message),e}parseErrorArrayMessage(t){let e="";return t.error?e=t.error.mandatories?t.error.mandatories:t.error:t.mandatories&&(e=t.mandatories),e}}return t.ngInjectableDef=i.bc({factory:function(){return new t},token:t,providedIn:"root"}),t})()},RRim:function(t,e,n){"use strict";n.d(e,"a",(function(){return r}));var i=n("mrSG"),o=(n("gly3"),n("7wfR"),n("EFyh"),n("H+bZ"),n("7ch9"),n("Pasx"),n("Fzct"),n("9B/o"),n("ZZ/e"),n("Hfim"));class r{constructor(t,e,n,i,o,r,s,l,c,a,u,h){this.router=t,this.cf4ApiService=e,this.patientService=n,this.loginService=i,this.apiService=o,this.pdfViewerService=r,this.loadingService=s,this.stringUtilsService=l,this.platform=c,this.inAppBrowser=a,this.modalController=u,this.alertCtrl=h,this.options={location:"yes",hidden:"no",clearcache:"yes",clearsessioncache:"yes",zoom:"yes",hardwareback:"yes",mediaPlaybackRequiresUserAction:"no",shouldPauseOnSuspend:"no",closebuttoncaption:"Close",disallowoverscroll:"no",toolbar:"yes",enableViewportScale:"no",allowInlineMediaPlayback:"no",presentationstyle:"pagesheet",fullscreen:"yes"},this.showPDF=!1,this.tokenEnc="",this.cf4ApiService.setUrl(this.apiService.getUrl()),this.cf4ApiService.setToken(this.loginService.getAuthentication().token),this.selectedEncounterNo=this.patientService.getSelectedEncounterNo()}ngOnInit(){}showNotifications(){}search(){this.router.navigate(["/menu/quick-search"])}print(){this.loadingService.present(),this.cf4ApiService.getCf4Validation(this.selectedEncounterNo).subscribe(t=>{console.log("result: ",t),this.loadingService.dismiss().then(e=>{t&&(this.tokenEnc=t.token_inc,t.check.mandatories?this.openAlertModalValidation("fail","Missing Required Fields!",t.check.message,t.check.mandatories,t,"Ok"):this.confirmPrintCf4())})},t=>{console.log(t),this.loadingService.dismiss().then(e=>{const n=this.stringUtilsService.parseErrorMessage(t);this.openAlertModal("fail","Failed",n,"Ok")})})}openCf4(){this.platform.is("android")?(this.loadingService.present(),this.cf4ApiService.getCf4(this.selectedEncounterNo).subscribe(t=>{console.log("result: ",t),this.loadingService.dismiss().then(e=>{t&&t.filepath&&this.openWithInAppBrowser(t.filepath)})},t=>{console.log(t),this.loadingService.dismiss().then(e=>{const n=this.stringUtilsService.parseErrorMessage(t);this.openAlertModal("fail","Failed",n,"Ok")})})):this.openWithInAppBrowser(this.cf4ApiService.getCf4WebUrl(this.selectedEncounterNo,this.tokenEnc,this.loginService.getAuthentication().user.id))}openWithInAppBrowser(t){return i.b(this,void 0,void 0,(function*(){this.inAppBrowser.create(t,"_system",this.options)}))}confirmPrintCf4(){return i.b(this,void 0,void 0,(function*(){let t=yield this.alertCtrl.create({header:"View CF4?",message:"Would you like to view the CF4 printout?",buttons:[{text:"No",handler:()=>{console.log("Cancel clicked")}},{text:"Yes",handler:()=>{this.openCf4()}}]});yield t.present()}))}openAlertModal(t,e,n,r="Done"){return i.b(this,void 0,void 0,(function*(){const i=yield this.modalController.create({component:o.a,cssClass:"my-custom-modal-css",componentProps:{alert:t,title:e,message:n,ok:r}});return i.onDidDismiss().then(t=>{null!==t&&console.log("result.data: ",t.data)}),yield i.present()}))}openAlertModalValidation(t,e,n,r,s,l="Done"){return i.b(this,void 0,void 0,(function*(){const i=yield this.modalController.create({component:o.a,cssClass:"my-custom-modal-array-css",componentProps:{alert:t,title:e,message:n,messageArray:r,ok:l}});return i.onDidDismiss().then(t=>{null!==t&&(console.log("result.data: ",t.data),this.showPDF=!0),this.confirmPrintCf4()}),yield i.present()}))}}},gly3:function(t,e,n){"use strict";n.d(e,"a",(function(){return d}));var i=n("tS1D"),o=n("lJxs"),r=n("JIr8"),s=n("Cfvw"),l=n("z6cu"),c=n("IheW"),a=n("ZZ/e"),u=n("yp2w"),h=n("8Y7J");let d=(()=>{class t{constructor(t,e,n){this.platform=t,this.httpClient=e,this.http=n,this.url="http://localhost:3000",this.getcf4Path="/api/cf4/file/path",this.getcf4validationPath="/api/cf4/validate"}setUrl(t){this.url=t}setToken(t){this.token=t}getCf4(t){if(this.platform.is("ios")||this.platform.is("android")){console.log("native");const e={encounter_nr:t},n={Accept:"application/json",Authorization:"Bearer "+this.token};return Object(s.a)(this.http.get(this.url+this.getcf4Path,e,n)).pipe(Object(i.a)(3e4),Object(o.a)(t=>{const e=JSON.parse(t.data);return console.log("CF4: ",e),e}),Object(r.a)((t,e)=>{if("string"==typeof t.error)try{t.error=JSON.parse(t.error)}catch(n){}return console.log("CF4 error: ",t,e),Object(l.a)(t)}))}{console.log("browser");const e=(new c.h).set("encounter_nr",t);console.log("params: ",e);const n={params:e,headers:new c.g({Accept:"application/json",Authorization:"Bearer "+this.token})};return console.log("httpOptions",n),this.httpClient.get(this.url+this.getcf4Path,n).pipe(Object(i.a)(3e4),Object(o.a)(t=>(console.log("CF4: ",t),t)),Object(r.a)((t,e)=>(console.log("CF4 error: ",t,e),Object(l.a)(t))))}}getCf4WebUrl(t,e,n){return this.url+"/printCf4?encounter_nr="+t+"&token="+e+"&user="+n}getCf4Validation(t){if(this.platform.is("ios")||this.platform.is("android")){console.log("native");const e={encounter_nr:t},n={Accept:"application/json",Authorization:"Bearer "+this.token};return Object(s.a)(this.http.get(this.url+this.getcf4validationPath,e,n)).pipe(Object(i.a)(3e4),Object(o.a)(t=>{const e=JSON.parse(t.data);return console.log("CF4: ",e),e}),Object(r.a)((t,e)=>{if("string"==typeof t.error)try{t.error=JSON.parse(t.error)}catch(n){}return console.log("CF4 error: ",t,e),Object(l.a)(t)}))}{console.log("browser");const e=(new c.h).set("encounter_nr",t);console.log("params: ",e);const n={params:e,headers:new c.g({Accept:"application/json",Authorization:"Bearer "+this.token})};return console.log("httpOptions",n),this.httpClient.get(this.url+this.getcf4validationPath,n).pipe(Object(i.a)(3e4),Object(o.a)(t=>(console.log("CF4: ",t),t)),Object(r.a)((t,e)=>(console.log("CF4 error: ",t,e),Object(l.a)(t))))}}}return t.ngInjectableDef=h.bc({factory:function(){return new t(h.cc(a.Nb),h.cc(c.c),h.cc(u.a))},token:t,providedIn:"root"}),t})()},tS1D:function(t,e,n){"use strict";var i=n("D0XW");const o=(()=>{function t(){return Error.call(this),this.message="Timeout has occurred",this.name="TimeoutError",this}return t.prototype=Object.create(Error.prototype),t})();var r=n("l7GE"),s=n("ZUHj");class l{constructor(t,e,n,i){this.waitFor=t,this.absoluteTimeout=e,this.withObservable=n,this.scheduler=i}call(t,e){return e.subscribe(new c(t,this.absoluteTimeout,this.waitFor,this.withObservable,this.scheduler))}}class c extends r.a{constructor(t,e,n,i,o){super(t),this.absoluteTimeout=e,this.waitFor=n,this.withObservable=i,this.scheduler=o,this.action=null,this.scheduleTimeout()}static dispatchTimeout(t){const{withObservable:e}=t;t._unsubscribeAndRecycle(),t.add(Object(s.a)(t,e))}scheduleTimeout(){const{action:t}=this;t?this.action=t.schedule(this,this.waitFor):this.add(this.action=this.scheduler.schedule(c.dispatchTimeout,this.waitFor,this))}_next(t){this.absoluteTimeout||this.scheduleTimeout(),super._next(t)}_unsubscribe(){this.action=null,this.scheduler=null,this.withObservable=null}}var a=n("z6cu");function u(t,e=i.a){return function(t,e,n=i.a){return i=>{let o=function(t){return t instanceof Date&&!isNaN(+t)}(t),r=o?+t-n.now():Math.abs(t);return i.lift(new l(r,o,e,n))}}(t,Object(a.a)(new o),e)}n.d(e,"a",(function(){return u}))},z6cu:function(t,e,n){"use strict";n.d(e,"a",(function(){return o}));var i=n("HDdC");function o(t,e){return new i.a(e?n=>e.schedule(r,0,{error:t,subscriber:n}):e=>e.error(t))}function r({error:t,subscriber:e}){e.error(t)}}}]);