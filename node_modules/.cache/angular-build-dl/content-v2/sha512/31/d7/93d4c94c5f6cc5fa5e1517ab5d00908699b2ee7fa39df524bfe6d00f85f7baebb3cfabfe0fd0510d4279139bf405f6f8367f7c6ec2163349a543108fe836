(window.webpackJsonp=window.webpackJsonp||[]).push([[25],{"0AxX":function(e,n,i){"use strict";i.r(n);var t=i("8Y7J"),s=i("lJxs"),l=i("JIr8"),o=i("Cfvw"),r=i("z6cu"),a=i("IheW"),c=i("yp2w"),u=i("ZZ/e");let h=(()=>{class e{constructor(e,n,i){this.httpClient=e,this.http=n,this.platform=i,this.url="http://localhost:3000",this.getEncounterListPath="/api/doctor/patient/encounters"}setUrl(e){this.url=e}setToken(e){this.token=e}getEncounterList(e){if(this.platform.is("ios")||this.platform.is("android")){console.log("native");const n={pid:e},i={Accept:"application/json","Content-Type":"application/json",Authorization:"Bearer "+this.token};return Object(o.a)(this.http.get(this.url+this.getEncounterListPath,n,i)).pipe(Object(s.a)(e=>{const n=JSON.parse(e.data);return console.log("Encounter history: ",n),n}),Object(l.a)((e,n)=>{if("string"==typeof e.error)try{e.error=JSON.parse(e.error)}catch(i){}return console.log("Encounter history error: ",e,n),Object(r.a)(e)}))}{const n={params:(new a.h).set("pid",e),headers:new a.g({Accept:"application/json",Authorization:"Bearer "+this.token,"Access-Control-Allow-Origin":"*"})};return this.httpClient.get(this.url+this.getEncounterListPath,n).pipe(Object(s.a)(e=>(console.log("Entered getEncounterList API:",e),e)),Object(l.a)((e,n)=>(console.log(e,n),Object(r.a)(e))))}}}return e.ngInjectableDef=t.bc({factory:function(){return new e(t.cc(a.c),t.cc(c.a),t.cc(u.Nb))},token:e,providedIn:"root"}),e})();var _=i("7wfR"),d=i("LDXv"),p=i("Wc1Z"),m=i("H+bZ"),g=i("EFyh"),b=i("7ch9"),f=i("Pasx"),v=i("VM0z");class C{constructor(e,n,i,t,s,l,o,r,a,c,u,h){this.router=e,this.encounterApi=n,this.patientService=i,this.patientApiService=t,this.apiService=s,this.loginService=l,this.loadingService=o,this.stringUtilsService=r,this.alertServ=a,this.menuController=c,this.permissionValidatorService=u,this.events=h,this.encounterList=[],this.isNurse=!1,this.isDoctor=!0;const _=this.loginService.getConfigAndDefaults();this.defaultOptions=_.patientlist["m-patient-list"]["default-options"]["encounter-types"],console.log(this.defaultOptions),this.selectedEncounterNo=this.patientService.getSelectedEncounterNo(),this.encounterApi.setUrl(this.apiService.getUrl()),this.encounterApi.setToken(this.loginService.getAuthentication().token);const d=this.loginService.getAuthentication();this.isNurse=-1!==d.user.role.role_name.toLocaleLowerCase().indexOf("nurse"),this.isDoctor=!this.isNurse}initEncounterHistory(){return new Promise((e,n)=>{this.loadingService.present();const i=this.patientService.getSelectedPatientBriefInformation();console.log(i.spin0.pid),this.encounterApi.getEncounterList(i.spin0.pid).subscribe(n=>{this.encounterList=n,this.loadingService.dismiss().then(i=>{e(n)})},e=>{console.log(e),this.loadingService.dismiss().then(i=>{const t=this.stringUtilsService.parseErrorMessage(e);this.alertServ.openAlertModal("fail","Failed",t,"Ok"),n(e)})})})}ionViewWillEnter(){console.log("ionViewWillEnter");const e=this.patientService.getSelectedEncounterNo();this.selectedEncounterNo!==e&&(console.log("selected patient changed"),this.selectedEncounterNo=e,this.initEncounterHistory())}ngOnInit(){this.menuController.swipeGesture(!0,"mainMenu"),this.menuController.swipeGesture(!0,"accountMenu"),this.initEncounterHistory()}showDetails(e){const n=this.encounterList[e];console.log(n),this.patientService.setSelectedEncounterNo(n.encounter_no),this.patientService.setTempEncounterNo(n.encounter_no),this.loadingService.present(),this.patientApiService.getPatientProfileById(n.encounter_no).subscribe(e=>{console.log(e),this.loadingService.dismiss().then(n=>{this.patientService.setSelectedPatientBriefInformation(e),this.patientService.setSelectedEncounterNo(e.encounter_no),this.permissionValidatorService.setSelectedPatient(e),this.events.publish("patient:selected",e,Date.now()),this.router.navigate(["/menu/patient-profile"],{skipLocationChange:!0,replaceUrl:!0})})},e=>{console.log("err ",e),this.loadingService.dismiss().then(n=>{const i=this.stringUtilsService.parseErrorMessage(e);this.alertServ.openAlertModal("fail","Failed",i,"Ok")})})}doRefreshEncounterHistory(e){this.initEncounterHistory().then(n=>{e.target.complete()}).catch(n=>{e.target.complete()})}}class P{}var M=i("pMnS"),D=i("Jt+7"),E=i("oBZk"),w=i("SVse"),O=i("ChBM"),y=i("RRim"),S=i("iInd"),N=i("gly3"),I=i("Fzct"),j=i("9B/o"),k=t.Bb({encapsulation:0,styles:[["ion-refresher[_ngcontent-%COMP%]{z-index:1}ion-refresher-content[_ngcontent-%COMP%]{background-color:transparent}ion-content[_ngcontent-%COMP%]{background:#f9f9f9;--ion-background-color:#f9f9f9}ion-content[_ngcontent-%COMP%]   .wrapper[_ngcontent-%COMP%]{width:100%}ion-content[_ngcontent-%COMP%]   .wrapper[_ngcontent-%COMP%]   ion-list[_ngcontent-%COMP%]   ion-item-sliding[_ngcontent-%COMP%]{background:#fff;--background:white;--ion-background-color:#ffffff;margin-bottom:1vh}ion-content[_ngcontent-%COMP%]   .wrapper[_ngcontent-%COMP%]   ion-list[_ngcontent-%COMP%]   ion-item-sliding[_ngcontent-%COMP%]   ion-item[_ngcontent-%COMP%]{border-left:1vw solid #0096c6}ion-content[_ngcontent-%COMP%]   .wrapper[_ngcontent-%COMP%]   ion-list[_ngcontent-%COMP%]   ion-item-sliding[_ngcontent-%COMP%]   ion-item[_ngcontent-%COMP%]   ion-grid[_ngcontent-%COMP%]{padding:2vh 0}ion-content[_ngcontent-%COMP%]   .wrapper[_ngcontent-%COMP%]   ion-list[_ngcontent-%COMP%]   ion-item-sliding[_ngcontent-%COMP%]   ion-item[_ngcontent-%COMP%]   ion-grid[_ngcontent-%COMP%]   ion-row[_ngcontent-%COMP%]{width:100%}ion-content[_ngcontent-%COMP%]   .wrapper[_ngcontent-%COMP%]   ion-list[_ngcontent-%COMP%]   ion-item-sliding[_ngcontent-%COMP%]   ion-item[_ngcontent-%COMP%]   ion-grid[_ngcontent-%COMP%]   ion-row[_ngcontent-%COMP%]   ion-col[_ngcontent-%COMP%]{padding:unset}ion-content[_ngcontent-%COMP%]   .wrapper[_ngcontent-%COMP%]   ion-list[_ngcontent-%COMP%]   ion-item-sliding[_ngcontent-%COMP%]   ion-item[_ngcontent-%COMP%]   ion-grid[_ngcontent-%COMP%]   .smallestText[_ngcontent-%COMP%]{color:#999;font-size:small}ion-content[_ngcontent-%COMP%]   .wrapper[_ngcontent-%COMP%]   ion-list[_ngcontent-%COMP%]   ion-item-sliding[_ngcontent-%COMP%]   ion-item[_ngcontent-%COMP%]   ion-grid[_ngcontent-%COMP%]   .smallTextBlack[_ngcontent-%COMP%]{color:#444}ion-content[_ngcontent-%COMP%]   .wrapper[_ngcontent-%COMP%]   ion-list[_ngcontent-%COMP%]   ion-item-sliding[_ngcontent-%COMP%]   ion-item[_ngcontent-%COMP%]   ion-grid[_ngcontent-%COMP%]   .smallTextBlack[_ngcontent-%COMP%]   .blueBackground[_ngcontent-%COMP%]{background:#0096c6;border-radius:10px;width:-webkit-fit-content;width:-moz-fit-content;width:fit-content;padding:.5vh 2vw;color:#fff;font-size:x-small}"]],data:{}});function x(e){return t.Yb(0,[(e()(),t.Db(0,0,null,null,1,"div",[["class","testServer"]],null,null,null,null,null)),(e()(),t.Wb(-1,null,[" TEST SERVER CONNECTED "]))],null,null)}function A(e){return t.Yb(0,[(e()(),t.Db(0,0,null,null,1,"div",[["class","noresult"]],null,null,null,null,null)),(e()(),t.Wb(-1,null,[" No History "]))],null,null)}function z(e){return t.Yb(0,[(e()(),t.Db(0,0,null,null,1,"div",[["class","blueBackground"]],null,null,null,null,null)),(e()(),t.Wb(1,null,["",""]))],null,(function(e,n){e(n,1,0,n.component.defaultOptions.ope)}))}function H(e){return t.Yb(0,[(e()(),t.Db(0,0,null,null,1,"div",[["class","blueBackground"]],null,null,null,null,null)),(e()(),t.Wb(1,null,["",""]))],null,(function(e,n){e(n,1,0,n.component.defaultOptions.ipe)}))}function V(e){return t.Yb(0,[(e()(),t.Db(0,0,null,null,1,"div",[["class","blueBackground"]],null,null,null,null,null)),(e()(),t.Wb(1,null,["",""]))],null,(function(e,n){e(n,1,0,n.component.defaultOptions.ere)}))}function G(e){return t.Yb(0,[(e()(),t.Db(0,0,null,null,54,"ion-item-sliding",[],null,null,null,E.Cb,E.B)),t.Cb(1,49152,null,0,u.N,[t.j,t.p,t.G],null,null),(e()(),t.Db(2,0,null,0,46,"ion-item",[],null,null,null,E.Db,E.w)),t.Cb(3,49152,null,0,u.I,[t.j,t.p,t.G],null,null),(e()(),t.Db(4,0,null,0,44,"ion-grid",[],null,null,null,E.sb,E.q)),t.Cb(5,49152,null,0,u.B,[t.j,t.p,t.G],null,null),(e()(),t.Db(6,0,null,0,10,"ion-row",[["class","smallestText"]],null,null,null,E.Ob,E.M)),t.Cb(7,49152,null,0,u.kb,[t.j,t.p,t.G],null,null),(e()(),t.Db(8,0,null,0,2,"ion-col",[["size","4"]],null,null,null,E.lb,E.j)),t.Cb(9,49152,null,0,u.u,[t.j,t.p,t.G],{size:[0,"size"]},null),(e()(),t.Wb(-1,0,["Encounter No."])),(e()(),t.Db(11,0,null,0,2,"ion-col",[["size","3"]],null,null,null,E.lb,E.j)),t.Cb(12,49152,null,0,u.u,[t.j,t.p,t.G],{size:[0,"size"]},null),(e()(),t.Wb(-1,0,["Patient Type"])),(e()(),t.Db(14,0,null,0,2,"ion-col",[["size","5"]],null,null,null,E.lb,E.j)),t.Cb(15,49152,null,0,u.u,[t.j,t.p,t.G],{size:[0,"size"]},null),(e()(),t.Wb(-1,0,["Clinic/Department"])),(e()(),t.Db(17,0,null,0,15,"ion-row",[["class","smallTextBlack"]],null,null,null,E.Ob,E.M)),t.Cb(18,49152,null,0,u.kb,[t.j,t.p,t.G],null,null),(e()(),t.Db(19,0,null,0,2,"ion-col",[["size","4"]],null,null,null,E.lb,E.j)),t.Cb(20,49152,null,0,u.u,[t.j,t.p,t.G],{size:[0,"size"]},null),(e()(),t.Wb(21,0,["",""])),(e()(),t.Db(22,0,null,0,7,"ion-col",[["size","3"]],null,null,null,E.lb,E.j)),t.Cb(23,49152,null,0,u.u,[t.j,t.p,t.G],{size:[0,"size"]},null),(e()(),t.sb(16777216,null,0,1,null,z)),t.Cb(25,16384,null,0,w.l,[t.Y,t.U],{ngIf:[0,"ngIf"]},null),(e()(),t.sb(16777216,null,0,1,null,H)),t.Cb(27,16384,null,0,w.l,[t.Y,t.U],{ngIf:[0,"ngIf"]},null),(e()(),t.sb(16777216,null,0,1,null,V)),t.Cb(29,16384,null,0,w.l,[t.Y,t.U],{ngIf:[0,"ngIf"]},null),(e()(),t.Db(30,0,null,0,2,"ion-col",[["size","5"]],null,null,null,E.lb,E.j)),t.Cb(31,49152,null,0,u.u,[t.j,t.p,t.G],{size:[0,"size"]},null),(e()(),t.Wb(32,0,["",""])),(e()(),t.Db(33,0,null,0,7,"ion-row",[["class","smallestText"]],null,null,null,E.Ob,E.M)),t.Cb(34,49152,null,0,u.kb,[t.j,t.p,t.G],null,null),(e()(),t.Db(35,0,null,0,2,"ion-col",[["size","6"]],null,null,null,E.lb,E.j)),t.Cb(36,49152,null,0,u.u,[t.j,t.p,t.G],{size:[0,"size"]},null),(e()(),t.Wb(-1,0,["Admission Date"])),(e()(),t.Db(38,0,null,0,2,"ion-col",[["size","6"]],null,null,null,E.lb,E.j)),t.Cb(39,49152,null,0,u.u,[t.j,t.p,t.G],{size:[0,"size"]},null),(e()(),t.Wb(-1,0,["Discharge Date"])),(e()(),t.Db(41,0,null,0,7,"ion-row",[["class","smallTextBlack"]],null,null,null,E.Ob,E.M)),t.Cb(42,49152,null,0,u.kb,[t.j,t.p,t.G],null,null),(e()(),t.Db(43,0,null,0,2,"ion-col",[["size","6"]],null,null,null,E.lb,E.j)),t.Cb(44,49152,null,0,u.u,[t.j,t.p,t.G],{size:[0,"size"]},null),(e()(),t.Wb(45,0,["",""])),(e()(),t.Db(46,0,null,0,2,"ion-col",[["size","6"]],null,null,null,E.lb,E.j)),t.Cb(47,49152,null,0,u.u,[t.j,t.p,t.G],{size:[0,"size"]},null),(e()(),t.Wb(48,0,["",""])),(e()(),t.Db(49,0,null,0,5,"ion-item-options",[["side","end"]],null,null,null,E.Bb,E.A)),t.Cb(50,49152,null,0,u.M,[t.j,t.p,t.G],{side:[0,"side"]},null),(e()(),t.Db(51,0,null,0,3,"ion-item-option",[],null,[[null,"click"]],(function(e,n,i){var t=!0;return"click"===n&&(t=!1!==e.component.showDetails(e.context.index)&&t),t}),E.Ab,E.z)),t.Cb(52,49152,null,0,u.L,[t.j,t.p,t.G],null,null),(e()(),t.Db(53,0,null,0,1,"ion-icon",[["ios","ios-eye"],["md","md-eye"]],null,null,null,E.ub,E.s)),t.Cb(54,49152,null,0,u.D,[t.j,t.p,t.G],{ios:[0,"ios"],md:[1,"md"]},null)],(function(e,n){e(n,9,0,"4"),e(n,12,0,"3"),e(n,15,0,"5"),e(n,20,0,"4"),e(n,23,0,"3"),e(n,25,0,"ope"==n.context.$implicit.deptenc_code),e(n,27,0,"ipe"==n.context.$implicit.deptenc_code),e(n,29,0,"ere"==n.context.$implicit.deptenc_code),e(n,31,0,"5"),e(n,36,0,"6"),e(n,39,0,"6"),e(n,44,0,"6"),e(n,47,0,"6"),e(n,50,0,"end"),e(n,54,0,"ios-eye","md-eye")}),(function(e,n){e(n,21,0,n.context.$implicit.encounter_no),e(n,32,0,n.context.$implicit.area_desc),e(n,45,0,n.context.$implicit.encounter_date),e(n,48,0,n.context.$implicit.discharge_dt)}))}function T(e){return t.Yb(0,[(e()(),t.Db(0,0,null,null,1,"app-headerbar",[["title","Encounter History"]],null,null,null,O.b,O.a)),t.Cb(1,114688,null,0,y.a,[S.m,N.a,_.a,g.a,m.a,I.a,b.a,f.a,u.Nb,j.a,u.Jb,u.a],{titleToUse:[0,"titleToUse"]},null),(e()(),t.Db(2,0,null,null,14,"ion-content",[],null,null,null,E.mb,E.k)),t.Cb(3,49152,null,0,u.v,[t.j,t.p,t.G],null,null),(e()(),t.Db(4,0,null,0,3,"ion-refresher",[["pullFactor","0.5"],["pullMax","200"],["pullMin","100"],["slot","fixed"]],null,[[null,"ionRefresh"]],(function(e,n,i){var t=!0;return"ionRefresh"===n&&(t=!1!==e.component.doRefreshEncounterHistory(i)&&t),t}),E.Nb,E.K)),t.Cb(5,49152,null,0,u.eb,[t.j,t.p,t.G],{pullFactor:[0,"pullFactor"],pullMax:[1,"pullMax"],pullMin:[2,"pullMin"]},null),(e()(),t.Db(6,0,null,0,1,"ion-refresher-content",[],null,null,null,E.Mb,E.L)),t.Cb(7,49152,null,0,u.fb,[t.j,t.p,t.G],null,null),(e()(),t.Db(8,0,null,0,8,"div",[["class","wrapper"]],null,null,null,null,null)),(e()(),t.sb(16777216,null,null,1,null,x)),t.Cb(10,16384,null,0,w.l,[t.Y,t.U],{ngIf:[0,"ngIf"]},null),(e()(),t.Db(11,0,null,null,5,"ion-list",[],null,null,null,E.Gb,E.D)),t.Cb(12,49152,null,0,u.P,[t.j,t.p,t.G],null,null),(e()(),t.sb(16777216,null,0,1,null,A)),t.Cb(14,16384,null,0,w.l,[t.Y,t.U],{ngIf:[0,"ngIf"]},null),(e()(),t.sb(16777216,null,0,1,null,G)),t.Cb(16,278528,null,0,w.k,[t.Y,t.U,t.y],{ngForOf:[0,"ngForOf"]},null)],(function(e,n){var i=n.component;e(n,1,0,"Encounter History"),e(n,5,0,"0.5","200","100"),e(n,10,0,i.loginService.inTestServer),e(n,14,0,i.encounterList&&i.encounterList.length<1||!i.encounterList),e(n,16,0,i.encounterList)}),null)}function L(e){return t.Yb(0,[(e()(),t.Db(0,0,null,null,1,"app-encounter-history",[],null,null,null,T,k)),t.Cb(1,114688,null,0,C,[S.m,h,_.a,p.a,m.a,g.a,b.a,f.a,v.a,u.Ib,d.a,u.e],null,null)],(function(e,n){e(n,1,0)}),null)}var R=t.zb("app-encounter-history",C,L,{},{},[]),B=i("s7LF"),W=i("gRf5"),F=i("wMzM"),U=i("t8sF"),Y=i("j1ZV");i.d(n,"EncounterHistoryPageModuleNgFactory",(function(){return J}));var J=t.Ab(P,[],(function(e){return t.Mb([t.Nb(512,t.m,t.lb,[[8,[M.a,D.a,R]],[3,t.m],t.E]),t.Nb(4608,w.n,w.m,[t.A,[2,w.C]]),t.Nb(4608,B.w,B.w,[]),t.Nb(4608,u.b,u.b,[t.G,t.g]),t.Nb(4608,u.Jb,u.Jb,[u.b,t.m,t.w]),t.Nb(4608,u.Ob,u.Ob,[u.b,t.m,t.w]),t.Nb(4608,a.j,a.p,[w.d,t.J,a.n]),t.Nb(4608,a.q,a.q,[a.j,a.o]),t.Nb(5120,a.a,(function(e){return[e]}),[a.q]),t.Nb(4608,a.m,a.m,[]),t.Nb(6144,a.k,null,[a.m]),t.Nb(4608,a.i,a.i,[a.k]),t.Nb(6144,a.b,null,[a.i]),t.Nb(4608,a.f,a.l,[a.b,t.w]),t.Nb(4608,a.c,a.c,[a.f]),t.Nb(4608,W.a,W.a,[]),t.Nb(4608,F.a,F.a,[]),t.Nb(4608,U.a,U.a,[]),t.Nb(4608,I.a,I.a,[F.a,W.a,U.a,b.a]),t.Nb(1073742336,w.c,w.c,[]),t.Nb(1073742336,B.v,B.v,[]),t.Nb(1073742336,B.i,B.i,[]),t.Nb(1073742336,u.Fb,u.Fb,[]),t.Nb(1073742336,S.q,S.q,[[2,S.v],[2,S.m]]),t.Nb(1073742336,a.e,a.e,[]),t.Nb(1073742336,a.d,a.d,[]),t.Nb(1073742336,Y.a,Y.a,[]),t.Nb(1073742336,P,P,[]),t.Nb(256,a.n,"XSRF-TOKEN",[]),t.Nb(256,a.o,"X-XSRF-TOKEN",[]),t.Nb(1024,S.k,(function(){return[[{path:"",component:C},{path:"",children:[{path:"encounter-details",loadChildren:"../encounter-details/encounter-details.module#EncounterDetailsPageModule"}]}]]}),[])])}))},LDXv:function(e,n,i){"use strict";var t=i("8Y7J");let s=(()=>{class e{constructor(){}compare(e,n){const i={};return e.forEach(e=>n.forEach(n=>{e.id===n.id&&(i[e.id]=i[e.id]+1||1)})),Object.keys(i)}}return e.ngInjectableDef=t.bc({factory:function(){return new e},token:e,providedIn:"root"}),e})();i.d(n,"a",(function(){return l}));let l=(()=>{class e{constructor(e){this.arrayComparatorService=e,this.throwsErrorCode=5011,this.perms={allPermission:"_a_0_all",manageEhr:"_a_1_ehr_sudomanage",viewAllDept:"_a_2_ehr_view_all_dept",viewOwnDept:"_a_3_ehr_view_own_dept",editAllDept:"_a_2_ehr_edit_all_dept",editOwnDept:"_a_3_ehr_edit_own_dept",overideInct:"_a_2_ehr_override_my_patient",overideInctSoap:"_a_3_ehr_soap",overideInctSoapDiag:"_a_2_ehr_override_final_dx",overideInctSoapDiag2:"_a_4_ehr_override_final_dx",overideInctPastMed:"_a_3_ehr_past_medical_history",overideInctPsigns:"_a_3_ehr_pertinent_signs_and_symptoms",overideInctHciRef:"_a_3_ehr_referred_hci",overideInctPhysExam:"_a_3_ehr_physical_examination",overideInctMedicat:"_a_3_ehr_medication",overideInctPlanMan:"_a_3_ehr_plan_management",overideInctEndCare:"_a_3_ehr_end_of_care"},this.portlets={soap:"soap",soapDiag:"soapDiag",pastMed:"pastMed",pSigns:"pSings",refHci:"refHci",physExam:"physExam",medict:"medict",planMan:"planMan",endCare:"endCare"}}setAuthentication(e){this.authentication=e}setSelectedPatient(e){this.selectedPatient=e}validateRole(e,n=!0,i=!1){this.permissions=this.authentication.user.permissions,this.roleName=this.authentication.user.role.role_name,console.log("user roleName: ",this.roleName);const t=e.role_name,s=e["other-permissions"];let l=!1;if(this.authentication.user.permissions.map(n=>{"all"===e[0]?l="_a_0_all"===n.permission_id:"sudomanage"===e[0]?l="_a_0_all"===n.permission_id||"_a_1_ehr_sudomanage"===n.permission_id:"view_all_dept"===e[0]?l="_a_0_all"===n.permission_id||"_a_1_ehr_sudomanage"===n.permission_id||"_a_2_ehr_view_all_dept"===n.permission_id:"view_own_dept"===e[0]?l="_a_0_all"===n.permission_id||"_a_1_ehr_sudomanage"===n.permission_id||"_a_2_ehr_view_all_dept"===n.permission_id||"_a_3_ehr_view_own_dept"===n.permission_id:"edit_all_dept"===e[0]?l="_a_0_all"===n.permission_id||"_a_1_ehr_sudomanage"===n.permission_id||"_a_2_ehr_edit_all_dept"===n.permission_id:"edit_own_dept"===e[0]?l="_a_0_all"===n.permission_id||"_a_1_ehr_sudomanage"===n.permission_id||"_a_2_ehr_edit_all_dept"===n.permission_id||"_a_3_ehr_edit_own_dept"===n.permission_id:"override_my_patient"===e[0]?l="_a_0_all"===n.permission_id||"_a_1_ehr_sudomanage"===n.permission_id||"_a_2_ehr_override_my_patient"===n.permission_id:"soap"===e[0]?l="_a_0_all"===n.permission_id||"_a_1_ehr_sudomanage"===n.permission_id||"_a_2_ehr_override_my_patient"===n.permission_id||"_a_3_ehr_soap"===n.permission_id:"override_final_dx"===e[0]?l="_a_0_all"===n.permission_id||"_a_1_ehr_sudomanage"===n.permission_id||"_a_2_ehr_override_my_patient"===n.permission_id||"_a_4_ehr_override_final_dx"===n.permission_id||"_a_3_ehr_soap"===n.permission_id:"past_medical_history"===e[0]?l="_a_0_all"===n.permission_id||"_a_1_ehr_sudomanage"===n.permission_id||"_a_2_ehr_override_my_patient"===n.permission_id||"_a_3_ehr_past_medical_history"===n.permission_id:"pertinent_signs_and_symptoms"===e[0]?l="_a_0_all"===n.permission_id||"_a_1_ehr_sudomanage"===n.permission_id||"_a_2_ehr_override_my_patient"===n.permission_id||"_a_3_ehr_pertinent_signs_and_symptoms"===n.permission_id:"referred_hci"===e[0]?l="_a_0_all"===n.permission_id||"_a_1_ehr_sudomanage"===n.permission_id||"_a_2_ehr_override_my_patient"===n.permission_id||"_a_3_ehr_referred_hci"===n.permission_id:"physical_examination"===e[0]?l="_a_0_all"===n.permission_id||"_a_1_ehr_sudomanage"===n.permission_id||"_a_2_ehr_override_my_patient"===n.permission_id||"_a_3_ehr_physical_examination"===n.permission_id:"medication"===e[0]?l="_a_0_all"===n.permission_id||"_a_1_ehr_sudomanage"===n.permission_id||"_a_2_ehr_override_my_patient"===n.permission_id||"_a_3_ehr_medication"===n.permission_id:"plan_managem"===e[0]?l="_a_0_all"===n.permission_id||"_a_1_ehr_sudomanage"===n.permission_id||"_a_2_ehr_override_my_patient"===n.permission_id||"_a_3_ehr_plan_management"===n.permission_id:"end_of_care"===e[0]&&(l="_a_0_all"===n.permission_id||"_a_1_ehr_sudomanage"===n.permission_id||"_a_2_ehr_override_my_patient"===n.permission_id||"_a_3_ehr_end_of_care"===n.permission_id)}),i)return l;console.log("roleNames: ",t);let o=!0;if(Array.isArray(t)&&t.length>0){const e=t.findIndex(e=>(console.log("element: ",e," this.roleName: ",this.roleName),-1!=this.roleName.toUpperCase().indexOf(e.toUpperCase())));console.log("index: ",e),o=e>=0}console.log("validRole: ",o);let r=!1;return Array.isArray(s)&&s.length>0&&(r=this.arrayComparatorService.compare(s,this.permissions).length>0),console.log("validOtherPermission: ",r),!n||(console.log("selectedPatient: ",this.selectedPatient),!this.selectedPatient||1!=this.selectedPatient.is_discharged)||(console.log("is_discharged"),r)}hasAllPermission(){return this.authentication.user.permissions.some(e=>e.permission_id==this.perms.allPermission)}hasManageEhr(){return this.authentication.user.permissions.some(e=>e.permission_id==this.perms.manageEhr)}hasEdit(){return!!this.authentication.user.permissions.some(e=>e.permission_id==this.perms.editAllDept)||this.authentication.user.permissions.some(e=>e.permission_id==this.perms.editOwnDept)&&this.selectedPatient.isInMyDept}hasView(){return!!this.authentication.user.permissions.some(e=>e.permission_id==this.perms.viewAllDept)||this.authentication.user.permissions.some(e=>e.permission_id==this.perms.viewOwnDept)&&this.selectedPatient.isInMyDept}hasHigherPermission(){return this.hasAllPermission()||this.hasManageEhr()}hasOverInct(){return this.authentication.user.permissions.some(e=>e.permission_id==this.perms.overideInct)}hasDischPerm(e){if(!this.hasView()&&!this.hasEdit())return!1;if(this.hasOverInct())return!0;switch(e){case this.portlets.soap:return this.authentication.user.permissions.some(e=>e.permission_id==this.perms.overideInctSoap);case this.portlets.soapDiag:return this.authentication.user.permissions.some(e=>e.permission_id==this.perms.overideInctSoapDiag||e.permission_id==this.perms.overideInctSoapDiag2);case this.portlets.pastMed:return this.authentication.user.permissions.some(e=>e.permission_id==this.perms.overideInctPastMed);case this.portlets.pSigns:return this.authentication.user.permissions.some(e=>e.permission_id==this.perms.overideInctPsigns);case this.portlets.refHci:return this.authentication.user.permissions.some(e=>e.permission_id==this.perms.overideInctHciRef);case this.portlets.physExam:return this.authentication.user.permissions.some(e=>e.permission_id==this.perms.overideInctPhysExam);case this.portlets.medict:return this.authentication.user.permissions.some(e=>e.permission_id==this.perms.overideInctMedicat);case this.portlets.planMan:return this.authentication.user.permissions.some(e=>e.permission_id==this.perms.overideInctPlanMan);case this.portlets.endCare:return this.authentication.user.permissions.some(e=>e.permission_id==this.perms.overideInctEndCare)}return!1}isDischarged(){return!!this.selectedPatient&&1==this.selectedPatient.is_discharged}hasSoapEdit(){return!!this.hasHigherPermission()||(this.isDischarged()?this.hasDischPerm(this.portlets.soap):this.hasEdit())}hasSoapDiagEdit(){return!!this.hasHigherPermission()||(this.isDischarged()?this.hasDischPerm(this.portlets.soapDiag):this.hasEdit())}hasSoapView(){return!!(this.hasSoapEdit()||this.hasView()||this.hasEdit())}hasPastMedEdit(){return!!this.hasHigherPermission()||(this.isDischarged()?this.hasDischPerm(this.portlets.pastMed):this.hasEdit())}hasPastView(){return!!(this.hasPastMedEdit()||this.hasView()||this.hasEdit())}hasPSignsEdit(){return!!this.hasHigherPermission()||(this.isDischarged()?this.hasDischPerm(this.portlets.pSigns):this.hasEdit())}hasPSingsView(){return!!(this.hasPSignsEdit()||this.hasView()||this.hasEdit())}hasVitalSignsView(){return!!this.hasHigherPermission()||!!(this.hasView()||this.hasEdit()||this.hasEdit())}hasRefHciEdit(){return!!this.hasHigherPermission()||(this.isDischarged()?this.hasDischPerm(this.portlets.refHci):this.hasEdit())}hasRefHciView(){return!!(this.hasRefHciEdit()||this.hasView()||this.hasEdit())}hasPhysExamEdit(){return!!this.hasHigherPermission()||(this.isDischarged()?this.hasDischPerm(this.portlets.physExam):this.hasEdit())}hasPhysExamView(){return!!(this.hasPhysExamEdit()||this.hasView()||this.hasEdit())}hasResultView(){return!!this.hasHigherPermission()||!!(this.hasView()||this.hasEdit()||this.hasEdit())}hasDrugsMedsEdit(){return!!this.hasHigherPermission()||(this.isDischarged()?this.hasDischPerm(this.portlets.medict):this.hasEdit())}hasDrugsMedsView(){return!!(this.hasDrugsMedsEdit()||this.hasView()||this.hasEdit())}hasEncHistView(){return!!this.hasHigherPermission()||!!(this.hasView()||this.hasEdit()||this.hasEdit())}hasReferalsView(){return!!this.hasHigherPermission()||!!(this.hasView()||this.hasEdit()||this.hasEdit())}hasEndCareEdit(){return!!this.hasHigherPermission()||(this.isDischarged()?this.hasDischPerm(this.portlets.endCare):this.hasEdit())}hasEndCareView(){return!!(this.hasEndCareEdit()||this.hasView()||this.hasEdit())}hasPlanManEdit(){return!!this.hasHigherPermission()||(this.isDischarged()?this.hasDischPerm(this.portlets.planMan):this.hasEdit())}hasPlanManView(){return!!(this.hasPlanManEdit()||this.hasView()||this.hasEdit())}}return e.ngInjectableDef=t.bc({factory:function(){return new e(t.cc(s))},token:e,providedIn:"root"}),e})()},VM0z:function(e,n,i){"use strict";i.d(n,"a",(function(){return a}));var t=i("mrSG"),s=i("ZZ/e"),l=i("Hfim"),o=i("ucGT"),r=i("8Y7J");let a=(()=>{class e{constructor(e,n,i){this.toastCtrl=e,this.modalController=n,this.alertController=i}alertToast(e){return t.b(this,void 0,void 0,(function*(){console.log("AlertToast Message:",e);const n=yield this.toastCtrl.create({message:e,duration:8e3});n.onclick=e=>{n.dismiss()},n.present()}))}openAlertModalValidation(e,n,i,s,o="Done",r=(e=>{})){return t.b(this,void 0,void 0,(function*(){const t=yield this.modalController.create({component:l.a,cssClass:"my-custom-modal-array-css",componentProps:{alert:e,title:n,message:i,messageArray:s,ok:o}});return t.onDidDismiss().then(e=>{r(e)}),yield t.present()}))}openSearchModal(e=[],n="",i="Enter here...",s=null,l=(e=>{})){return t.b(this,void 0,void 0,(function*(){const t=yield this.modalController.create({component:o.a,cssClass:"my-custom-modal-css",componentProps:{searchData:{isForSearch:!0,libs:e,searchQuery:n,maxLength:s,placeholder:i}}});return t.onDidDismiss().then(e=>{l(e)}),yield t.present()}))}openPromptModal(e,n,i="Save",s=(e=>{}),o="Cancel",r=(e=>{})){return t.b(this,void 0,void 0,(function*(){const t=yield this.modalController.create({component:l.a,cssClass:"my-custom-modal-css",componentProps:{prompt,title:e,message:n,cancel:o,ok:i}});return t.onDidDismiss().then(e=>{s(e),r(e)}),yield t.present()}))}openAlertModal(e,n,i,s="Done",o=(e=>{})){return t.b(this,void 0,void 0,(function*(){const t=yield this.modalController.create({component:l.a,cssClass:"my-custom-modal-css",componentProps:{alert:e,title:n,message:i,ok:s}});return t.onDidDismiss().then(e=>{o(e)}),yield t.present()}))}prompNAlert(e="",n="",i="",s=[],l=[],o=!0,r=!0){return t.b(this,void 0,void 0,(function*(){this.nativeAlert=this.alertController.create({header:e,subHeader:n,message:i,backdropDismiss:o,keyboardClose:r,inputs:s,buttons:l}).then(e=>{this.nativeAlert.present()})}))}prompInputNAlert(e="",n="",i="",s=!0,l=!0,o=[],r=[],a=(()=>{}),c=(()=>{})){return t.b(this,void 0,void 0,(function*(){0==r.length&&(r=[{text:"OK",handler:e=>{a()}},{text:"Cancel",handler:e=>{c()}}]),this.nativeAlert=this.alertController.create({header:"",subHeader:"",backdropDismiss:s,keyboardClose:l,message:"",inputs:o,buttons:r}).then(e=>{this.nativeAlert.present()})}))}}return e.ngInjectableDef=r.bc({factory:function(){return new e(r.cc(s.Tb),r.cc(s.Jb),r.cc(s.a))},token:e,providedIn:"root"}),e})()}}]);