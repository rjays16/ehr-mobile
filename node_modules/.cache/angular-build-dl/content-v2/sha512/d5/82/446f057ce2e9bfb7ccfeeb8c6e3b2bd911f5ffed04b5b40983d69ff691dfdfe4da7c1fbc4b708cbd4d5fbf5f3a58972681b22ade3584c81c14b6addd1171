(window.webpackJsonp=window.webpackJsonp||[]).push([[53],{"/yGZ":function(e,n,i){"use strict";i.r(n);var t=i("8Y7J"),s=i("mrSG"),l=i("DdMz"),r=i("ZZ/e"),o=i("H+bZ"),a=i("Pasx"),u=i("n90K"),h=i("EFyh"),d=i("7ch9"),c=i("LDXv");class _{constructor(e={}){Object.assign(this,e)}}var g=i("ElRG"),m=i("uPsM"),p=i("GALt"),b=i("4zgz"),v=i("Hfim"),f=i("y2f/"),C=i("AytR"),P=i("8T+N");class w{constructor(e,n,i,t,s,l,r,o,a,u,h,d,c,g,m,p,b){this.loginApiService=e,this.router=n,this.alertController=i,this.apiService=t,this.loginService=s,this.storageService=l,this.permissionValidatorService=r,this.platform=o,this.device=a,this.uid=u,this.androidPermissions=h,this.uniqueDeviceID=d,this.loadingService=c,this.stringUtilsService=g,this.navController=m,this.modalController=p,this.splashScreen=b,this.showPassword=!1,this.loginCredentials=new _,this.username="",this.password="",this.debugging=!1,this.env=C.a,this.platform.ready().then(()=>{this.debugging=!C.a.production,console.log("this.debugging",this.debugging),this.storageService.get("url").then(e=>{e&&this.apiService.setUrl(e),this.platform.is("android")?this.androidPermissions.checkPermission(this.androidPermissions.PERMISSION.READ_PHONE_STATE).then(e=>{e.hasPermission?this.continueToApplication():this.androidPermissions.requestPermission(this.androidPermissions.PERMISSION.READ_PHONE_STATE).then(e=>{this.continueToApplication()}).catch(e=>{console.log(e)})}).catch(e=>{console.log(e)}):this.continueToApplication()})})}ionViewWillEnter(){this.platform.ready().then(()=>{console.log("ionViewWillEnter"),window.addEventListener("native.keyboardshow",this.keyboardShowHandler),window.addEventListener("native.keyboardhide",this.keyboardHideHandler),window.addEventListener("touchstart",this.tapCoordinates)})}ionViewWillLeave(){console.log("ionViewWillLeave"),window.removeEventListener("native.keyboardshow",this.keyboardShowHandler),window.removeEventListener("native.keyboardhide",this.keyboardHideHandler),window.removeEventListener("touchstart",this.tapCoordinates),this.removeIonAppStyles()}continueToApplication(){this.loginApiService.setUrl(this.apiService.getUrl()),this.uniqueDeviceID.get().then(e=>{console.log(e),this.loginCredentials.device_device_unique_id=e}).catch(e=>{console.log(e)}),this.platform.ready().then(e=>{this.device&&(this.loginCredentials.device_platform=this.device.platform,this.loginCredentials.device_uuid=this.device.uuid,this.loginCredentials.device_model=this.device.model)}),this.storageService.get("isAutologin").then(e=>{console.log("isAutologin",e),"true"!=e&&null!=e||this.storageService.getObject("authentication").then(e=>{console.log("authentication: ",e),e?(this.platform.is("android")||this.platform.is("ios")||this.loadingService.present(),this.loginApiService.setToken(e.token),this.loginApiService.getConfigAndDefaults().subscribe(n=>{this.loadingService.dismiss().then(i=>{console.log("configAndDefaults: ",n),n&&(n.code&&200!==n.code?(this.splashScreen.hide(),this.openAlertModal("fail","Failed",n.message,"Ok")):(this.loginService.setAuthentication(e),this.permissionValidatorService.setAuthentication(e),this.loginService.setConfigAndDefaults(n),this.loginService.setTestServerIdent(e.isTestServer),e.user.permissions=n["user-permissions"].map(e=>new P.a(e)),this.storageService.set("authentication",JSON.stringify(e)),this.navController.navigateRoot("/menu").then(e=>{this.splashScreen.hide()})))})},e=>{console.log("Failed",e),this.loadingService.dismiss().then(n=>{this.splashScreen.hide(),this.storageService.remove("authentication");const i=this.stringUtilsService.parseErrorMessage(e);this.openAlertModal("fail","Failed",i,"Ok")})})):this.loadingService.dismiss().then(e=>{this.splashScreen.hide()})})})}ngOnInit(){}viewPassword(){const e=document.getElementById("password");"password"===e.type?(e.type="text",this.showPassword=!0):(e.type="password",this.showPassword=!1)}generateRandomText(e,n=0){let i="";const t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",s=t.length;for(let l=0;l<e;l++)n>0&&l>=n&&l%n==0&&(i+="-"),i+=t.charAt(Math.floor(Math.random()*s));return i}addDefaultCredentials(){this.loginCredentials.device_uuid||(this.loginCredentials.device_uuid=this.generateRandomText(16,4)),this.loginCredentials.device_device_unique_id||(this.loginCredentials.device_device_unique_id=this.generateRandomText(16,4)),this.loginCredentials.device_model||(this.loginCredentials.device_model="model-"+this.generateRandomText(5)),this.loginCredentials.device_platform||(this.loginCredentials.device_platform="platform-"+this.generateRandomText(5))}loginClick(){this.loginCredentials.username=this.username,this.loginCredentials.password=this.password,this.addDefaultCredentials(),this.errorMessage="",this.loadingService.present(),console.log("login clicked",this.loginCredentials),this.loginApiService.login(this.loginCredentials).subscribe(e=>{console.log(e),e&&e.code&&200===e.code?(console.log("Success"),this.loginService.setAuthentication(e),this.loginService.setTestServerIdent(e.isTestServer),this.permissionValidatorService.setAuthentication(e),this.loginApiService.setToken(e.token),this.storageService.setObject("authentication",e).then(e=>{this.loginApiService.getConfigAndDefaults().subscribe(e=>{this.loadingService.dismiss().then(n=>{e&&e.code&&200!==e.code?this.openAlertModal("fail","Failed",e.message,"Ok"):(this.storageService.setObject("credentials",this.loginCredentials),this.loginService.setConfigAndDefaults(e),this.navController.navigateRoot("/menu"))})},e=>{console.log("Failed",e),this.loadingService.dismiss().then(n=>{const i=this.stringUtilsService.parseErrorMessage(e);this.openAlertModal("fail","Failed",i,"Ok")})})}).catch(e=>{console.log("error",e),this.loadingService.dismiss()})):(console.log("Login Failed"),this.loadingService.dismiss().then(n=>{this.openAlertModal("fail","Failed",e.message,"Ok")}))},e=>{console.log(e),this.loadingService.dismiss().then(n=>{const i=this.stringUtilsService.parseErrorMessage(e);401!==e.status?this.openAlertModal("fail","Failed",i,"Ok"):this.errorMessage=i})})}onUsernameFocus(e){console.log("onUsernameFocus"),this.scrollTo("username")}onPasswordFocus(e){console.log("onPasswordFocus"),this.scrollTo("password")}setUrl(){this.presentPrompt()}presentPrompt(){return s.b(this,void 0,void 0,(function*(){let e=this.apiService.getUrl();e||(e="http://"),this.alertController.create({message:"Set Url",inputs:[{name:"url_online",type:"radio",label:"Online",value:C.a.url,checked:e==C.a.url},{name:"url_local",type:"radio",label:"Local",value:C.a.url_local,checked:e==C.a.url_local}],buttons:[{text:"Others",handler:e=>{console.log("Others clicked"),this.presentPromptOthersurl()}},{text:"Cancel",handler:e=>{console.log("Cancel clicked")}},{text:"OK",handler:e=>{let n=e;n.startsWith("http://")||(n="http://"+n),console.log(n),this.storageService.set("url",n).then(e=>{this.apiService.setUrl(n),this.loginApiService.setUrl(this.apiService.getUrl())})}}]}).then(e=>{e.present()})}))}presentPromptOthersurl(){return s.b(this,void 0,void 0,(function*(){this.alertController.create({message:"Set Url",inputs:[{name:"url",label:"Others",type:"text",placeholder:"URL",value:"http://"}],buttons:[{text:"Cancel",handler:e=>{console.log("Cancel clicked")}},{text:"OK",handler:e=>{let n=e.url;n.startsWith("http://")||(n="http://"+n),console.log(n),this.storageService.set("url",n).then(e=>{this.apiService.setUrl(n),this.loginApiService.setUrl(this.apiService.getUrl())})}}]}).then(e=>{e.present()})}))}openAlertModal(e,n,i,t="Done"){return s.b(this,void 0,void 0,(function*(){const s=yield this.modalController.create({component:v.a,cssClass:"my-custom-modal-css",componentProps:{alert:e,title:n,message:i,ok:t}});return s.onDidDismiss().then(e=>{null!==e&&console.log("result.data: ",e.data)}),yield s.present()}))}tapCoordinates(e){this.y=e.touches[0].clientY,this.h=window.innerHeight,this.offsetY=this.h-this.y,console.log("offset: ",this.offsetY)}keyboardShowHandler(e){const n=e.keyboardHeight;console.log("show: ",e.keyboardHeight);const i=document.querySelector("ion-app").style;i.bottom=n+"px",console.log(i.bottom)}keyboardHideHandler(){console.log("gone"),document.querySelector("ion-app").removeAttribute("style")}removeIonAppStyles(){document.querySelector("ion-app").removeAttribute("style")}scrollTo(e){const n=document.getElementById(e),i=n.offsetTop,t=n.offsetHeight;console.log("offsetTop: ",i),console.log("offsetHeight: ",t,2*t),this.content.scrollToPoint(0,i+2*t,500)}}class y{}var D=i("pMnS"),S=i("oBZk"),E=i("s7LF"),M=i("SVse"),O=i("iInd"),k=t.Bb({encapsulation:0,styles:[["ion-header[_ngcontent-%COMP%]{height:120px;z-index:1;background-color:var(--ion-color-primary)}ion-header[_ngcontent-%COMP%]   .imageCont[_ngcontent-%COMP%]{max-width:120px;padding:10px;background-color:#c1e8e4;border-radius:50%;z-index:1;position:relative;display:block;bottom:-60px;margin-left:auto;margin-right:auto}ion-header[_ngcontent-%COMP%]   .imageCont[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{border-radius:50%;border:solid 5px var(--ion-color-primary)}ion-content[_ngcontent-%COMP%]{font-family:sans-serif;max-height:100%;width:100%;--background:#fff url('gray-bg.57a3c9c7161fe815bfc6.jpg') no-repeat center center/cover}ion-content[_ngcontent-%COMP%]   .pageTitle[_ngcontent-%COMP%]{width:100%;position:absolute;top:120px}ion-content[_ngcontent-%COMP%]   .pageTitle[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%]{font-weight:600;color:#fa385a;font-size:1.3em;text-align:center}ion-content[_ngcontent-%COMP%]   .bottomDiv[_ngcontent-%COMP%]{width:100%;position:absolute;-webkit-transform:translate(0,75%);transform:translate(0,75%)}ion-content[_ngcontent-%COMP%]   .bottomDiv[_ngcontent-%COMP%]   .formContainer[_ngcontent-%COMP%]{border:1px solid #ddd;width:90%;margin:auto;background-color:#fff}ion-content[_ngcontent-%COMP%]   .bottomDiv[_ngcontent-%COMP%]   .formContainer[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%]{color:#629efc;font-weight:600;font-size:1.1em}ion-content[_ngcontent-%COMP%]   .bottomDiv[_ngcontent-%COMP%]   .formContainer[_ngcontent-%COMP%]   ion-button[_ngcontent-%COMP%]{background-color:#629efc;color:#fff}ion-content[_ngcontent-%COMP%]   .bottomDiv[_ngcontent-%COMP%]   .formContainer[_ngcontent-%COMP%]   .left-icon[_ngcontent-%COMP%]{color:#629efc;margin-right:10px}ion-content[_ngcontent-%COMP%]   .bottomDiv[_ngcontent-%COMP%]   .formContainer[_ngcontent-%COMP%]   .uncoverPassword[_ngcontent-%COMP%]{color:#ccc}ion-content[_ngcontent-%COMP%]   .copyright[_ngcontent-%COMP%]{font-size:.75em;width:100%;margin-top:10px;text-align:center}.settings[_ngcontent-%COMP%]{position:fixed;top:0;right:0;margin-top:calc(10px + var(--ion-safe-area-top,0));margin-right:10px;z-index:2}"]],data:{}});function I(e){return t.Yb(0,[(e()(),t.Db(0,0,null,null,4,"ion-chip",[["mode","ios"]],null,null,null,S.kb,S.i)),t.Cb(1,49152,null,0,r.t,[t.j,t.p,t.G],{mode:[0,"mode"]},null),(e()(),t.Db(2,0,null,0,2,"ion-label",[["color","danger"]],null,null,null,S.Eb,S.C)),t.Cb(3,49152,null,0,r.O,[t.j,t.p,t.G],{color:[0,"color"]},null),(e()(),t.Wb(4,0,["",""]))],(function(e,n){e(n,1,0,"ios"),e(n,3,0,"danger")}),(function(e,n){e(n,4,0,n.component.errorMessage)}))}function A(e){return t.Yb(0,[(e()(),t.Db(0,0,null,null,1,"ion-icon",[["class","uncoverPassword"],["ios","ios-eye"],["md","md-eye"]],null,[[null,"click"]],(function(e,n,i){var t=!0;return"click"===n&&(t=!1!==e.component.viewPassword()&&t),t}),S.ub,S.s)),t.Cb(1,49152,null,0,r.D,[t.j,t.p,t.G],{ios:[0,"ios"],md:[1,"md"]},null)],(function(e,n){e(n,1,0,"ios-eye","md-eye")}),null)}function x(e){return t.Yb(0,[(e()(),t.Db(0,0,null,null,1,"ion-icon",[["class","uncoverPassword"],["ios","ios-eye-off"],["md","md-eye-off"]],null,[[null,"click"]],(function(e,n,i){var t=!0;return"click"===n&&(t=!1!==e.component.viewPassword()&&t),t}),S.ub,S.s)),t.Cb(1,49152,null,0,r.D,[t.j,t.p,t.G],{ios:[0,"ios"],md:[1,"md"]},null)],(function(e,n){e(n,1,0,"ios-eye-off","md-eye-off")}),null)}function T(e){return t.Yb(0,[t.Ub(671088640,1,{content:0}),(e()(),t.Db(1,0,null,null,7,"ion-header",[],null,null,null,S.tb,S.r)),t.Cb(2,49152,null,0,r.C,[t.j,t.p,t.G],null,null),(e()(),t.Db(3,0,null,0,1,"div",[["class","imageCont"]],null,null,null,null,null)),(e()(),t.Db(4,0,null,null,0,"img",[["alt","logo"],["src","../../../assets/images/logo.jpg"]],null,null,null,null,null)),(e()(),t.Db(5,0,null,0,3,"ion-button",[["class","settings"]],null,[[null,"click"]],(function(e,n,i){var t=!0;return"click"===n&&(t=!1!==e.component.setUrl()&&t),t}),S.fb,S.d)),t.Cb(6,49152,null,0,r.l,[t.j,t.p,t.G],null,null),(e()(),t.Db(7,0,null,0,1,"ion-icon",[["name","settings"]],null,null,null,S.ub,S.s)),t.Cb(8,49152,null,0,r.D,[t.j,t.p,t.G],{name:[0,"name"]},null),(e()(),t.Db(9,0,null,null,67,"ion-content",[["class","background"]],null,null,null,S.mb,S.k)),t.Cb(10,49152,[[1,4],["content",4]],0,r.v,[t.j,t.p,t.G],null,null),(e()(),t.Db(11,0,null,0,4,"div",[["class","pageTitle"]],null,null,null,null,null)),(e()(),t.Db(12,0,null,null,3,"h4",[],null,null,null,null,null)),(e()(),t.Wb(-1,null,["SOUTHERN PHILIPPINES"])),(e()(),t.Db(14,0,null,null,0,"br",[],null,null,null,null,null)),(e()(),t.Wb(-1,null,["MEDICAL CENTER"])),(e()(),t.Db(16,0,null,0,60,"div",[["class","bottomDiv"]],null,null,null,null,null)),(e()(),t.Db(17,0,null,null,54,"div",[["class","formContainer"]],null,null,null,null,null)),(e()(),t.Db(18,0,null,null,53,"form",[["novalidate",""]],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"submit"],[null,"reset"]],(function(e,n,i){var s=!0;return"submit"===n&&(s=!1!==t.Pb(e,20).onSubmit(i)&&s),"reset"===n&&(s=!1!==t.Pb(e,20).onReset()&&s),s}),null,null)),t.Cb(19,16384,null,0,E.y,[],null,null),t.Cb(20,4210688,[["form",4]],0,E.p,[[8,null],[8,null]],null,null),t.Tb(2048,null,E.b,null,[E.p]),t.Cb(22,16384,null,0,E.o,[[4,E.b]],null,null),(e()(),t.Db(23,0,null,null,48,"ion-grid",[],null,null,null,S.sb,S.q)),t.Cb(24,49152,null,0,r.B,[t.j,t.p,t.G],null,null),(e()(),t.Db(25,0,null,0,46,"ion-row",[["class","ion-justify-content-center"],["color","primary"]],null,null,null,S.Ob,S.M)),t.Cb(26,49152,null,0,r.kb,[t.j,t.p,t.G],null,null),(e()(),t.Db(27,0,null,0,44,"ion-col",[["class","ion-align-self-center"],["size-lg","5"],["size-md","6"],["size-xs","12"]],null,null,null,S.lb,S.j)),t.Cb(28,49152,null,0,r.u,[t.j,t.p,t.G],null,null),(e()(),t.Db(29,0,null,0,2,"div",[["class","ion-text-center"]],null,null,null,null,null)),(e()(),t.Db(30,0,null,null,1,"h4",[],null,null,null,null,null)),(e()(),t.Wb(-1,null,["LOGIN TO YOUR ACCOUNT"])),(e()(),t.Db(32,0,null,0,2,"div",[["class","ion-text-center"]],null,null,null,null,null)),(e()(),t.sb(16777216,null,null,1,null,I)),t.Cb(34,16384,null,0,M.l,[t.Y,t.U],{ngIf:[0,"ngIf"]},null),(e()(),t.Db(35,0,null,0,32,"div",[["class","ion-padding"]],null,null,null,null,null)),(e()(),t.Db(36,0,null,null,13,"ion-item",[],null,null,null,S.Db,S.w)),t.Cb(37,49152,null,0,r.I,[t.j,t.p,t.G],null,null),(e()(),t.Db(38,0,null,0,1,"ion-icon",[["class","left-icon"],["ios","ios-person"],["md","md-person"]],null,null,null,S.ub,S.s)),t.Cb(39,49152,null,0,r.D,[t.j,t.p,t.G],{ios:[0,"ios"],md:[1,"md"]},null),(e()(),t.Db(40,0,null,0,9,"ion-input",[["id","username"],["minlength","1"],["name","username"],["placeholder","Username"],["required",""]],[[1,"required",0],[1,"minlength",0],[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"ngModelChange"],[null,"ionFocus"],[null,"ionBlur"],[null,"ionChange"]],(function(e,n,i){var s=!0,l=e.component;return"ionBlur"===n&&(s=!1!==t.Pb(e,44)._handleBlurEvent(i.target)&&s),"ionChange"===n&&(s=!1!==t.Pb(e,44)._handleInputEvent(i.target)&&s),"ngModelChange"===n&&(s=!1!==(l.username=i)&&s),"ionFocus"===n&&(s=!1!==l.onUsernameFocus(i)&&s),s}),S.xb,S.v)),t.Cb(41,16384,null,0,E.t,[],{required:[0,"required"]},null),t.Cb(42,540672,null,0,E.j,[],{minlength:[0,"minlength"]},null),t.Tb(1024,null,E.k,(function(e,n){return[e,n]}),[E.t,E.j]),t.Cb(44,16384,null,0,r.Sb,[t.p],null,null),t.Tb(1024,null,E.l,(function(e){return[e]}),[r.Sb]),t.Cb(46,671744,null,0,E.q,[[2,E.b],[6,E.k],[8,null],[6,E.l]],{name:[0,"name"],model:[1,"model"]},{update:"ngModelChange"}),t.Tb(2048,null,E.m,null,[E.q]),t.Cb(48,16384,null,0,E.n,[[4,E.m]],null,null),t.Cb(49,49152,null,0,r.H,[t.j,t.p,t.G],{minlength:[0,"minlength"],name:[1,"name"],placeholder:[2,"placeholder"],required:[3,"required"]},null),(e()(),t.Db(50,0,null,null,17,"ion-item",[],null,null,null,S.Db,S.w)),t.Cb(51,49152,null,0,r.I,[t.j,t.p,t.G],null,null),(e()(),t.Db(52,0,null,0,1,"ion-icon",[["class","left-icon"],["ios","ios-lock"],["md","md-lock"]],null,null,null,S.ub,S.s)),t.Cb(53,49152,null,0,r.D,[t.j,t.p,t.G],{ios:[0,"ios"],md:[1,"md"]},null),(e()(),t.Db(54,0,null,0,9,"ion-input",[["id","password"],["minlength","1"],["name","password"],["placeholder","\u2022\u2022\u2022\u2022\u2022\u2022\u2022"],["required",""],["type","password"]],[[1,"required",0],[1,"minlength",0],[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"ngModelChange"],[null,"ionFocus"],[null,"ionBlur"],[null,"ionChange"]],(function(e,n,i){var s=!0,l=e.component;return"ionBlur"===n&&(s=!1!==t.Pb(e,58)._handleBlurEvent(i.target)&&s),"ionChange"===n&&(s=!1!==t.Pb(e,58)._handleInputEvent(i.target)&&s),"ngModelChange"===n&&(s=!1!==(l.password=i)&&s),"ionFocus"===n&&(s=!1!==l.onPasswordFocus(i)&&s),s}),S.xb,S.v)),t.Cb(55,16384,null,0,E.t,[],{required:[0,"required"]},null),t.Cb(56,540672,null,0,E.j,[],{minlength:[0,"minlength"]},null),t.Tb(1024,null,E.k,(function(e,n){return[e,n]}),[E.t,E.j]),t.Cb(58,16384,null,0,r.Sb,[t.p],null,null),t.Tb(1024,null,E.l,(function(e){return[e]}),[r.Sb]),t.Cb(60,671744,null,0,E.q,[[2,E.b],[6,E.k],[8,null],[6,E.l]],{name:[0,"name"],model:[1,"model"]},{update:"ngModelChange"}),t.Tb(2048,null,E.m,null,[E.q]),t.Cb(62,16384,null,0,E.n,[[4,E.m]],null,null),t.Cb(63,49152,null,0,r.H,[t.j,t.p,t.G],{minlength:[0,"minlength"],name:[1,"name"],placeholder:[2,"placeholder"],required:[3,"required"],type:[4,"type"]},null),(e()(),t.sb(16777216,null,0,1,null,A)),t.Cb(65,16384,null,0,M.l,[t.Y,t.U],{ngIf:[0,"ngIf"]},null),(e()(),t.sb(16777216,null,0,1,null,x)),t.Cb(67,16384,null,0,M.l,[t.Y,t.U],{ngIf:[0,"ngIf"]},null),(e()(),t.Db(68,0,null,0,3,"div",[["class","ion-padding"]],null,null,null,null,null)),(e()(),t.Db(69,0,null,null,2,"ion-button",[["expand","block"],["size","default"]],null,[[null,"click"]],(function(e,n,i){var t=!0;return"click"===n&&(t=!1!==e.component.loginClick()&&t),t}),S.fb,S.d)),t.Cb(70,49152,null,0,r.l,[t.j,t.p,t.G],{disabled:[0,"disabled"],expand:[1,"expand"],size:[2,"size"]},null),(e()(),t.Wb(-1,0,["Login"])),(e()(),t.Db(72,0,null,null,4,"div",[["class","copyright"]],null,null,null,null,null)),(e()(),t.Db(73,0,null,null,3,"p",[],null,null,null,null,null)),(e()(),t.Wb(-1,null,["2019 \xa9 Segworks Technologies Corporation"])),(e()(),t.Db(75,0,null,null,0,"br",[],null,null,null,null,null)),(e()(),t.Wb(76,null,["Build ",""]))],(function(e,n){var i=n.component;e(n,8,0,"settings"),e(n,34,0,i.errorMessage),e(n,39,0,"ios-person","md-person"),e(n,41,0,""),e(n,42,0,"1"),e(n,46,0,"username",i.username),e(n,49,0,"1","username","Username",""),e(n,53,0,"ios-lock","md-lock"),e(n,55,0,""),e(n,56,0,"1"),e(n,60,0,"password",i.password),e(n,63,0,"1","password","\u2022\u2022\u2022\u2022\u2022\u2022\u2022","","password"),e(n,65,0,!i.showPassword),e(n,67,0,i.showPassword),e(n,70,0,t.Pb(n,20).invalid,"block","default")}),(function(e,n){var i=n.component;e(n,18,0,t.Pb(n,22).ngClassUntouched,t.Pb(n,22).ngClassTouched,t.Pb(n,22).ngClassPristine,t.Pb(n,22).ngClassDirty,t.Pb(n,22).ngClassValid,t.Pb(n,22).ngClassInvalid,t.Pb(n,22).ngClassPending),e(n,40,0,t.Pb(n,41).required?"":null,t.Pb(n,42).minlength?t.Pb(n,42).minlength:null,t.Pb(n,48).ngClassUntouched,t.Pb(n,48).ngClassTouched,t.Pb(n,48).ngClassPristine,t.Pb(n,48).ngClassDirty,t.Pb(n,48).ngClassValid,t.Pb(n,48).ngClassInvalid,t.Pb(n,48).ngClassPending),e(n,54,0,t.Pb(n,55).required?"":null,t.Pb(n,56).minlength?t.Pb(n,56).minlength:null,t.Pb(n,62).ngClassUntouched,t.Pb(n,62).ngClassTouched,t.Pb(n,62).ngClassPristine,t.Pb(n,62).ngClassDirty,t.Pb(n,62).ngClassValid,t.Pb(n,62).ngClassInvalid,t.Pb(n,62).ngClassPending),e(n,76,0,null==i.env?null:i.env.build)}))}function H(e){return t.Yb(0,[(e()(),t.Db(0,0,null,null,1,"app-login",[],null,null,null,T,k)),t.Cb(1,114688,null,0,w,[l.a,O.m,r.a,o.a,h.a,u.a,c.a,r.Nb,g.a,p.a,b.a,m.a,d.a,a.a,r.Kb,r.Jb,f.a],null,null)],(function(e,n){e(n,1,0)}),null)}var j=t.zb("app-login",w,H,{},{},[]);i.d(n,"LoginPageModuleNgFactory",(function(){return U}));var U=t.Ab(y,[],(function(e){return t.Mb([t.Nb(512,t.m,t.lb,[[8,[D.a,j]],[3,t.m],t.E]),t.Nb(4608,M.n,M.m,[t.A,[2,M.C]]),t.Nb(4608,E.w,E.w,[]),t.Nb(4608,r.b,r.b,[t.G,t.g]),t.Nb(4608,r.Jb,r.Jb,[r.b,t.m,t.w]),t.Nb(4608,r.Ob,r.Ob,[r.b,t.m,t.w]),t.Nb(1073742336,M.c,M.c,[]),t.Nb(1073742336,E.v,E.v,[]),t.Nb(1073742336,E.i,E.i,[]),t.Nb(1073742336,r.Fb,r.Fb,[]),t.Nb(1073742336,O.q,O.q,[[2,O.v],[2,O.m]]),t.Nb(1073742336,y,y,[]),t.Nb(1024,O.k,(function(){return[[{path:"",component:w}]]}),[])])}))},EFyh:function(e,n,i){"use strict";i.d(n,"a",(function(){return s}));var t=i("8Y7J");let s=(()=>{class e{constructor(){this.inTestServer=!1}getCredentials(){return this.credentials}setTestServerIdent(e){this.inTestServer=1==e,console.log("this.inTestServer",this.inTestServer)}setCredentials(e){this.credentials=e}getAuthentication(){return this.authentication}setAuthentication(e){this.authentication=e}getConfigAndDefaults(){return this.configAndDefaults}setConfigAndDefaults(e){this.configAndDefaults=e}}return e.ngInjectableDef=t.bc({factory:function(){return new e},token:e,providedIn:"root"}),e})()},"H+bZ":function(e,n,i){"use strict";i.d(n,"a",(function(){return l}));var t=i("AytR"),s=i("8Y7J");let l=(()=>{class e{constructor(){this.url=t.a.url}getUrl(){return this.url}setUrl(e){this.url=e}}return e.ngInjectableDef=s.bc({factory:function(){return new e},token:e,providedIn:"root"}),e})()},LDXv:function(e,n,i){"use strict";var t=i("8Y7J");let s=(()=>{class e{constructor(){}compare(e,n){const i={};return e.forEach(e=>n.forEach(n=>{e.id===n.id&&(i[e.id]=i[e.id]+1||1)})),Object.keys(i)}}return e.ngInjectableDef=t.bc({factory:function(){return new e},token:e,providedIn:"root"}),e})();i.d(n,"a",(function(){return l}));let l=(()=>{class e{constructor(e){this.arrayComparatorService=e,this.throwsErrorCode=5011,this.perms={allPermission:"_a_0_all",manageEhr:"_a_1_ehr_sudomanage",viewAllDept:"_a_2_ehr_view_all_dept",viewOwnDept:"_a_3_ehr_view_own_dept",editAllDept:"_a_2_ehr_edit_all_dept",editOwnDept:"_a_3_ehr_edit_own_dept",overideInct:"_a_2_ehr_override_my_patient",overideInctSoap:"_a_3_ehr_soap",overideInctSoapDiag:"_a_2_ehr_override_final_dx",overideInctSoapDiag2:"_a_4_ehr_override_final_dx",overideInctPastMed:"_a_3_ehr_past_medical_history",overideInctPsigns:"_a_3_ehr_pertinent_signs_and_symptoms",overideInctHciRef:"_a_3_ehr_referred_hci",overideInctPhysExam:"_a_3_ehr_physical_examination",overideInctMedicat:"_a_3_ehr_medication",overideInctPlanMan:"_a_3_ehr_plan_management",overideInctEndCare:"_a_3_ehr_end_of_care"},this.portlets={soap:"soap",soapDiag:"soapDiag",pastMed:"pastMed",pSigns:"pSings",refHci:"refHci",physExam:"physExam",medict:"medict",planMan:"planMan",endCare:"endCare"}}setAuthentication(e){this.authentication=e}setSelectedPatient(e){this.selectedPatient=e}validateRole(e,n=!0,i=!1){this.permissions=this.authentication.user.permissions,this.roleName=this.authentication.user.role.role_name,console.log("user roleName: ",this.roleName);const t=e.role_name,s=e["other-permissions"];let l=!1;if(this.authentication.user.permissions.map(n=>{"all"===e[0]?l="_a_0_all"===n.permission_id:"sudomanage"===e[0]?l="_a_0_all"===n.permission_id||"_a_1_ehr_sudomanage"===n.permission_id:"view_all_dept"===e[0]?l="_a_0_all"===n.permission_id||"_a_1_ehr_sudomanage"===n.permission_id||"_a_2_ehr_view_all_dept"===n.permission_id:"view_own_dept"===e[0]?l="_a_0_all"===n.permission_id||"_a_1_ehr_sudomanage"===n.permission_id||"_a_2_ehr_view_all_dept"===n.permission_id||"_a_3_ehr_view_own_dept"===n.permission_id:"edit_all_dept"===e[0]?l="_a_0_all"===n.permission_id||"_a_1_ehr_sudomanage"===n.permission_id||"_a_2_ehr_edit_all_dept"===n.permission_id:"edit_own_dept"===e[0]?l="_a_0_all"===n.permission_id||"_a_1_ehr_sudomanage"===n.permission_id||"_a_2_ehr_edit_all_dept"===n.permission_id||"_a_3_ehr_edit_own_dept"===n.permission_id:"override_my_patient"===e[0]?l="_a_0_all"===n.permission_id||"_a_1_ehr_sudomanage"===n.permission_id||"_a_2_ehr_override_my_patient"===n.permission_id:"soap"===e[0]?l="_a_0_all"===n.permission_id||"_a_1_ehr_sudomanage"===n.permission_id||"_a_2_ehr_override_my_patient"===n.permission_id||"_a_3_ehr_soap"===n.permission_id:"override_final_dx"===e[0]?l="_a_0_all"===n.permission_id||"_a_1_ehr_sudomanage"===n.permission_id||"_a_2_ehr_override_my_patient"===n.permission_id||"_a_4_ehr_override_final_dx"===n.permission_id||"_a_3_ehr_soap"===n.permission_id:"past_medical_history"===e[0]?l="_a_0_all"===n.permission_id||"_a_1_ehr_sudomanage"===n.permission_id||"_a_2_ehr_override_my_patient"===n.permission_id||"_a_3_ehr_past_medical_history"===n.permission_id:"pertinent_signs_and_symptoms"===e[0]?l="_a_0_all"===n.permission_id||"_a_1_ehr_sudomanage"===n.permission_id||"_a_2_ehr_override_my_patient"===n.permission_id||"_a_3_ehr_pertinent_signs_and_symptoms"===n.permission_id:"referred_hci"===e[0]?l="_a_0_all"===n.permission_id||"_a_1_ehr_sudomanage"===n.permission_id||"_a_2_ehr_override_my_patient"===n.permission_id||"_a_3_ehr_referred_hci"===n.permission_id:"physical_examination"===e[0]?l="_a_0_all"===n.permission_id||"_a_1_ehr_sudomanage"===n.permission_id||"_a_2_ehr_override_my_patient"===n.permission_id||"_a_3_ehr_physical_examination"===n.permission_id:"medication"===e[0]?l="_a_0_all"===n.permission_id||"_a_1_ehr_sudomanage"===n.permission_id||"_a_2_ehr_override_my_patient"===n.permission_id||"_a_3_ehr_medication"===n.permission_id:"plan_managem"===e[0]?l="_a_0_all"===n.permission_id||"_a_1_ehr_sudomanage"===n.permission_id||"_a_2_ehr_override_my_patient"===n.permission_id||"_a_3_ehr_plan_management"===n.permission_id:"end_of_care"===e[0]&&(l="_a_0_all"===n.permission_id||"_a_1_ehr_sudomanage"===n.permission_id||"_a_2_ehr_override_my_patient"===n.permission_id||"_a_3_ehr_end_of_care"===n.permission_id)}),i)return l;console.log("roleNames: ",t);let r=!0;if(Array.isArray(t)&&t.length>0){const e=t.findIndex(e=>(console.log("element: ",e," this.roleName: ",this.roleName),-1!=this.roleName.toUpperCase().indexOf(e.toUpperCase())));console.log("index: ",e),r=e>=0}console.log("validRole: ",r);let o=!1;return Array.isArray(s)&&s.length>0&&(o=this.arrayComparatorService.compare(s,this.permissions).length>0),console.log("validOtherPermission: ",o),!n||(console.log("selectedPatient: ",this.selectedPatient),!this.selectedPatient||1!=this.selectedPatient.is_discharged)||(console.log("is_discharged"),o)}hasAllPermission(){return this.authentication.user.permissions.some(e=>e.permission_id==this.perms.allPermission)}hasManageEhr(){return this.authentication.user.permissions.some(e=>e.permission_id==this.perms.manageEhr)}hasEdit(){return!!this.authentication.user.permissions.some(e=>e.permission_id==this.perms.editAllDept)||this.authentication.user.permissions.some(e=>e.permission_id==this.perms.editOwnDept)&&this.selectedPatient.isInMyDept}hasView(){return!!this.authentication.user.permissions.some(e=>e.permission_id==this.perms.viewAllDept)||this.authentication.user.permissions.some(e=>e.permission_id==this.perms.viewOwnDept)&&this.selectedPatient.isInMyDept}hasHigherPermission(){return this.hasAllPermission()||this.hasManageEhr()}hasOverInct(){return this.authentication.user.permissions.some(e=>e.permission_id==this.perms.overideInct)}hasDischPerm(e){if(!this.hasView()&&!this.hasEdit())return!1;if(this.hasOverInct())return!0;switch(e){case this.portlets.soap:return this.authentication.user.permissions.some(e=>e.permission_id==this.perms.overideInctSoap);case this.portlets.soapDiag:return this.authentication.user.permissions.some(e=>e.permission_id==this.perms.overideInctSoapDiag||e.permission_id==this.perms.overideInctSoapDiag2);case this.portlets.pastMed:return this.authentication.user.permissions.some(e=>e.permission_id==this.perms.overideInctPastMed);case this.portlets.pSigns:return this.authentication.user.permissions.some(e=>e.permission_id==this.perms.overideInctPsigns);case this.portlets.refHci:return this.authentication.user.permissions.some(e=>e.permission_id==this.perms.overideInctHciRef);case this.portlets.physExam:return this.authentication.user.permissions.some(e=>e.permission_id==this.perms.overideInctPhysExam);case this.portlets.medict:return this.authentication.user.permissions.some(e=>e.permission_id==this.perms.overideInctMedicat);case this.portlets.planMan:return this.authentication.user.permissions.some(e=>e.permission_id==this.perms.overideInctPlanMan);case this.portlets.endCare:return this.authentication.user.permissions.some(e=>e.permission_id==this.perms.overideInctEndCare)}return!1}isDischarged(){return!!this.selectedPatient&&1==this.selectedPatient.is_discharged}hasSoapEdit(){return!!this.hasHigherPermission()||(this.isDischarged()?this.hasDischPerm(this.portlets.soap):this.hasEdit())}hasSoapDiagEdit(){return!!this.hasHigherPermission()||(this.isDischarged()?this.hasDischPerm(this.portlets.soapDiag):this.hasEdit())}hasSoapView(){return!!(this.hasSoapEdit()||this.hasView()||this.hasEdit())}hasPastMedEdit(){return!!this.hasHigherPermission()||(this.isDischarged()?this.hasDischPerm(this.portlets.pastMed):this.hasEdit())}hasPastView(){return!!(this.hasPastMedEdit()||this.hasView()||this.hasEdit())}hasPSignsEdit(){return!!this.hasHigherPermission()||(this.isDischarged()?this.hasDischPerm(this.portlets.pSigns):this.hasEdit())}hasPSingsView(){return!!(this.hasPSignsEdit()||this.hasView()||this.hasEdit())}hasVitalSignsView(){return!!this.hasHigherPermission()||!!(this.hasView()||this.hasEdit()||this.hasEdit())}hasRefHciEdit(){return!!this.hasHigherPermission()||(this.isDischarged()?this.hasDischPerm(this.portlets.refHci):this.hasEdit())}hasRefHciView(){return!!(this.hasRefHciEdit()||this.hasView()||this.hasEdit())}hasPhysExamEdit(){return!!this.hasHigherPermission()||(this.isDischarged()?this.hasDischPerm(this.portlets.physExam):this.hasEdit())}hasPhysExamView(){return!!(this.hasPhysExamEdit()||this.hasView()||this.hasEdit())}hasResultView(){return!!this.hasHigherPermission()||!!(this.hasView()||this.hasEdit()||this.hasEdit())}hasDrugsMedsEdit(){return!!this.hasHigherPermission()||(this.isDischarged()?this.hasDischPerm(this.portlets.medict):this.hasEdit())}hasDrugsMedsView(){return!!(this.hasDrugsMedsEdit()||this.hasView()||this.hasEdit())}hasEncHistView(){return!!this.hasHigherPermission()||!!(this.hasView()||this.hasEdit()||this.hasEdit())}hasReferalsView(){return!!this.hasHigherPermission()||!!(this.hasView()||this.hasEdit()||this.hasEdit())}hasEndCareEdit(){return!!this.hasHigherPermission()||(this.isDischarged()?this.hasDischPerm(this.portlets.endCare):this.hasEdit())}hasEndCareView(){return!!(this.hasEndCareEdit()||this.hasView()||this.hasEdit())}hasPlanManEdit(){return!!this.hasHigherPermission()||(this.isDischarged()?this.hasDischPerm(this.portlets.planMan):this.hasEdit())}hasPlanManView(){return!!(this.hasPlanManEdit()||this.hasView()||this.hasEdit())}}return e.ngInjectableDef=t.bc({factory:function(){return new e(t.cc(s))},token:e,providedIn:"root"}),e})()},Pasx:function(e,n,i){"use strict";i.d(n,"a",(function(){return s}));var t=i("8Y7J");let s=(()=>{class e{constructor(){}parseErrorMessage(e){let n="";return e.error?n=e.error.message?e.error.message:e.error:e.message&&(n=e.message),n}parseErrorArrayMessage(e){let n="";return e.error?n=e.error.mandatories?e.error.mandatories:e.error:e.mandatories&&(n=e.mandatories),n}}return e.ngInjectableDef=t.bc({factory:function(){return new e},token:e,providedIn:"root"}),e})()},n90K:function(e,n,i){"use strict";i.d(n,"a",(function(){return r}));var t=i("mrSG"),s=i("8Y7J"),l=i("xgBC");let r=(()=>{class e{constructor(e){this.storage=e}set(e,n){return t.b(this,void 0,void 0,(function*(){try{const i=yield this.storage.set(e,n);return console.log("set string in storage: "+i),!0}catch(i){return console.log(i),!1}}))}get(e){return t.b(this,void 0,void 0,(function*(){try{const n=yield this.storage.get(e);return console.log("storageGET: "+e+": "+n),null!=n?n:null}catch(n){return console.log(n),null}}))}setObject(e,n){return t.b(this,void 0,void 0,(function*(){try{const i=yield this.storage.set(e,JSON.stringify(n));return console.log("set Object in storage: "+i),!0}catch(i){return console.log(i),!1}}))}getObject(e){return t.b(this,void 0,void 0,(function*(){try{const n=yield this.storage.get(e);return null!=n?JSON.parse(n):null}catch(n){return console.log(n),null}}))}remove(e){this.storage.remove(e)}clear(){this.storage.clear()}}return e.ngInjectableDef=s.bc({factory:function(){return new e(s.cc(l.b))},token:e,providedIn:"root"}),e})()},z6cu:function(e,n,i){"use strict";i.d(n,"a",(function(){return s}));var t=i("HDdC");function s(e,n){return new t.a(n?i=>n.schedule(l,0,{error:e,subscriber:i}):n=>n.error(e))}function l({error:e,subscriber:n}){n.error(e)}}}]);