(window.webpackJsonp=window.webpackJsonp||[]).push([[39],{n2AU:function(n,l,e){"use strict";e.r(l);var t=e("8Y7J"),i=e("LDXv"),u=e("EFyh"),o=e("ZZ/e"),a=e("wV6e"),r=e("ipUr"),s=e("7ch9"),c=e("Pasx"),d=e("VM0z"),b=e("s7LF");class g{constructor(n,l,e,t,i,u,o,a,r,s){this.permissionValidatorService=n,this.loginService=l,this.actRoute=e,this.alertServ=t,this.navCtrl=i,this.drugsApi=u,this.drugsAndMedicinesDetailDataService=o,this.loadingService=a,this.stringUtilsService=r,this.formBuilder=s,this.encounter_no="",this.ref_no="",this.item_id="",this.route=null,this.frequency=null,this.drug_code="",this.generic_name="",this.item_name="",this.pMedicationSave=!0,this.SAVE_DRUGS_AND_MEDICINE=1,this.loadingService.present(),this.encounter_no=this.actRoute.snapshot.paramMap.get("encounter_no"),this.ref_no=this.actRoute.snapshot.paramMap.get("refno"),this.item_id=this.actRoute.snapshot.paramMap.get("item_id"),this.meidcationConfigAndDefaults=this.loginService.getConfigAndDefaults().medication,this.drugsApi.getMedicationData(this.encounter_no,this.ref_no,this.item_id).subscribe(n=>{this.medication=n[0],this.drug_code=this.medication.drug_code,this.generic_name=this.medication.generic_name,this.item_name=this.medication.item_name,this.route=this.medication.route,this.frequency=this.medication.frequency,this.loadingService.dismiss()},n=>{console.log(n),this.loadingService.dismiss().then(l=>{const e=this.stringUtilsService.parseErrorMessage(n);this.alertServ.openAlertModal("fail","Failed",e,"Ok")})})}ionViewWillEnter(){console.log("ionViewWillEnter"),window.addEventListener("native.keyboardshow",this.keyboardShowHandler),window.addEventListener("native.keyboardhide",this.keyboardHideHandler)}ionViewWillLeave(){console.log("ionViewWillLeave"),window.removeEventListener("native.keyboardshow",this.keyboardShowHandler),window.removeEventListener("native.keyboardhide",this.keyboardHideHandler),this.removeIonAppStyles()}initUserInterfaceByRole(){this.pMedicationSave=this.permissionValidatorService.hasDrugsMedsEdit()}ngOnInit(){this.form=this.formBuilder.group({route:["",b.u.compose([b.u.required,b.u.maxLength(500)])],frequency:["",b.u.compose([b.u.required,b.u.maxLength(50)])]}),this.initUserInterfaceByRole()}saveMedicationData(){this.openPromptModal(this.SAVE_DRUGS_AND_MEDICINE,{},"Drugs and Medicine","Would you like to save your changes?")}saveMedicationDataFunction(){this.loadingService.present();const n={refno:this.ref_no,item_id:this.item_id,frequency:this.form.get("frequency").value,route:this.form.get("route").value,encounter_no:this.encounter_no};this.drugsApi.saveMedicationData(n).subscribe(n=>{console.log(n),this.loadingService.dismiss().then(l=>{n&&200===n.code&&n.saved?(n.data.data.item_id||(n.data.data.item_id=n.data.data.item_code),this.drugsAndMedicinesDetailDataService.setDetails(n.data.data),this.alertServ.openAlertModal("success","Success",n.message),this.backToDrugsAndMedicine()):this.alertServ.openAlertModal("fail","Failed",n.message,"Ok")})},n=>{console.log(n),this.loadingService.dismiss().then(l=>{const e=this.stringUtilsService.parseErrorMessage(n);this.alertServ.openAlertModal("fail","Failed",e,"Ok")})})}backToDrugsAndMedicine(){this.navCtrl.pop()}openPromptModal(n,l,e,t,i="Save",u="Cancel"){this.alertServ.openPromptModal(e,t,i,l=>{null!==l&&(console.log("result.data: ",l.data),l.data&&"Save"===l.data.button&&n===this.SAVE_DRUGS_AND_MEDICINE&&this.saveMedicationDataFunction())})}tapCoordinates(n){this.y=n.touches[0].clientY,this.h=window.innerHeight,this.offsetY=this.h-this.y,console.log("offset: ",this.offsetY)}keyboardShowHandler(n){const l=n.keyboardHeight;console.log("show: ",n.keyboardHeight);const e=document.querySelector("ion-app").style;e.bottom=l+"px",console.log(e.bottom)}keyboardHideHandler(){console.log("gone"),document.querySelector("ion-app").removeAttribute("style")}removeIonAppStyles(){document.querySelector("ion-app").removeAttribute("style")}}class h{}var p=e("pMnS"),m=e("oBZk"),v=e("SVse"),f=e("iInd"),C=t.Bb({encapsulation:0,styles:[["ion-title[_ngcontent-%COMP%]{text-align:center;color:#0096c6;font-size:1em}.back[_ngcontent-%COMP%]{margin-left:2vw}[_ngcontent-%COMP%]::-webkit-input-placeholder{color:#c8c8c8;font-style:italic}[_ngcontent-%COMP%]::-moz-placeholder{color:#c8c8c8;font-style:italic}[_ngcontent-%COMP%]::-ms-input-placeholder{color:#c8c8c8;font-style:italic}[_ngcontent-%COMP%]::placeholder{color:#c8c8c8;font-style:italic}ion-content[_ngcontent-%COMP%]{--ion-background-color:#f9f9f9}ion-content[_ngcontent-%COMP%]   .wrapper[_ngcontent-%COMP%]{margin-top:2vh;padding:1vh;width:94%;margin-left:auto;margin-right:auto;text-align:left}ion-content[_ngcontent-%COMP%]   .wrapper[_ngcontent-%COMP%]   .complaintSection[_ngcontent-%COMP%]{margin-bottom:2vh}ion-content[_ngcontent-%COMP%]   .wrapper[_ngcontent-%COMP%]   .complaintSection[_ngcontent-%COMP%]   .smallTextarea[_ngcontent-%COMP%]{background:#fff;width:100%;border:none;margin-top:10px;color:#ff5757;padding-left:10px;padding-right:10px;border-radius:10px}ion-content[_ngcontent-%COMP%]   .wrapper[_ngcontent-%COMP%]   .complaintSection[_ngcontent-%COMP%]   .bigTextarea[_ngcontent-%COMP%]{width:100%;border:none;margin-top:10px;padding:10px;background:#fff;border-radius:10px}ion-content[_ngcontent-%COMP%]   .wrapper[_ngcontent-%COMP%]   .complaintSection[_ngcontent-%COMP%]   .textLabel[_ngcontent-%COMP%]{color:#949494}ion-content[_ngcontent-%COMP%]   .wrapper[_ngcontent-%COMP%]   .complaintSection[_ngcontent-%COMP%]   .redLabel[_ngcontent-%COMP%]{color:#ff5757}ion-content[_ngcontent-%COMP%]   .wrapper[_ngcontent-%COMP%]   .ion-padding[_ngcontent-%COMP%]   ion-button[_ngcontent-%COMP%]{height:7vh}"]],data:{}});function _(n){return t.Yb(0,[(n()(),t.Db(0,0,null,null,1,"div",[["class","testServer"]],null,null,null,null,null)),(n()(),t.Wb(-1,null,[" TEST SERVER CONNECTED "]))],null,null)}function P(n){return t.Yb(0,[(n()(),t.Db(0,0,null,null,1,"p",[["class","warning-message"]],null,null,null,null,null)),(n()(),t.Wb(-1,null,["This field is required."]))],null,null)}function M(n){return t.Yb(0,[(n()(),t.Db(0,0,null,null,1,"p",[["class","warning-message"]],null,null,null,null,null)),(n()(),t.Wb(-1,null,["You have reached the character limit(500)."]))],null,null)}function S(n){return t.Yb(0,[(n()(),t.Db(0,0,null,null,1,"p",[["class","warning-message"]],null,null,null,null,null)),(n()(),t.Wb(-1,null,["This field is required."]))],null,null)}function y(n){return t.Yb(0,[(n()(),t.Db(0,0,null,null,1,"p",[["class","warning-message"]],null,null,null,null,null)),(n()(),t.Wb(-1,null,["You have reached the character limit(50)."]))],null,null)}function D(n){return t.Yb(0,[(n()(),t.Db(0,0,null,null,11,"ion-header",[],null,null,null,m.tb,m.r)),t.Cb(1,49152,null,0,o.C,[t.j,t.p,t.G],null,null),(n()(),t.Db(2,0,null,0,9,"ion-toolbar",[],null,null,null,m.cc,m.ab)),t.Cb(3,49152,null,0,o.Db,[t.j,t.p,t.G],null,null),(n()(),t.Db(4,0,null,0,4,"ion-buttons",[["slot","start"]],null,null,null,m.gb,m.e)),t.Cb(5,49152,null,0,o.m,[t.j,t.p,t.G],null,null),(n()(),t.Db(6,0,null,0,2,"ion-back-button",[],null,[[null,"click"]],(function(n,l,e){var i=!0;return"click"===l&&(i=!1!==t.Pb(n,8).onClick(e)&&i),i}),m.eb,m.c)),t.Cb(7,49152,null,0,o.h,[t.j,t.p,t.G],null,null),t.Cb(8,16384,null,0,o.i,[[2,o.jb],o.Kb],null,null),(n()(),t.Db(9,0,null,0,2,"ion-title",[],null,null,null,m.ac,m.Y)),t.Cb(10,49152,null,0,o.Bb,[t.j,t.p,t.G],null,null),(n()(),t.Wb(-1,0,["Drugs and Medicines"])),(n()(),t.Db(12,0,null,null,63,"ion-content",[],null,null,null,m.mb,m.k)),t.Cb(13,49152,null,0,o.v,[t.j,t.p,t.G],null,null),(n()(),t.sb(16777216,null,0,1,null,_)),t.Cb(15,16384,null,0,v.l,[t.Y,t.U],{ngIf:[0,"ngIf"]},null),(n()(),t.Db(16,0,null,0,59,"div",[["class","wrapper"]],null,null,null,null,null)),(n()(),t.Db(17,0,null,null,58,"form",[["novalidate",""]],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"submit"],[null,"reset"]],(function(n,l,e){var i=!0;return"submit"===l&&(i=!1!==t.Pb(n,19).onSubmit(e)&&i),"reset"===l&&(i=!1!==t.Pb(n,19).onReset()&&i),i}),null,null)),t.Cb(18,16384,null,0,b.y,[],null,null),t.Cb(19,540672,null,0,b.h,[[8,null],[8,null]],{form:[0,"form"]},null),t.Tb(2048,null,b.b,null,[b.h]),t.Cb(21,16384,null,0,b.o,[[4,b.b]],null,null),(n()(),t.Db(22,0,null,null,7,"div",[["class","complaintSection"]],null,null,null,null,null)),(n()(),t.Db(23,0,null,null,2,"ion-label",[["class","textLabel"]],null,null,null,m.Eb,m.C)),t.Cb(24,49152,null,0,o.O,[t.j,t.p,t.G],null,null),(n()(),t.Wb(-1,0,["Item Name"])),(n()(),t.Db(26,0,null,null,3,"ion-input",[["class","smallTextarea"],["name","item_name"],["readonly",""],["type","text"]],null,[[null,"ionBlur"],[null,"ionChange"]],(function(n,l,e){var i=!0;return"ionBlur"===l&&(i=!1!==t.Pb(n,29)._handleBlurEvent(e.target)&&i),"ionChange"===l&&(i=!1!==t.Pb(n,29)._handleInputEvent(e.target)&&i),i}),m.xb,m.v)),t.Tb(5120,null,b.l,(function(n){return[n]}),[o.Sb]),t.Cb(28,49152,null,0,o.H,[t.j,t.p,t.G],{name:[0,"name"],readonly:[1,"readonly"],type:[2,"type"],value:[3,"value"]},null),t.Cb(29,16384,null,0,o.Sb,[t.p],null,null),(n()(),t.Db(30,0,null,null,7,"div",[["class","complaintSection"]],null,null,null,null,null)),(n()(),t.Db(31,0,null,null,2,"ion-label",[["class","textLabel"]],null,null,null,m.Eb,m.C)),t.Cb(32,49152,null,0,o.O,[t.j,t.p,t.G],null,null),(n()(),t.Wb(-1,0,["Generic Name"])),(n()(),t.Db(34,0,null,null,3,"ion-input",[["class","smallTextarea"],["name","specific-name"],["readonly",""],["type","text"]],null,[[null,"ionBlur"],[null,"ionChange"]],(function(n,l,e){var i=!0;return"ionBlur"===l&&(i=!1!==t.Pb(n,37)._handleBlurEvent(e.target)&&i),"ionChange"===l&&(i=!1!==t.Pb(n,37)._handleInputEvent(e.target)&&i),i}),m.xb,m.v)),t.Tb(5120,null,b.l,(function(n){return[n]}),[o.Sb]),t.Cb(36,49152,null,0,o.H,[t.j,t.p,t.G],{name:[0,"name"],readonly:[1,"readonly"],type:[2,"type"],value:[3,"value"]},null),t.Cb(37,16384,null,0,o.Sb,[t.p],null,null),(n()(),t.Db(38,0,null,null,16,"div",[["class","complaintSection"]],null,null,null,null,null)),(n()(),t.Db(39,0,null,null,2,"ion-label",[],null,null,null,m.Eb,m.C)),t.Cb(40,49152,null,0,o.O,[t.j,t.p,t.G],{color:[0,"color"]},null),(n()(),t.Wb(-1,0,["Route *"])),(n()(),t.Db(42,0,null,null,8,"ion-textarea",[["class","bigTextarea"],["formControlName","route"],["name","medicine-route"],["placeholder","Enter your text here . . ."],["required",""],["rows","8"]],[[1,"required",0],[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"ionBlur"],[null,"ionChange"]],(function(n,l,e){var i=!0;return"ionBlur"===l&&(i=!1!==t.Pb(n,45)._handleBlurEvent(e.target)&&i),"ionChange"===l&&(i=!1!==t.Pb(n,45)._handleInputEvent(e.target)&&i),i}),m.Zb,m.X)),t.Cb(43,16384,null,0,b.t,[],{required:[0,"required"]},null),t.Tb(1024,null,b.k,(function(n){return[n]}),[b.t]),t.Cb(45,16384,null,0,o.Sb,[t.p],null,null),t.Tb(1024,null,b.l,(function(n){return[n]}),[o.Sb]),t.Cb(47,671744,null,0,b.f,[[3,b.b],[6,b.k],[8,null],[6,b.l],[2,b.x]],{name:[0,"name"],isDisabled:[1,"isDisabled"]},null),t.Tb(2048,null,b.m,null,[b.f]),t.Cb(49,16384,null,0,b.n,[[4,b.m]],null,null),t.Cb(50,49152,null,0,o.zb,[t.j,t.p,t.G],{disabled:[0,"disabled"],name:[1,"name"],placeholder:[2,"placeholder"],required:[3,"required"],rows:[4,"rows"],value:[5,"value"]},null),(n()(),t.sb(16777216,null,null,1,null,P)),t.Cb(52,16384,null,0,v.l,[t.Y,t.U],{ngIf:[0,"ngIf"]},null),(n()(),t.sb(16777216,null,null,1,null,M)),t.Cb(54,16384,null,0,v.l,[t.Y,t.U],{ngIf:[0,"ngIf"]},null),(n()(),t.Db(55,0,null,null,16,"div",[["class","complaintSection"]],null,null,null,null,null)),(n()(),t.Db(56,0,null,null,2,"ion-label",[],null,null,null,m.Eb,m.C)),t.Cb(57,49152,null,0,o.O,[t.j,t.p,t.G],{color:[0,"color"]},null),(n()(),t.Wb(-1,0,["Dosage & Frequency *"])),(n()(),t.Db(59,0,null,null,8,"ion-textarea",[["class","bigTextarea"],["formControlName","frequency"],["name","medicine-frequency"],["placeholder","Enter your text here . . ."],["required",""],["rows","8"]],[[1,"required",0],[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"ionBlur"],[null,"ionChange"]],(function(n,l,e){var i=!0;return"ionBlur"===l&&(i=!1!==t.Pb(n,62)._handleBlurEvent(e.target)&&i),"ionChange"===l&&(i=!1!==t.Pb(n,62)._handleInputEvent(e.target)&&i),i}),m.Zb,m.X)),t.Cb(60,16384,null,0,b.t,[],{required:[0,"required"]},null),t.Tb(1024,null,b.k,(function(n){return[n]}),[b.t]),t.Cb(62,16384,null,0,o.Sb,[t.p],null,null),t.Tb(1024,null,b.l,(function(n){return[n]}),[o.Sb]),t.Cb(64,671744,null,0,b.f,[[3,b.b],[6,b.k],[8,null],[6,b.l],[2,b.x]],{name:[0,"name"],isDisabled:[1,"isDisabled"]},null),t.Tb(2048,null,b.m,null,[b.f]),t.Cb(66,16384,null,0,b.n,[[4,b.m]],null,null),t.Cb(67,49152,null,0,o.zb,[t.j,t.p,t.G],{disabled:[0,"disabled"],name:[1,"name"],placeholder:[2,"placeholder"],required:[3,"required"],rows:[4,"rows"],value:[5,"value"]},null),(n()(),t.sb(16777216,null,null,1,null,S)),t.Cb(69,16384,null,0,v.l,[t.Y,t.U],{ngIf:[0,"ngIf"]},null),(n()(),t.sb(16777216,null,null,1,null,y)),t.Cb(71,16384,null,0,v.l,[t.Y,t.U],{ngIf:[0,"ngIf"]},null),(n()(),t.Db(72,0,null,null,3,"div",[["class","ion-padding"]],null,null,null,null,null)),(n()(),t.Db(73,0,null,null,2,"ion-button",[["expand","block"]],null,[[null,"click"]],(function(n,l,e){var t=!0;return"click"===l&&(t=!1!==n.component.saveMedicationData()&&t),t}),m.fb,m.d)),t.Cb(74,49152,null,0,o.l,[t.j,t.p,t.G],{disabled:[0,"disabled"],expand:[1,"expand"]},null),(n()(),t.Wb(-1,0,["Save"]))],(function(n,l){var e=l.component;n(l,15,0,e.loginService.inTestServer),n(l,19,0,e.form),n(l,28,0,"item_name","","text",e.item_name),n(l,36,0,"specific-name","","text",e.generic_name),n(l,40,0,e.form.get("route").valid?"dark":"danger"),n(l,43,0,""),n(l,47,0,"route",!e.pMedicationSave),n(l,50,0,!e.pMedicationSave,"medicine-route","Enter your text here . . .","","8",e.route),n(l,52,0,e.form.get("route").hasError("required")),n(l,54,0,e.form.get("route").hasError("maxlength")),n(l,57,0,e.form.get("frequency").valid?"dark":"danger"),n(l,60,0,""),n(l,64,0,"frequency",!e.pMedicationSave),n(l,67,0,!e.pMedicationSave,"medicine-frequency","Enter your text here . . .","","8",e.frequency),n(l,69,0,e.form.get("frequency").hasError("required")),n(l,71,0,e.form.get("frequency").hasError("maxlength")),n(l,74,0,e.form.invalid||!e.pMedicationSave,"block")}),(function(n,l){n(l,17,0,t.Pb(l,21).ngClassUntouched,t.Pb(l,21).ngClassTouched,t.Pb(l,21).ngClassPristine,t.Pb(l,21).ngClassDirty,t.Pb(l,21).ngClassValid,t.Pb(l,21).ngClassInvalid,t.Pb(l,21).ngClassPending),n(l,42,0,t.Pb(l,43).required?"":null,t.Pb(l,49).ngClassUntouched,t.Pb(l,49).ngClassTouched,t.Pb(l,49).ngClassPristine,t.Pb(l,49).ngClassDirty,t.Pb(l,49).ngClassValid,t.Pb(l,49).ngClassInvalid,t.Pb(l,49).ngClassPending),n(l,59,0,t.Pb(l,60).required?"":null,t.Pb(l,66).ngClassUntouched,t.Pb(l,66).ngClassTouched,t.Pb(l,66).ngClassPristine,t.Pb(l,66).ngClassDirty,t.Pb(l,66).ngClassValid,t.Pb(l,66).ngClassInvalid,t.Pb(l,66).ngClassPending)}))}function w(n){return t.Yb(0,[(n()(),t.Db(0,0,null,null,1,"app-drugs-and-medicines-view",[],null,null,null,D,C)),t.Cb(1,114688,null,0,g,[i.a,u.a,f.a,d.a,o.Kb,a.a,r.a,s.a,c.a,b.d],null,null)],(function(n,l){n(l,1,0)}),null)}var E=t.zb("app-drugs-and-medicines-view",g,w,{},{},[]);e.d(l,"DrugsAndMedicinesViewPageModuleNgFactory",(function(){return O}));var O=t.Ab(h,[],(function(n){return t.Mb([t.Nb(512,t.m,t.lb,[[8,[p.a,E]],[3,t.m],t.E]),t.Nb(4608,v.n,v.m,[t.A,[2,v.C]]),t.Nb(4608,b.w,b.w,[]),t.Nb(4608,o.b,o.b,[t.G,t.g]),t.Nb(4608,o.Jb,o.Jb,[o.b,t.m,t.w]),t.Nb(4608,o.Ob,o.Ob,[o.b,t.m,t.w]),t.Nb(4608,b.d,b.d,[]),t.Nb(1073742336,v.c,v.c,[]),t.Nb(1073742336,b.v,b.v,[]),t.Nb(1073742336,b.i,b.i,[]),t.Nb(1073742336,o.Fb,o.Fb,[]),t.Nb(1073742336,b.s,b.s,[]),t.Nb(1073742336,f.q,f.q,[[2,f.v],[2,f.m]]),t.Nb(1073742336,h,h,[]),t.Nb(1024,f.k,(function(){return[[{path:"",component:g}]]}),[])])}))}}]);