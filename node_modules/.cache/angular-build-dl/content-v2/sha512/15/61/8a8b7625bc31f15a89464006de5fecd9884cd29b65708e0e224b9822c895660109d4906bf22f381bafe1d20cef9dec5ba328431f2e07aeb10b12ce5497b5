(window.webpackJsonp=window.webpackJsonp||[]).push([[3],{ChBM:function(i,e,s){"use strict";var t=s("8Y7J"),n=s("oBZk"),r=s("ZZ/e");s("RRim"),s("iInd"),s("gly3"),s("7wfR"),s("EFyh"),s("H+bZ"),s("Fzct"),s("7ch9"),s("Pasx"),s("9B/o"),s.d(e,"a",(function(){return o})),s.d(e,"b",(function(){return a}));var o=t.Bb({encapsulation:0,styles:[[".titleDiv[_ngcontent-%COMP%]{overflow-x:scroll;white-space:nowrap;text-align:center;margin:auto}.titleDiv[_ngcontent-%COMP%]   ion-title[_ngcontent-%COMP%]{position:relative;color:#0096c6;font-size:1em;padding-left:4px;padding-right:4px;display:inline-block}.menuIcon[_ngcontent-%COMP%]{--padding-top:0px!important;--padding-end:0px!important;--padding-bottom:0px!important;--padding-start:0px!important;--border-radius:50%!important;width:36px!important;height:36px!important;margin:0!important}.subIcons[_ngcontent-%COMP%]{--padding-top:4px!important;--padding-end:4px!important;--padding-bottom:4px!important;--padding-start:4px!important;--border-radius:50%!important;width:30px!important;height:30px!important;margin:0 2px 0 0!important}"]],data:{}});function a(i){return t.Yb(0,[(i()(),t.Db(0,0,null,null,31,"ion-header",[],null,null,null,n.tb,n.r)),t.Cb(1,49152,null,0,r.C,[t.j,t.p,t.G],null,null),(i()(),t.Db(2,0,null,0,29,"ion-toolbar",[],null,null,null,n.cc,n.ab)),t.Cb(3,49152,null,0,r.Db,[t.j,t.p,t.G],null,null),(i()(),t.Db(4,0,null,0,3,"ion-buttons",[["slot","start"]],null,null,null,n.gb,n.e)),t.Cb(5,49152,null,0,r.m,[t.j,t.p,t.G],null,null),(i()(),t.Db(6,0,null,0,1,"ion-menu-button",[["class","menuIcon"],["menu","mainMenu"]],null,null,null,n.Hb,n.G)),t.Cb(7,49152,null,0,r.S,[t.j,t.p,t.G],{menu:[0,"menu"]},null),(i()(),t.Db(8,0,null,0,3,"div",[["class","titleDiv"]],null,null,null,null,null)),(i()(),t.Db(9,0,null,null,2,"ion-title",[],null,null,null,n.ac,n.Y)),t.Cb(10,49152,null,0,r.Bb,[t.j,t.p,t.G],null,null),(i()(),t.Wb(11,0,["",""])),(i()(),t.Db(12,0,null,0,19,"ion-buttons",[["slot","end"]],null,null,null,n.gb,n.e)),t.Cb(13,49152,null,0,r.m,[t.j,t.p,t.G],null,null),(i()(),t.Db(14,0,null,0,3,"ion-button",[["class","subIcons"]],null,[[null,"click"]],(function(i,e,s){var t=!0;return"click"===e&&(t=!1!==i.component.showNotifications()&&t),t}),n.fb,n.d)),t.Cb(15,49152,null,0,r.l,[t.j,t.p,t.G],null,null),(i()(),t.Db(16,0,null,0,1,"ion-icon",[["ios","ios-notifications"],["md","md-notifications"],["slot","icon-only"]],null,null,null,n.ub,n.s)),t.Cb(17,49152,null,0,r.D,[t.j,t.p,t.G],{ios:[0,"ios"],md:[1,"md"]},null),(i()(),t.Db(18,0,null,0,3,"ion-button",[["class","subIcons"]],null,[[null,"click"]],(function(i,e,s){var t=!0;return"click"===e&&(t=!1!==i.component.search()&&t),t}),n.fb,n.d)),t.Cb(19,49152,null,0,r.l,[t.j,t.p,t.G],null,null),(i()(),t.Db(20,0,null,0,1,"ion-icon",[["ios","ios-search"],["md","md-search"],["slot","icon-only"]],null,null,null,n.ub,n.s)),t.Cb(21,49152,null,0,r.D,[t.j,t.p,t.G],{ios:[0,"ios"],md:[1,"md"]},null),(i()(),t.Db(22,0,null,0,3,"ion-button",[["class","subIcons"]],null,[[null,"click"]],(function(i,e,s){var t=!0;return"click"===e&&(t=!1!==i.component.print()&&t),t}),n.fb,n.d)),t.Cb(23,49152,null,0,r.l,[t.j,t.p,t.G],null,null),(i()(),t.Db(24,0,null,0,1,"ion-icon",[["ios","ios-print"],["md","md-print"],["slot","icon-only"]],null,null,null,n.ub,n.s)),t.Cb(25,49152,null,0,r.D,[t.j,t.p,t.G],{ios:[0,"ios"],md:[1,"md"]},null),(i()(),t.Db(26,0,null,0,5,"ion-menu-toggle",[["menu","accountMenu"]],null,null,null,n.Ib,n.H)),t.Cb(27,49152,null,0,r.T,[t.j,t.p,t.G],{menu:[0,"menu"]},null),(i()(),t.Db(28,0,null,0,3,"ion-button",[["class","subIcons"]],null,null,null,n.fb,n.d)),t.Cb(29,49152,null,0,r.l,[t.j,t.p,t.G],null,null),(i()(),t.Db(30,0,null,0,1,"ion-icon",[["ios","ios-contact"],["md","md-contact"],["slot","icon-only"]],null,null,null,n.ub,n.s)),t.Cb(31,49152,null,0,r.D,[t.j,t.p,t.G],{ios:[0,"ios"],md:[1,"md"]},null)],(function(i,e){i(e,7,0,"mainMenu"),i(e,17,0,"ios-notifications","md-notifications"),i(e,21,0,"ios-search","md-search"),i(e,25,0,"ios-print","md-print"),i(e,27,0,"accountMenu"),i(e,31,0,"ios-contact","md-contact")}),(function(i,e){i(e,11,0,e.component.titleToUse)}))}},LDXv:function(i,e,s){"use strict";var t=s("8Y7J");let n=(()=>{class i{constructor(){}compare(i,e){const s={};return i.forEach(i=>e.forEach(e=>{i.id===e.id&&(s[i.id]=s[i.id]+1||1)})),Object.keys(s)}}return i.ngInjectableDef=t.bc({factory:function(){return new i},token:i,providedIn:"root"}),i})();s.d(e,"a",(function(){return r}));let r=(()=>{class i{constructor(i){this.arrayComparatorService=i,this.throwsErrorCode=5011,this.perms={allPermission:"_a_0_all",manageEhr:"_a_1_ehr_sudomanage",viewAllDept:"_a_2_ehr_view_all_dept",viewOwnDept:"_a_3_ehr_view_own_dept",editAllDept:"_a_2_ehr_edit_all_dept",editOwnDept:"_a_3_ehr_edit_own_dept",overideInct:"_a_2_ehr_override_my_patient",overideInctSoap:"_a_3_ehr_soap",overideInctSoapDiag:"_a_2_ehr_override_final_dx",overideInctSoapDiag2:"_a_4_ehr_override_final_dx",overideInctPastMed:"_a_3_ehr_past_medical_history",overideInctPsigns:"_a_3_ehr_pertinent_signs_and_symptoms",overideInctHciRef:"_a_3_ehr_referred_hci",overideInctPhysExam:"_a_3_ehr_physical_examination",overideInctMedicat:"_a_3_ehr_medication",overideInctPlanMan:"_a_3_ehr_plan_management",overideInctEndCare:"_a_3_ehr_end_of_care"},this.portlets={soap:"soap",soapDiag:"soapDiag",pastMed:"pastMed",pSigns:"pSings",refHci:"refHci",physExam:"physExam",medict:"medict",planMan:"planMan",endCare:"endCare"}}setAuthentication(i){this.authentication=i}setSelectedPatient(i){this.selectedPatient=i}validateRole(i,e=!0,s=!1){this.permissions=this.authentication.user.permissions,this.roleName=this.authentication.user.role.role_name,console.log("user roleName: ",this.roleName);const t=i.role_name,n=i["other-permissions"];let r=!1;if(this.authentication.user.permissions.map(e=>{"all"===i[0]?r="_a_0_all"===e.permission_id:"sudomanage"===i[0]?r="_a_0_all"===e.permission_id||"_a_1_ehr_sudomanage"===e.permission_id:"view_all_dept"===i[0]?r="_a_0_all"===e.permission_id||"_a_1_ehr_sudomanage"===e.permission_id||"_a_2_ehr_view_all_dept"===e.permission_id:"view_own_dept"===i[0]?r="_a_0_all"===e.permission_id||"_a_1_ehr_sudomanage"===e.permission_id||"_a_2_ehr_view_all_dept"===e.permission_id||"_a_3_ehr_view_own_dept"===e.permission_id:"edit_all_dept"===i[0]?r="_a_0_all"===e.permission_id||"_a_1_ehr_sudomanage"===e.permission_id||"_a_2_ehr_edit_all_dept"===e.permission_id:"edit_own_dept"===i[0]?r="_a_0_all"===e.permission_id||"_a_1_ehr_sudomanage"===e.permission_id||"_a_2_ehr_edit_all_dept"===e.permission_id||"_a_3_ehr_edit_own_dept"===e.permission_id:"override_my_patient"===i[0]?r="_a_0_all"===e.permission_id||"_a_1_ehr_sudomanage"===e.permission_id||"_a_2_ehr_override_my_patient"===e.permission_id:"soap"===i[0]?r="_a_0_all"===e.permission_id||"_a_1_ehr_sudomanage"===e.permission_id||"_a_2_ehr_override_my_patient"===e.permission_id||"_a_3_ehr_soap"===e.permission_id:"override_final_dx"===i[0]?r="_a_0_all"===e.permission_id||"_a_1_ehr_sudomanage"===e.permission_id||"_a_2_ehr_override_my_patient"===e.permission_id||"_a_4_ehr_override_final_dx"===e.permission_id||"_a_3_ehr_soap"===e.permission_id:"past_medical_history"===i[0]?r="_a_0_all"===e.permission_id||"_a_1_ehr_sudomanage"===e.permission_id||"_a_2_ehr_override_my_patient"===e.permission_id||"_a_3_ehr_past_medical_history"===e.permission_id:"pertinent_signs_and_symptoms"===i[0]?r="_a_0_all"===e.permission_id||"_a_1_ehr_sudomanage"===e.permission_id||"_a_2_ehr_override_my_patient"===e.permission_id||"_a_3_ehr_pertinent_signs_and_symptoms"===e.permission_id:"referred_hci"===i[0]?r="_a_0_all"===e.permission_id||"_a_1_ehr_sudomanage"===e.permission_id||"_a_2_ehr_override_my_patient"===e.permission_id||"_a_3_ehr_referred_hci"===e.permission_id:"physical_examination"===i[0]?r="_a_0_all"===e.permission_id||"_a_1_ehr_sudomanage"===e.permission_id||"_a_2_ehr_override_my_patient"===e.permission_id||"_a_3_ehr_physical_examination"===e.permission_id:"medication"===i[0]?r="_a_0_all"===e.permission_id||"_a_1_ehr_sudomanage"===e.permission_id||"_a_2_ehr_override_my_patient"===e.permission_id||"_a_3_ehr_medication"===e.permission_id:"plan_managem"===i[0]?r="_a_0_all"===e.permission_id||"_a_1_ehr_sudomanage"===e.permission_id||"_a_2_ehr_override_my_patient"===e.permission_id||"_a_3_ehr_plan_management"===e.permission_id:"end_of_care"===i[0]&&(r="_a_0_all"===e.permission_id||"_a_1_ehr_sudomanage"===e.permission_id||"_a_2_ehr_override_my_patient"===e.permission_id||"_a_3_ehr_end_of_care"===e.permission_id)}),s)return r;console.log("roleNames: ",t);let o=!0;if(Array.isArray(t)&&t.length>0){const i=t.findIndex(i=>(console.log("element: ",i," this.roleName: ",this.roleName),-1!=this.roleName.toUpperCase().indexOf(i.toUpperCase())));console.log("index: ",i),o=i>=0}console.log("validRole: ",o);let a=!1;return Array.isArray(n)&&n.length>0&&(a=this.arrayComparatorService.compare(n,this.permissions).length>0),console.log("validOtherPermission: ",a),!e||(console.log("selectedPatient: ",this.selectedPatient),!this.selectedPatient||1!=this.selectedPatient.is_discharged)||(console.log("is_discharged"),a)}hasAllPermission(){return this.authentication.user.permissions.some(i=>i.permission_id==this.perms.allPermission)}hasManageEhr(){return this.authentication.user.permissions.some(i=>i.permission_id==this.perms.manageEhr)}hasEdit(){return!!this.authentication.user.permissions.some(i=>i.permission_id==this.perms.editAllDept)||this.authentication.user.permissions.some(i=>i.permission_id==this.perms.editOwnDept)&&this.selectedPatient.isInMyDept}hasView(){return!!this.authentication.user.permissions.some(i=>i.permission_id==this.perms.viewAllDept)||this.authentication.user.permissions.some(i=>i.permission_id==this.perms.viewOwnDept)&&this.selectedPatient.isInMyDept}hasHigherPermission(){return this.hasAllPermission()||this.hasManageEhr()}hasOverInct(){return this.authentication.user.permissions.some(i=>i.permission_id==this.perms.overideInct)}hasDischPerm(i){if(!this.hasView()&&!this.hasEdit())return!1;if(this.hasOverInct())return!0;switch(i){case this.portlets.soap:return this.authentication.user.permissions.some(i=>i.permission_id==this.perms.overideInctSoap);case this.portlets.soapDiag:return this.authentication.user.permissions.some(i=>i.permission_id==this.perms.overideInctSoapDiag||i.permission_id==this.perms.overideInctSoapDiag2);case this.portlets.pastMed:return this.authentication.user.permissions.some(i=>i.permission_id==this.perms.overideInctPastMed);case this.portlets.pSigns:return this.authentication.user.permissions.some(i=>i.permission_id==this.perms.overideInctPsigns);case this.portlets.refHci:return this.authentication.user.permissions.some(i=>i.permission_id==this.perms.overideInctHciRef);case this.portlets.physExam:return this.authentication.user.permissions.some(i=>i.permission_id==this.perms.overideInctPhysExam);case this.portlets.medict:return this.authentication.user.permissions.some(i=>i.permission_id==this.perms.overideInctMedicat);case this.portlets.planMan:return this.authentication.user.permissions.some(i=>i.permission_id==this.perms.overideInctPlanMan);case this.portlets.endCare:return this.authentication.user.permissions.some(i=>i.permission_id==this.perms.overideInctEndCare)}return!1}isDischarged(){return!!this.selectedPatient&&1==this.selectedPatient.is_discharged}hasSoapEdit(){return!!this.hasHigherPermission()||(this.isDischarged()?this.hasDischPerm(this.portlets.soap):this.hasEdit())}hasSoapDiagEdit(){return!!this.hasHigherPermission()||(this.isDischarged()?this.hasDischPerm(this.portlets.soapDiag):this.hasEdit())}hasSoapView(){return!!(this.hasSoapEdit()||this.hasView()||this.hasEdit())}hasPastMedEdit(){return!!this.hasHigherPermission()||(this.isDischarged()?this.hasDischPerm(this.portlets.pastMed):this.hasEdit())}hasPastView(){return!!(this.hasPastMedEdit()||this.hasView()||this.hasEdit())}hasPSignsEdit(){return!!this.hasHigherPermission()||(this.isDischarged()?this.hasDischPerm(this.portlets.pSigns):this.hasEdit())}hasPSingsView(){return!!(this.hasPSignsEdit()||this.hasView()||this.hasEdit())}hasVitalSignsView(){return!!this.hasHigherPermission()||!!(this.hasView()||this.hasEdit()||this.hasEdit())}hasRefHciEdit(){return!!this.hasHigherPermission()||(this.isDischarged()?this.hasDischPerm(this.portlets.refHci):this.hasEdit())}hasRefHciView(){return!!(this.hasRefHciEdit()||this.hasView()||this.hasEdit())}hasPhysExamEdit(){return!!this.hasHigherPermission()||(this.isDischarged()?this.hasDischPerm(this.portlets.physExam):this.hasEdit())}hasPhysExamView(){return!!(this.hasPhysExamEdit()||this.hasView()||this.hasEdit())}hasResultView(){return!!this.hasHigherPermission()||!!(this.hasView()||this.hasEdit()||this.hasEdit())}hasDrugsMedsEdit(){return!!this.hasHigherPermission()||(this.isDischarged()?this.hasDischPerm(this.portlets.medict):this.hasEdit())}hasDrugsMedsView(){return!!(this.hasDrugsMedsEdit()||this.hasView()||this.hasEdit())}hasEncHistView(){return!!this.hasHigherPermission()||!!(this.hasView()||this.hasEdit()||this.hasEdit())}hasReferalsView(){return!!this.hasHigherPermission()||!!(this.hasView()||this.hasEdit()||this.hasEdit())}hasEndCareEdit(){return!!this.hasHigherPermission()||(this.isDischarged()?this.hasDischPerm(this.portlets.endCare):this.hasEdit())}hasEndCareView(){return!!(this.hasEndCareEdit()||this.hasView()||this.hasEdit())}hasPlanManEdit(){return!!this.hasHigherPermission()||(this.isDischarged()?this.hasDischPerm(this.portlets.planMan):this.hasEdit())}hasPlanManView(){return!!(this.hasPlanManEdit()||this.hasView()||this.hasEdit())}}return i.ngInjectableDef=t.bc({factory:function(){return new i(t.cc(n))},token:i,providedIn:"root"}),i})()},RRim:function(i,e,s){"use strict";s.d(e,"a",(function(){return r}));var t=s("mrSG"),n=(s("gly3"),s("7wfR"),s("EFyh"),s("H+bZ"),s("7ch9"),s("Pasx"),s("Fzct"),s("9B/o"),s("ZZ/e"),s("Hfim"));class r{constructor(i,e,s,t,n,r,o,a,l,h,_,d){this.router=i,this.cf4ApiService=e,this.patientService=s,this.loginService=t,this.apiService=n,this.pdfViewerService=r,this.loadingService=o,this.stringUtilsService=a,this.platform=l,this.inAppBrowser=h,this.modalController=_,this.alertCtrl=d,this.options={location:"yes",hidden:"no",clearcache:"yes",clearsessioncache:"yes",zoom:"yes",hardwareback:"yes",mediaPlaybackRequiresUserAction:"no",shouldPauseOnSuspend:"no",closebuttoncaption:"Close",disallowoverscroll:"no",toolbar:"yes",enableViewportScale:"no",allowInlineMediaPlayback:"no",presentationstyle:"pagesheet",fullscreen:"yes"},this.showPDF=!1,this.cf4ApiService.setUrl(this.apiService.getUrl()),this.cf4ApiService.setToken(this.loginService.getAuthentication().token),this.selectedEncounterNo=this.patientService.getSelectedEncounterNo()}ngOnInit(){}showNotifications(){}search(){this.router.navigate(["/menu/quick-search"])}print(){this.loadingService.present(),this.cf4ApiService.getCf4(this.selectedEncounterNo).subscribe(i=>{console.log("result: ",i),this.loadingService.dismiss().then(e=>{i&&i.filepath&&(i.check.mandatories?this.openAlertModalValidation("fail","Missing Required Fields!",i.check.message,i.check.mandatories,i,"Ok",i.filepath):this.openWithInAppBrowser(i.filepath))})},i=>{console.log(i),this.loadingService.dismiss().then(e=>{const s=this.stringUtilsService.parseErrorMessage(i);this.openAlertModal("fail","Failed",s,"Ok")})})}openWithInAppBrowser(i){return t.b(this,void 0,void 0,(function*(){let e=yield this.alertCtrl.create({header:"View CF4?",message:"Would you like to view the CF4 printout?",buttons:[{text:"No",handler:()=>{console.log("Cancel clicked")}},{text:"Yes",handler:()=>{this.inAppBrowser.create(i,"_system",this.options)}}]});yield e.present()}))}openAlertModal(i,e,s,r="Done"){return t.b(this,void 0,void 0,(function*(){const t=yield this.modalController.create({component:n.a,cssClass:"my-custom-modal-css",componentProps:{alert:i,title:e,message:s,ok:r}});return t.onDidDismiss().then(i=>{null!==i&&console.log("result.data: ",i.data)}),yield t.present()}))}openAlertModalValidation(i,e,s,r,o,a="Done",l){return t.b(this,void 0,void 0,(function*(){const t=yield this.modalController.create({component:n.a,cssClass:"my-custom-modal-array-css",componentProps:{alert:i,title:e,message:s,messageArray:r,ok:a}});return t.onDidDismiss().then(i=>{null!==i&&(console.log("result.data: ",i.data),this.showPDF=!0),this.openWithInAppBrowser(l)}),yield t.present()}))}}},"dz+s":function(i,e,s){"use strict";s.d(e,"a",(function(){return n}));var t=s("mrSG");s("ZZ/e");class n{constructor(i){this.toastCtrl=i}ngOnInit(){}onClick(){return t.b(this,void 0,void 0,(function*(){(yield this.toastCtrl.create({message:this.modifiedBy,duration:5e3})).present()}))}}},gly3:function(i,e,s){"use strict";s.d(e,"a",(function(){return c}));var t=s("tS1D"),n=s("lJxs"),r=s("JIr8"),o=s("Cfvw"),a=s("z6cu"),l=s("IheW"),h=s("ZZ/e"),_=s("yp2w"),d=s("8Y7J");let c=(()=>{class i{constructor(i,e,s){this.platform=i,this.httpClient=e,this.http=s,this.url="http://localhost:3000",this.getcf4Path="/api/cf4/file/path"}setUrl(i){this.url=i}setToken(i){this.token=i}getCf4(i){if(this.platform.is("ios")||this.platform.is("android")){console.log("native");const e={encounter_nr:i},s={Accept:"application/json",Authorization:"Bearer "+this.token};return Object(o.a)(this.http.get(this.url+this.getcf4Path,e,s)).pipe(Object(t.a)(3e4),Object(n.a)(i=>{const e=JSON.parse(i.data);return console.log("CF4: ",e),e}),Object(r.a)((i,e)=>{if("string"==typeof i.error)try{i.error=JSON.parse(i.error)}catch(s){}return console.log("CF4 error: ",i,e),Object(a.a)(i)}))}{console.log("browser");const e=(new l.h).set("encounter_nr",i);console.log("params: ",e);const s={params:e,headers:new l.g({Accept:"application/json",Authorization:"Bearer "+this.token})};return console.log("httpOptions",s),this.httpClient.get(this.url+this.getcf4Path,s).pipe(Object(t.a)(3e4),Object(n.a)(i=>(console.log("CF4: ",i),i)),Object(r.a)((i,e)=>(console.log("CF4 error: ",i,e),Object(a.a)(i))))}}}return i.ngInjectableDef=d.bc({factory:function(){return new i(d.cc(h.Nb),d.cc(l.c),d.cc(_.a))},token:i,providedIn:"root"}),i})()},h7h0:function(i,e,s){"use strict";var t=s("8Y7J"),n=s("oBZk"),r=s("ZZ/e");s("dz+s"),s.d(e,"a",(function(){return o})),s.d(e,"b",(function(){return a}));var o=t.Bb({encapsulation:0,styles:[["button[_ngcontent-%COMP%]{background:0 0;padding:0;margin:0}button[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%]{width:25px;font-size:25px}"]],data:{}});function a(i){return t.Yb(0,[(i()(),t.Db(0,0,null,null,1,"ion-icon",[["color","primary"],["name","information-circle-outline"]],[[8,"hidden",0]],[[null,"click"]],(function(i,e,s){var t=!0;return"click"===e&&(t=!1!==i.component.onClick()&&t),t}),n.ub,n.s)),t.Cb(1,49152,null,0,r.D,[t.j,t.p,t.G],{color:[0,"color"],name:[1,"name"]},null)],(function(i,e){i(e,1,0,"primary","information-circle-outline")}),(function(i,e){var s=e.component;i(e,0,0,!(null!=s.modifiedDate&&""!=s.modifiedDate||null!=s.modifiedBy&&""!=s.modifiedBy))}))}}}]);