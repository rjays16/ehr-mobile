(window["webpackJsonp"] = window["webpackJsonp"] || []).push([["end-of-care-end-of-care-module"],{

/***/ "./node_modules/raw-loader/dist/cjs.js!./src/app/pages/end-of-care/end-of-care.page.html":
/*!***********************************************************************************************!*\
  !*** ./node_modules/raw-loader/dist/cjs.js!./src/app/pages/end-of-care/end-of-care.page.html ***!
  \***********************************************************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony default export */ __webpack_exports__["default"] = ("<app-headerbar title=\"End of Care\"></app-headerbar>\r\n\r\n<ion-content>  \r\n  <ion-refresher slot=\"fixed\" pullFactor=\"0.5\" pullMin=\"100\" pullMax=\"200\" (ionRefresh)=\"doRefreshEndOfCare($event)\">\r\n    <ion-refresher-content></ion-refresher-content>\r\n  </ion-refresher>\r\n  <div class=\"testServer\" *ngIf=\"loginService.inTestServer\">\r\n    TEST SERVER CONECTED\r\n  </div>\r\n  <div class=\"wrapper\">\r\n    <form #endOfCare=\"ngForm\">\r\n      <div class=\"textSection\">\r\n        <ion-radio-group required [(ngModel)]=\"outcome_treatment\" name=\"outcome-treatment\" (ionChange)=\"outcomeTreatmentChange($event)\">\r\n          <ion-list-header class=\"textLabel\">\r\n            <ion-label color=\"danger\">Outcome Treatment *</ion-label> <app-modified-b-toast [modifiedBy]=\"endCaremodified.modified_by\" [modifiedDate]=\"endCaremodified.modified_dt\"></app-modified-b-toast>\r\n          </ion-list-header>\r\n          <ion-item lines=\"none\" class=\"ion-no-padding\" *ngFor=\"let outcome of outcomeList\">\r\n            <ion-label>{{outcome.name}}</ion-label>\r\n            <ion-radio [disabled]=\"!pEndOfCareSave || !endCareAllowEdit\" slot=\"start\" value=\"{{outcome.id}}\"></ion-radio>\r\n          </ion-item>\r\n        </ion-radio-group>\r\n      </div>\r\n      <div *ngIf=\"(outcome_treatment === 5 || outcome_treatment === '5')\" class=\"textSection\">\r\n        <ion-label [color]=\"(outcome_treatment === 5 || outcome_treatment === '5') && ((reason.length <= 0 || reason.length > 2000)) ? 'danger':'dark'\" class=\"textLabel\">Reason *</ion-label>\r\n        <ion-textarea rows=\"10\" pattern=\"^(?=.*\\S).+$\" class=\"textarea\" [required]=\"(outcome_treatment === 5 || outcome_treatment === '5')\" [disabled]=\"!pEndOfCareSave || !endCareAllowEdit\" placeholder=\"Enter your reason here...\" [(ngModel)]=\"reason\" name=\"transferred-reason\"></ion-textarea>\r\n        <div *ngIf=\"(outcome_treatment === 5 || outcome_treatment === '5')\">\r\n          <p class=\"warning-message\" *ngIf=\"(reason.length > 2000)\">You have reach the maximum character limit.</p>\r\n          <p class=\"warning-message\" *ngIf=\"(reason.length === 0)\">Reason is required.</p>\r\n        </div>\r\n      </div>\r\n      <div class=\"textSection\">\r\n        <ion-label [color]=\"((doctors_advice.length <= 0 || doctors_advice.length > 2000)) ? 'danger':'dark'\" class=\"textLabel\">Doctors Advice *</ion-label>\r\n        <ion-textarea required  pattern=\"^(?=.*\\S).+$\"  rows=\"10\" class=\"textarea\" [disabled]=\"!pEndOfCareSave || !endCareAllowEdit\" placeholder=\"Enter your advice here...\" [(ngModel)]=\"doctors_advice\" name=\"doctor-advice\"></ion-textarea>\r\n        <p class=\"warning-message\" *ngIf=\"(doctors_advice.length <= 0)\">Doctors Advice is required.</p>\r\n        <p class=\"warning-message\" *ngIf=\"(doctors_advice.length > 2000)\">You have reach the maximum character limit.</p>\r\n      </div>\r\n      <div class=\"ion-padding\">\r\n        <ion-button expand=\"block\" [hidden]=\"!endCareAllowEdit\" [disabled]=\"endOfCare.invalid || !pEndOfCareSave || !endCareAllowEdit || doctors_advice.length > 2000 || (reason.length > 2000 && outcome_treatment && (outcome_treatment === 5 || outcome_treatment === '5'))\" (click)=\"saveEndOfCare()\"><ion-icon name=\"paper-plane\"></ion-icon> Save</ion-button>\r\n        <ion-button type=\"button\" expand=\"block\" (click)=\"endCareAllowEdit = !endCareAllowEdit\" [hidden]=\"endCareAllowEdit\" [disabled]=\"!pEndOfCareSave\"><ion-icon name=\"create\"></ion-icon> Edit</ion-button>\r\n      </div>\r\n    </form>\r\n  </div>\r\n</ion-content>\r\n");

/***/ }),

/***/ "./src/app/app/services/alert-service.service.ts":
/*!*******************************************************!*\
  !*** ./src/app/app/services/alert-service.service.ts ***!
  \*******************************************************/
/*! exports provided: AlertServiceService */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "AlertServiceService", function() { return AlertServiceService; });
/* harmony import */ var tslib__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! tslib */ "./node_modules/tslib/tslib.es6.js");
/* harmony import */ var _angular_core__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @angular/core */ "./node_modules/@angular/core/fesm2015/core.js");
/* harmony import */ var _ionic_angular__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @ionic/angular */ "./node_modules/@ionic/angular/dist/fesm5.js");
/* harmony import */ var src_app_pages_prompt_modal_prompt_modal_page__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! src/app/pages/prompt-modal/prompt-modal.page */ "./src/app/pages/prompt-modal/prompt-modal.page.ts");
/* harmony import */ var src_app_pages_prompt_modal_c_prompt_modal_c_page__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! src/app/pages/prompt-modal-c/prompt-modal-c.page */ "./src/app/pages/prompt-modal-c/prompt-modal-c.page.ts");





let AlertServiceService = class AlertServiceService {
    constructor(toastCtrl, modalController, alertController) {
        this.toastCtrl = toastCtrl;
        this.modalController = modalController;
        this.alertController = alertController;
    }
    alertToast(message) {
        return tslib__WEBPACK_IMPORTED_MODULE_0__["__awaiter"](this, void 0, void 0, function* () {
            console.log('AlertToast Message:', message);
            const toast = yield this.toastCtrl.create({
                message: message,
                duration: 8000
            });
            toast.onclick = (ev) => {
                toast.dismiss();
            };
            toast.present();
        });
    }
    openAlertModalValidation(alert, title, message, messageArray, ok = 'Done', okCallBack = (result) => { }) {
        return tslib__WEBPACK_IMPORTED_MODULE_0__["__awaiter"](this, void 0, void 0, function* () {
            const modal = yield this.modalController.create({
                component: src_app_pages_prompt_modal_prompt_modal_page__WEBPACK_IMPORTED_MODULE_3__["PromptModalPage"],
                cssClass: 'my-custom-modal-array-css',
                componentProps: {
                    alert,
                    title,
                    message,
                    messageArray,
                    ok
                }
            });
            modal.onDidDismiss().then((result) => {
                okCallBack(result);
            });
            return yield modal.present();
        });
    }
    openSearchModal(options = [], value = "", placeholder = "Enter here...", maxLength = null, okCallBack = (result) => { }) {
        return tslib__WEBPACK_IMPORTED_MODULE_0__["__awaiter"](this, void 0, void 0, function* () {
            const modal = yield this.modalController.create({
                component: src_app_pages_prompt_modal_c_prompt_modal_c_page__WEBPACK_IMPORTED_MODULE_4__["PromptModalCPage"],
                cssClass: 'my-custom-modal-css',
                componentProps: {
                    searchData: {
                        isForSearch: true,
                        libs: options,
                        searchQuery: value,
                        maxLength: maxLength,
                        placeholder: placeholder
                    },
                }
            });
            modal.onDidDismiss().then((result) => {
                okCallBack(result);
            });
            return yield modal.present();
        });
    }
    openPromptModal(title, message, ok = 'Save', okCallBack = (result) => { }, cancel = 'Cancel', cancelCallBack = (result) => { }) {
        return tslib__WEBPACK_IMPORTED_MODULE_0__["__awaiter"](this, void 0, void 0, function* () {
            const modal = yield this.modalController.create({
                component: src_app_pages_prompt_modal_prompt_modal_page__WEBPACK_IMPORTED_MODULE_3__["PromptModalPage"],
                cssClass: 'my-custom-modal-css',
                componentProps: {
                    prompt,
                    title,
                    message,
                    cancel,
                    ok
                }
            });
            modal.onDidDismiss().then((result) => {
                okCallBack(result);
                cancelCallBack(result);
            });
            return yield modal.present();
        });
    }
    openAlertModal(alert, title, message, ok = 'Done', okCallBack = (result) => { }) {
        return tslib__WEBPACK_IMPORTED_MODULE_0__["__awaiter"](this, void 0, void 0, function* () {
            const modal = yield this.modalController.create({
                component: src_app_pages_prompt_modal_prompt_modal_page__WEBPACK_IMPORTED_MODULE_3__["PromptModalPage"],
                // cssClass: 'auto-height',
                cssClass: 'my-custom-modal-css',
                componentProps: {
                    alert,
                    title,
                    message,
                    ok
                }
            });
            modal.onDidDismiss().then((result) => {
                okCallBack(result);
            });
            return yield modal.present();
        });
    }
    prompNAlert(header = '', subHeader = '', message = '', inputs = [], buttons = [], backdropDismiss = true, keyboardClose = true) {
        return tslib__WEBPACK_IMPORTED_MODULE_0__["__awaiter"](this, void 0, void 0, function* () {
            this.nativeAlert = this.alertController.create({
                header,
                subHeader,
                message,
                backdropDismiss,
                keyboardClose,
                inputs,
                buttons
            }).then(alert => {
                this.nativeAlert.present();
            });
        });
    }
    prompInputNAlert(header = '', subHeader = '', message = '', backdropDismiss = true, keyboardClose = true, inputs = [], buttons = [], callBackOk = () => { }, callBackNo = () => { }) {
        return tslib__WEBPACK_IMPORTED_MODULE_0__["__awaiter"](this, void 0, void 0, function* () {
            if (buttons.length == 0)
                buttons = [
                    {
                        text: 'OK',
                        handler: data => {
                            callBackOk();
                        }
                    },
                    {
                        text: 'Cancel',
                        handler: data => {
                            callBackNo();
                        }
                    }
                ];
            this.nativeAlert = this.alertController.create({
                header: '',
                subHeader: '',
                backdropDismiss,
                keyboardClose,
                message: '',
                inputs,
                buttons
            }).then(alert => {
                this.nativeAlert.present();
            });
        });
    }
};
AlertServiceService.ctorParameters = () => [
    { type: _ionic_angular__WEBPACK_IMPORTED_MODULE_2__["ToastController"] },
    { type: _ionic_angular__WEBPACK_IMPORTED_MODULE_2__["ModalController"] },
    { type: _ionic_angular__WEBPACK_IMPORTED_MODULE_2__["AlertController"] }
];
AlertServiceService = tslib__WEBPACK_IMPORTED_MODULE_0__["__decorate"]([
    Object(_angular_core__WEBPACK_IMPORTED_MODULE_1__["Injectable"])({
        providedIn: 'root'
    }),
    tslib__WEBPACK_IMPORTED_MODULE_0__["__metadata"]("design:paramtypes", [_ionic_angular__WEBPACK_IMPORTED_MODULE_2__["ToastController"],
        _ionic_angular__WEBPACK_IMPORTED_MODULE_2__["ModalController"],
        _ionic_angular__WEBPACK_IMPORTED_MODULE_2__["AlertController"]])
], AlertServiceService);



/***/ }),

/***/ "./src/app/pages/end-of-care/end-of-care.module.ts":
/*!*********************************************************!*\
  !*** ./src/app/pages/end-of-care/end-of-care.module.ts ***!
  \*********************************************************/
/*! exports provided: EndOfCarePageModule */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "EndOfCarePageModule", function() { return EndOfCarePageModule; });
/* harmony import */ var tslib__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! tslib */ "./node_modules/tslib/tslib.es6.js");
/* harmony import */ var _angular_core__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @angular/core */ "./node_modules/@angular/core/fesm2015/core.js");
/* harmony import */ var _angular_common__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @angular/common */ "./node_modules/@angular/common/fesm2015/common.js");
/* harmony import */ var _angular_forms__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @angular/forms */ "./node_modules/@angular/forms/fesm2015/forms.js");
/* harmony import */ var _angular_router__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! @angular/router */ "./node_modules/@angular/router/fesm2015/router.js");
/* harmony import */ var _ionic_angular__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! @ionic/angular */ "./node_modules/@ionic/angular/dist/fesm5.js");
/* harmony import */ var _end_of_care_page__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ./end-of-care.page */ "./src/app/pages/end-of-care/end-of-care.page.ts");
/* harmony import */ var _components_components_module__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ./../../components/components.module */ "./src/app/components/components.module.ts");








const routes = [
    {
        path: '',
        component: _end_of_care_page__WEBPACK_IMPORTED_MODULE_6__["EndOfCarePage"]
    }
];
let EndOfCarePageModule = class EndOfCarePageModule {
};
EndOfCarePageModule = tslib__WEBPACK_IMPORTED_MODULE_0__["__decorate"]([
    Object(_angular_core__WEBPACK_IMPORTED_MODULE_1__["NgModule"])({
        imports: [
            _angular_common__WEBPACK_IMPORTED_MODULE_2__["CommonModule"],
            _angular_forms__WEBPACK_IMPORTED_MODULE_3__["FormsModule"],
            _ionic_angular__WEBPACK_IMPORTED_MODULE_5__["IonicModule"],
            _angular_router__WEBPACK_IMPORTED_MODULE_4__["RouterModule"].forChild(routes),
            _components_components_module__WEBPACK_IMPORTED_MODULE_7__["ComponentsModule"]
        ],
        declarations: [_end_of_care_page__WEBPACK_IMPORTED_MODULE_6__["EndOfCarePage"]]
    })
], EndOfCarePageModule);



/***/ }),

/***/ "./src/app/pages/end-of-care/end-of-care.page.scss":
/*!*********************************************************!*\
  !*** ./src/app/pages/end-of-care/end-of-care.page.scss ***!
  \*********************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony default export */ __webpack_exports__["default"] = ("ion-refresher {\n  z-index: 1;\n}\n\nion-refresher-content {\n  background-color: transparent;\n}\n\nion-content {\n  background: #f9f9f9;\n  --ion-background-color: #f9f9f9;\n}\n\nion-content .wrapper {\n  padding: 20px;\n  width: 100%;\n  margin-left: auto;\n  margin-right: auto;\n}\n\nion-content .wrapper .textSection {\n  margin-bottom: 2vh;\n}\n\nion-content .wrapper .textSection .textarea {\n  background: white;\n  width: 100%;\n  border: none;\n  margin-top: 10px;\n  padding: 10px;\n  border-radius: 10px;\n}\n\nion-content .wrapper .textSection .textLabel {\n  padding-left: 0px !important;\n  font-size: medium;\n}\n\nion-content .wrapper .ion-padding ion-button {\n  height: 48px;\n}\n\nion-radio {\n  --color-checked: #9f9f9f;\n  margin-right: 10px !important;\n  margin-left: 0px !important;\n}\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInNyYy9hcHAvcGFnZXMvZW5kLW9mLWNhcmUvRDpcXHByb2plY3RzXFxpb25pY3NcXGVoci1tb2JpbGUvc3JjXFxhcHBcXHBhZ2VzXFxlbmQtb2YtY2FyZVxcZW5kLW9mLWNhcmUucGFnZS5zY3NzIiwic3JjL2FwcC9wYWdlcy9lbmQtb2YtY2FyZS9lbmQtb2YtY2FyZS5wYWdlLnNjc3MiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUE7RUFDRSxVQUFBO0FDQ0Y7O0FERUE7RUFDRSw2QkFBQTtBQ0NGOztBREVBO0VBQ0UsbUJBQUE7RUFDQSwrQkFBQTtBQ0NGOztBRENFO0VBQ0UsYUFBQTtFQUNBLFdBQUE7RUFDQSxpQkFBQTtFQUNBLGtCQUFBO0FDQ0o7O0FEQ0k7RUFDRSxrQkFBQTtBQ0NOOztBRENNO0VBQ0UsaUJBQUE7RUFDQSxXQUFBO0VBQ0EsWUFBQTtFQUNBLGdCQUFBO0VBQ0EsYUFBQTtFQUNBLG1CQUFBO0FDQ1I7O0FERU07RUFDRSw0QkFBQTtFQUNBLGlCQUFBO0FDQVI7O0FES007RUFDRSxZQUFBO0FDSFI7O0FEU0E7RUFDRSx3QkFBQTtFQUNBLDZCQUFBO0VBQ0EsMkJBQUE7QUNORiIsImZpbGUiOiJzcmMvYXBwL3BhZ2VzL2VuZC1vZi1jYXJlL2VuZC1vZi1jYXJlLnBhZ2Uuc2NzcyIsInNvdXJjZXNDb250ZW50IjpbImlvbi1yZWZyZXNoZXIge1xyXG4gIHotaW5kZXg6IDE7XHJcbn1cclxuXHJcbmlvbi1yZWZyZXNoZXItY29udGVudCB7XHJcbiAgYmFja2dyb3VuZC1jb2xvcjogdHJhbnNwYXJlbnQ7XHJcbn1cclxuXHJcbmlvbi1jb250ZW50IHtcclxuICBiYWNrZ3JvdW5kOiAjZjlmOWY5O1xyXG4gIC0taW9uLWJhY2tncm91bmQtY29sb3I6ICNmOWY5Zjk7XHJcblxyXG4gIC53cmFwcGVyIHtcclxuICAgIHBhZGRpbmc6IDIwcHg7XHJcbiAgICB3aWR0aDogMTAwJTtcclxuICAgIG1hcmdpbi1sZWZ0OiBhdXRvO1xyXG4gICAgbWFyZ2luLXJpZ2h0OiBhdXRvO1xyXG5cclxuICAgIC50ZXh0U2VjdGlvbiB7XHJcbiAgICAgIG1hcmdpbi1ib3R0b206IDJ2aDtcclxuXHJcbiAgICAgIC50ZXh0YXJlYSB7XHJcbiAgICAgICAgYmFja2dyb3VuZDogd2hpdGU7XHJcbiAgICAgICAgd2lkdGg6IDEwMCU7XHJcbiAgICAgICAgYm9yZGVyOiBub25lO1xyXG4gICAgICAgIG1hcmdpbi10b3A6IDEwcHg7XHJcbiAgICAgICAgcGFkZGluZzogMTBweDtcclxuICAgICAgICBib3JkZXItcmFkaXVzOiAxMHB4O1xyXG4gICAgICB9XHJcblxyXG4gICAgICAudGV4dExhYmVsIHtcclxuICAgICAgICBwYWRkaW5nLWxlZnQ6IDBweCAhaW1wb3J0YW50O1xyXG4gICAgICAgIGZvbnQtc2l6ZTogbWVkaXVtO1xyXG4gICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgLmlvbi1wYWRkaW5nIHtcclxuICAgICAgaW9uLWJ1dHRvbiB7XHJcbiAgICAgICAgaGVpZ2h0OiA0OHB4O1xyXG4gICAgICB9XHJcbiAgICB9XHJcbiAgfVxyXG59XHJcblxyXG5pb24tcmFkaW8ge1xyXG4gIC0tY29sb3ItY2hlY2tlZDogIzlmOWY5ZjtcclxuICBtYXJnaW4tcmlnaHQ6IDEwcHggIWltcG9ydGFudDtcclxuICBtYXJnaW4tbGVmdDogMHB4ICFpbXBvcnRhbnQ7XHJcbn1cclxuIiwiaW9uLXJlZnJlc2hlciB7XG4gIHotaW5kZXg6IDE7XG59XG5cbmlvbi1yZWZyZXNoZXItY29udGVudCB7XG4gIGJhY2tncm91bmQtY29sb3I6IHRyYW5zcGFyZW50O1xufVxuXG5pb24tY29udGVudCB7XG4gIGJhY2tncm91bmQ6ICNmOWY5Zjk7XG4gIC0taW9uLWJhY2tncm91bmQtY29sb3I6ICNmOWY5Zjk7XG59XG5pb24tY29udGVudCAud3JhcHBlciB7XG4gIHBhZGRpbmc6IDIwcHg7XG4gIHdpZHRoOiAxMDAlO1xuICBtYXJnaW4tbGVmdDogYXV0bztcbiAgbWFyZ2luLXJpZ2h0OiBhdXRvO1xufVxuaW9uLWNvbnRlbnQgLndyYXBwZXIgLnRleHRTZWN0aW9uIHtcbiAgbWFyZ2luLWJvdHRvbTogMnZoO1xufVxuaW9uLWNvbnRlbnQgLndyYXBwZXIgLnRleHRTZWN0aW9uIC50ZXh0YXJlYSB7XG4gIGJhY2tncm91bmQ6IHdoaXRlO1xuICB3aWR0aDogMTAwJTtcbiAgYm9yZGVyOiBub25lO1xuICBtYXJnaW4tdG9wOiAxMHB4O1xuICBwYWRkaW5nOiAxMHB4O1xuICBib3JkZXItcmFkaXVzOiAxMHB4O1xufVxuaW9uLWNvbnRlbnQgLndyYXBwZXIgLnRleHRTZWN0aW9uIC50ZXh0TGFiZWwge1xuICBwYWRkaW5nLWxlZnQ6IDBweCAhaW1wb3J0YW50O1xuICBmb250LXNpemU6IG1lZGl1bTtcbn1cbmlvbi1jb250ZW50IC53cmFwcGVyIC5pb24tcGFkZGluZyBpb24tYnV0dG9uIHtcbiAgaGVpZ2h0OiA0OHB4O1xufVxuXG5pb24tcmFkaW8ge1xuICAtLWNvbG9yLWNoZWNrZWQ6ICM5ZjlmOWY7XG4gIG1hcmdpbi1yaWdodDogMTBweCAhaW1wb3J0YW50O1xuICBtYXJnaW4tbGVmdDogMHB4ICFpbXBvcnRhbnQ7XG59Il19 */");

/***/ }),

/***/ "./src/app/pages/end-of-care/end-of-care.page.ts":
/*!*******************************************************!*\
  !*** ./src/app/pages/end-of-care/end-of-care.page.ts ***!
  \*******************************************************/
/*! exports provided: EndOfCarePage */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "EndOfCarePage", function() { return EndOfCarePage; });
/* harmony import */ var tslib__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! tslib */ "./node_modules/tslib/tslib.es6.js");
/* harmony import */ var _angular_core__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @angular/core */ "./node_modules/@angular/core/fesm2015/core.js");
/* harmony import */ var _services_end_of_care_api_service__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./../../services/end-of-care-api.service */ "./src/app/services/end-of-care-api.service.ts");
/* harmony import */ var _services_patient_service__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./../../services/patient.service */ "./src/app/services/patient.service.ts");
/* harmony import */ var _services_loading_service__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./../../services/loading.service */ "./src/app/services/loading.service.ts");
/* harmony import */ var _services_api_service__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ./../../services/api.service */ "./src/app/services/api.service.ts");
/* harmony import */ var _services_login_service__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ./../../services/login.service */ "./src/app/services/login.service.ts");
/* harmony import */ var _services_string_utils_service__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ./../../services/string-utils.service */ "./src/app/services/string-utils.service.ts");
/* harmony import */ var _services_permission_validator_service__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ./../../services/permission-validator.service */ "./src/app/services/permission-validator.service.ts");
/* harmony import */ var _ionic_angular__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! @ionic/angular */ "./node_modules/@ionic/angular/dist/fesm5.js");
/* harmony import */ var src_app_app_services_alert_service_service__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! src/app/app/services/alert-service.service */ "./src/app/app/services/alert-service.service.ts");











let EndOfCarePage = class EndOfCarePage {
    constructor(endOfCareApiService, patientService, apiService, loginService, loadingService, stringUtilsService, permissionValidatorService, alertServ, menuController) {
        this.endOfCareApiService = endOfCareApiService;
        this.patientService = patientService;
        this.apiService = apiService;
        this.loginService = loginService;
        this.loadingService = loadingService;
        this.stringUtilsService = stringUtilsService;
        this.permissionValidatorService = permissionValidatorService;
        this.alertServ = alertServ;
        this.menuController = menuController;
        this.reason = '';
        this.doctors_advice = '';
        this.pEndOfCareSave = true;
        this.outcomeList = [];
        this.endCareAllowEdit = true;
        this.endCaremodified = {
            modified_by: null,
            modified_dt: null
        };
        this.SAVE_END_OF_CARE = 1;
        this.currentUser = this.loginService.getAuthentication().user;
        this.endOfCareApiService.setToken(this.loginService.getAuthentication().token);
        this.endOfCareApiService.setUrl(this.apiService.getUrl());
        const selectedPatient = this.patientService.getSelectedPatientBriefInformation();
        this.selectedEncounterNo = this.patientService.getSelectedEncounterNo();
        this.endCareConfig = this.loginService.getConfigAndDefaults().endcare;
        const outcome = this.endCareConfig['m-patient-endofcare']['default-options'].outcome;
        Object.keys(outcome).forEach(key => {
            const o = {
                id: key,
                name: outcome[key]
            };
            this.outcomeList.push(o);
        });
        console.log('this.outcomeList: ', this.outcomeList);
    }
    initUserInterfaceByRole() {
        this.pEndOfCareSave = this.permissionValidatorService.hasEndCareEdit();
    }
    resetForm() {
        this.endCareAllowEdit = true;
        this.endCaremodified = {
            modified_by: null,
            modified_dt: null
        };
    }
    initEndOfCare() {
        return new Promise((resolve, reject) => {
            this.loadingService.present();
            this.endOfCareApiService.getEndOfCare(this.selectedEncounterNo).subscribe((result) => {
                console.log('result: ', result);
                this.loadingService.dismiss().then(_ => {
                    this.resetForm();
                    if (result.model && result.model.id) {
                        this.doctors_advice = result.model.doc_advice ? result.model.doc_advice : '';
                        const treatment = this.outcomeList.find(item => {
                            // tslint:disable-next-line: max-line-length
                            return item.id === result.model.treatment || (typeof result.model.treatment === 'string' && item.id === Number(result.model.treatment)) || item.name === result.model.treatment.toLocaleLowerCase() || item.name === result.model.treatment.toLocaleUpperCase();
                        });
                        if (treatment) {
                            this.outcome_treatment = treatment.id;
                        }
                        this.reason = result.model.reason ? result.model.reason : '';
                        this.endCaremodified.modified_by = result.data.encoded;
                        this.endCaremodified.modified_dt = result.data.encoded_dt;
                        this.endCareAllowEdit = this.reason ? false : true;
                    }
                    resolve(result);
                });
            }, (err) => {
                console.log('err ', err);
                this.loadingService.dismiss().then(_ => {
                    const message = this.stringUtilsService.parseErrorMessage(err);
                    this.alertServ.openAlertModal('fail', 'Failed', message, 'Ok');
                    reject(err);
                });
            });
        });
    }
    ngOnInit() {
        this.menuController.swipeGesture(true, 'mainMenu');
        this.menuController.swipeGesture(true, 'accountMenu');
        this.initUserInterfaceByRole();
        this.initEndOfCare();
    }
    ionViewWillEnter() {
        console.log('ionViewWillEnter');
        const tempSelectedEncounterNo = this.patientService.getSelectedEncounterNo();
        if (this.selectedEncounterNo !== tempSelectedEncounterNo) {
            console.log('selected patient changed');
            this.selectedEncounterNo = tempSelectedEncounterNo;
            this.initUserInterfaceByRole();
            this.initEndOfCare();
        }
        window.addEventListener('native.keyboardshow', this.keyboardShowHandler);
        window.addEventListener('native.keyboardhide', this.keyboardHideHandler);
    }
    ionViewWillLeave() {
        console.log('ionViewWillLeave');
        window.removeEventListener('native.keyboardshow', this.keyboardShowHandler);
        window.removeEventListener('native.keyboardhide', this.keyboardHideHandler);
        this.removeIonAppStyles();
    }
    saveEndOfCare() {
        this.openPromptModal(this.SAVE_END_OF_CARE, {}, 'End of Care', 'Would you like to save your changes?');
    }
    saveEndOfCareFunction() {
        console.log(this.reason);
        console.log(this.doctors_advice);
        const endOfCare = {
            encounter_no: this.selectedEncounterNo,
            reason: this.reason,
            doc_advice: this.doctors_advice,
            treatment: this.outcome_treatment
        };
        console.log('endOfCare: ', endOfCare);
        this.loadingService.present();
        this.endOfCareApiService.saveEndOfCare(endOfCare).subscribe((result) => {
            console.log('result: ', result);
            this.loadingService.dismiss().then(_ => {
                if (result && result.code && result.code === 200) {
                    this.endCaremodified.modified_by = result.data.encoded;
                    this.endCaremodified.modified_dt = result.data.encoded_dt;
                    this.endCareAllowEdit = false;
                    this.alertServ.openAlertModal('success', 'Success', result.message);
                }
                else {
                    if (result.code === 303) { // 'See Other' -> 303 code number
                        console.log(result);
                        this.openAlertModalValidation('fail', 'Missing Required Fields!', result.message, result.mandatories, 'Ok');
                    }
                    else {
                        this.alertServ.openAlertModal('fail', 'Failed', result.message, 'Ok');
                    }
                }
            });
        }, (err) => {
            console.log('err ', err);
            this.loadingService.dismiss().then(_ => {
                const message = this.stringUtilsService.parseErrorMessage(err);
                const messageArray = this.stringUtilsService.parseErrorArrayMessage(err);
                this.openAlertModalValidation('fail', 'Missing Required Fields!', message, messageArray, 'Ok');
            });
        });
    }
    outcomeTreatmentChange(event) {
        const treatment = event.detail.value;
    }
    doRefreshEndOfCare(event) {
        this.initEndOfCare().then(_ => {
            event.target.complete();
        }).catch(_ => {
            event.target.complete();
        });
    }
    openPromptModal(option, data, title, message, ok = 'Save', cancel = 'Cancel') {
        this.alertServ.openPromptModal(title, message, ok, (result) => {
            if (result !== null) {
                console.log('result.data: ', result.data);
                if (result.data && result.data.button === 'Save') {
                    if (option === this.SAVE_END_OF_CARE) {
                        this.saveEndOfCareFunction();
                    }
                }
            }
        });
    }
    openAlertModalValidation(alert, title, message, messageArray, ok = 'Done') {
        this.alertServ.openAlertModalValidation(alert, title, message, messageArray, ok, (result) => {
            if (result !== null) {
                console.log('result.data: ', result.data);
            }
        });
    }
    tapCoordinates(e) {
        this.y = e.touches[0].clientY;
        this.h = window.innerHeight;
        this.offsetY = (this.h - this.y);
        console.log('offset: ', this.offsetY);
    }
    keyboardShowHandler(e) {
        const kH = e.keyboardHeight;
        console.log('show: ', e.keyboardHeight);
        const bodyMove = document.querySelector('ion-app'), bodyMoveStyle = bodyMove.style;
        // Adjust full keyboard height
        bodyMoveStyle.bottom = kH + 'px';
        /*
        if (this.offsetY < kH + 40) {
          bodyMoveStyle.bottom = (kH - this.offsetY + 40) + 'px';
          // bodyMoveStyle.top = 'initial';
        }
        */
        console.log(bodyMoveStyle.bottom);
    }
    keyboardHideHandler() {
        console.log('gone');
        const removeStyles = document.querySelector('ion-app');
        removeStyles.removeAttribute('style');
    }
    removeIonAppStyles() {
        const removeStyles = document.querySelector('ion-app');
        removeStyles.removeAttribute('style');
    }
};
EndOfCarePage.ctorParameters = () => [
    { type: _services_end_of_care_api_service__WEBPACK_IMPORTED_MODULE_2__["EndOfCareApiService"] },
    { type: _services_patient_service__WEBPACK_IMPORTED_MODULE_3__["PatientService"] },
    { type: _services_api_service__WEBPACK_IMPORTED_MODULE_5__["ApiService"] },
    { type: _services_login_service__WEBPACK_IMPORTED_MODULE_6__["LoginService"] },
    { type: _services_loading_service__WEBPACK_IMPORTED_MODULE_4__["LoadingService"] },
    { type: _services_string_utils_service__WEBPACK_IMPORTED_MODULE_7__["StringUtilsService"] },
    { type: _services_permission_validator_service__WEBPACK_IMPORTED_MODULE_8__["PermissionValidatorService"] },
    { type: src_app_app_services_alert_service_service__WEBPACK_IMPORTED_MODULE_10__["AlertServiceService"] },
    { type: _ionic_angular__WEBPACK_IMPORTED_MODULE_9__["MenuController"] }
];
EndOfCarePage = tslib__WEBPACK_IMPORTED_MODULE_0__["__decorate"]([
    Object(_angular_core__WEBPACK_IMPORTED_MODULE_1__["Component"])({
        selector: 'app-end-of-care',
        template: tslib__WEBPACK_IMPORTED_MODULE_0__["__importDefault"](__webpack_require__(/*! raw-loader!./end-of-care.page.html */ "./node_modules/raw-loader/dist/cjs.js!./src/app/pages/end-of-care/end-of-care.page.html")).default,
        styles: [tslib__WEBPACK_IMPORTED_MODULE_0__["__importDefault"](__webpack_require__(/*! ./end-of-care.page.scss */ "./src/app/pages/end-of-care/end-of-care.page.scss")).default]
    }),
    tslib__WEBPACK_IMPORTED_MODULE_0__["__metadata"]("design:paramtypes", [_services_end_of_care_api_service__WEBPACK_IMPORTED_MODULE_2__["EndOfCareApiService"],
        _services_patient_service__WEBPACK_IMPORTED_MODULE_3__["PatientService"],
        _services_api_service__WEBPACK_IMPORTED_MODULE_5__["ApiService"],
        _services_login_service__WEBPACK_IMPORTED_MODULE_6__["LoginService"],
        _services_loading_service__WEBPACK_IMPORTED_MODULE_4__["LoadingService"],
        _services_string_utils_service__WEBPACK_IMPORTED_MODULE_7__["StringUtilsService"],
        _services_permission_validator_service__WEBPACK_IMPORTED_MODULE_8__["PermissionValidatorService"],
        src_app_app_services_alert_service_service__WEBPACK_IMPORTED_MODULE_10__["AlertServiceService"],
        _ionic_angular__WEBPACK_IMPORTED_MODULE_9__["MenuController"]])
], EndOfCarePage);



/***/ }),

/***/ "./src/app/services/end-of-care-api.service.ts":
/*!*****************************************************!*\
  !*** ./src/app/services/end-of-care-api.service.ts ***!
  \*****************************************************/
/*! exports provided: EndOfCareApiService */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "EndOfCareApiService", function() { return EndOfCareApiService; });
/* harmony import */ var tslib__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! tslib */ "./node_modules/tslib/tslib.es6.js");
/* harmony import */ var _angular_core__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @angular/core */ "./node_modules/@angular/core/fesm2015/core.js");
/* harmony import */ var rxjs_operators__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! rxjs/operators */ "./node_modules/rxjs/_esm2015/operators/index.js");
/* harmony import */ var rxjs__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! rxjs */ "./node_modules/rxjs/_esm2015/index.js");
/* harmony import */ var _angular_common_http__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! @angular/common/http */ "./node_modules/@angular/common/fesm2015/http.js");
/* harmony import */ var _ionic_angular__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! @ionic/angular */ "./node_modules/@ionic/angular/dist/fesm5.js");
/* harmony import */ var _ionic_native_http_ngx__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! @ionic-native/http/ngx */ "./node_modules/@ionic-native/http/ngx/index.js");







let EndOfCareApiService = class EndOfCareApiService {
    constructor(platform, httpClient, http) {
        this.platform = platform;
        this.httpClient = httpClient;
        this.http = http;
        this.url = 'http://localhost:3000';
        this.getEndOfCarelPath = '/api/doctor/patient/endcare/getdata';
        this.saveEndOfCarePath = '/api/doctor/patient/endcare/action';
    }
    setUrl(url) {
        this.url = url;
    }
    setToken(token) {
        this.token = token;
    }
    saveEndOfCare(endOfCare) {
        const encounter_no = endOfCare.encounter_no;
        if (this.platform.is('ios') || this.platform.is('android')) {
            console.log('native');
            const body = {
                treatment: endOfCare.treatment,
                reason: endOfCare.reason,
                doc_advice: endOfCare.doc_advice
            };
            const headers = {
                Accept: 'application/json',
                Authorization: 'Bearer ' + this.token
            };
            this.http.setDataSerializer('json');
            return Object(rxjs__WEBPACK_IMPORTED_MODULE_3__["from"])(this.http.post(this.url + this.saveEndOfCarePath + '?id=' + encounter_no, body, headers)).pipe(Object(rxjs_operators__WEBPACK_IMPORTED_MODULE_2__["timeout"])(30000), Object(rxjs_operators__WEBPACK_IMPORTED_MODULE_2__["map"])((response) => {
                const endOfCareResponse = JSON.parse(response.data);
                console.log('End of Care: ', endOfCareResponse);
                return endOfCareResponse;
            }), Object(rxjs_operators__WEBPACK_IMPORTED_MODULE_2__["catchError"])((err, caught) => {
                if (typeof err.error === 'string') {
                    try {
                        err.error = JSON.parse(err.error);
                    }
                    catch (e) {
                        // do nothing
                    }
                }
                console.log('End of Care error: ', err, caught);
                return Object(rxjs__WEBPACK_IMPORTED_MODULE_3__["throwError"])(err);
            }));
        }
        else {
            const body = new FormData();
            body.append('treatment', endOfCare.treatment);
            body.append('reason', endOfCare.reason);
            body.append('doc_advice', endOfCare.doc_advice);
            const httpOptions = {
                params: new _angular_common_http__WEBPACK_IMPORTED_MODULE_4__["HttpParams"]()
                    .set('id', encounter_no),
                headers: new _angular_common_http__WEBPACK_IMPORTED_MODULE_4__["HttpHeaders"]({
                    Accept: 'application/json',
                    Authorization: 'Bearer ' + this.token
                })
            };
            return this.httpClient.post(this.url + this.saveEndOfCarePath, body, httpOptions).pipe(Object(rxjs_operators__WEBPACK_IMPORTED_MODULE_2__["timeout"])(30000), Object(rxjs_operators__WEBPACK_IMPORTED_MODULE_2__["map"])((results) => {
                console.log(results);
                return results;
            }), Object(rxjs_operators__WEBPACK_IMPORTED_MODULE_2__["catchError"])((err, caught) => {
                console.log(caught);
                console.error(err);
                return Object(rxjs__WEBPACK_IMPORTED_MODULE_3__["throwError"])(err);
            }));
        }
    }
    getEndOfCare(encounter_no) {
        if (this.platform.is('ios') || this.platform.is('android')) {
            console.log('native');
            const params = {
                id: encounter_no
            };
            const headers = {
                Accept: 'application/json',
                Authorization: 'Bearer ' + this.token
            };
            return Object(rxjs__WEBPACK_IMPORTED_MODULE_3__["from"])(this.http.get(this.url + this.getEndOfCarelPath, params, headers)).pipe(Object(rxjs_operators__WEBPACK_IMPORTED_MODULE_2__["timeout"])(30000), Object(rxjs_operators__WEBPACK_IMPORTED_MODULE_2__["map"])((response) => {
                const endOfCareResponse = JSON.parse(response.data);
                console.log('End of Care: ', endOfCareResponse);
                return endOfCareResponse;
            }), Object(rxjs_operators__WEBPACK_IMPORTED_MODULE_2__["catchError"])((err, caught) => {
                if (typeof err.error === 'string') {
                    try {
                        err.error = JSON.parse(err.error);
                    }
                    catch (e) {
                        // do nothing
                    }
                }
                console.log('End of Care error: ', err, caught);
                return Object(rxjs__WEBPACK_IMPORTED_MODULE_3__["throwError"])(err);
            }));
        }
        else {
            console.log('browser');
            const httpOptions = {
                params: new _angular_common_http__WEBPACK_IMPORTED_MODULE_4__["HttpParams"]()
                    .set('id', encounter_no),
                headers: new _angular_common_http__WEBPACK_IMPORTED_MODULE_4__["HttpHeaders"]({
                    Accept: 'application/json',
                    Authorization: 'Bearer ' + this.token
                })
            };
            console.log('httpOptions', httpOptions);
            return this.httpClient.get(this.url + this.getEndOfCarelPath, httpOptions).pipe(Object(rxjs_operators__WEBPACK_IMPORTED_MODULE_2__["timeout"])(30000), Object(rxjs_operators__WEBPACK_IMPORTED_MODULE_2__["map"])((results) => {
                console.log(results);
                return results;
            }), Object(rxjs_operators__WEBPACK_IMPORTED_MODULE_2__["catchError"])((err, caught) => {
                console.log(caught);
                console.error(err);
                return Object(rxjs__WEBPACK_IMPORTED_MODULE_3__["throwError"])(err);
            }));
        }
    }
};
EndOfCareApiService.ctorParameters = () => [
    { type: _ionic_angular__WEBPACK_IMPORTED_MODULE_5__["Platform"] },
    { type: _angular_common_http__WEBPACK_IMPORTED_MODULE_4__["HttpClient"] },
    { type: _ionic_native_http_ngx__WEBPACK_IMPORTED_MODULE_6__["HTTP"] }
];
EndOfCareApiService = tslib__WEBPACK_IMPORTED_MODULE_0__["__decorate"]([
    Object(_angular_core__WEBPACK_IMPORTED_MODULE_1__["Injectable"])({
        providedIn: 'root'
    }),
    tslib__WEBPACK_IMPORTED_MODULE_0__["__metadata"]("design:paramtypes", [_ionic_angular__WEBPACK_IMPORTED_MODULE_5__["Platform"],
        _angular_common_http__WEBPACK_IMPORTED_MODULE_4__["HttpClient"],
        _ionic_native_http_ngx__WEBPACK_IMPORTED_MODULE_6__["HTTP"]])
], EndOfCareApiService);



/***/ })

}]);
//# sourceMappingURL=end-of-care-end-of-care-module-es2015.js.map